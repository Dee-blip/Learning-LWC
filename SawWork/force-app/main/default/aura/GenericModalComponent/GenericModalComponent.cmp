<!-- Author: Ruchika Sharma
    Version: 1.0
    Created date: 24/06/2018
    SFDC-2870: Nominum Integration - Pilot Feedbacks
-->
<aura:component >
<!-- global/shared attributes definition -->
<aura:attribute name="recordId" type="string" description="The record id of the request" />
<aura:attribute name="windowTitle" type="string" description="The title to show on the modal window" />

<aura:attribute name="cmpName" type="string" description="The component name to encapsulate. e.g : c:addImage" />    

<aura:attribute name="content" type="string" description="The content to be shown" />    
    
<aura:attribute name="showModal" type="boolean" default="true" description="Control the modal view" />

<aura:attribute name="refreshOnClose" type="boolean" default="false" description="If this variable is set to true, then when this modal will close, it will send instruction to the caller component, so that it refresh itself. (The refresh is implemented by the calling component)" />
    
<aura:attribute name="showFooter" type="boolean" default="true" description="If set to false, the modal will not display the cancel and save button" />

<aura:attribute name="showHeader" type="boolean" default="true" description="If set to false, the modal will display the title header" />

<aura:attribute name="displayContent" type="boolean" default="true" description="If set to false, the modal will display the content" />

<aura:attribute name="saveButtonText" type="string" default="Save" description="Component can replace the save text by another text. e.g Executer" />
    
<aura:attribute name="cancelButtonText" type="string" default="Cancel" description="Component can replace the Cancel text by another text. e.g No" />

<aura:attribute name="large" type="boolean" default="false" description="whether to display a 90% modal or 50%" />


<!-- local attributes definition -->

<aura:attribute name="disableSave" type="boolean" default="false" description="This variable control the state of the save button. It is disabled when action in progress" />


<!-- handlers definition -->
<aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
<aura:handler name="change" value="{!v.closeTriggered}" action="{!c.handleClose}" />
<aura:handler name="change" value="{!v.showModal}" action="{!c.loadCmp}" />

<!--Event registartion-->
<aura:registerEvent name="myComponentEvent" type="c:GenericModalComponentEvent"/>
<!--<aura:registerEvent name="myComponentEventReject" type="c:GenericModalComponentEventReject"/>-->
    
<div role="dialog" class="{!v.showModal ? (v.large ? 'slds-modal slds-modal--large slds-fade-in-open' : 'slds-modal slds-fade-in-open'): 'slds-hide'}">
    <div class="slds-modal__container">
        <div class="{!v.showHeader ? 'slds-modal__header': 'slds-modal__header slds-modal__header--empty'}">
            <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" onclick="{!c.handleCancel}">
                <lightning:icon iconName="utility:close" size="small" />
                <span class="slds-assistive-text">Close</span>
            </button>
            <h2 class="{!v.showHeader ? 'slds-text-heading--medium': 'slds-hide'}">{!v.windowTitle}</h2>
        </div>            
		<div aura:id="xid-cmp-content" class="slds-modal__content slds-p-around--medium slds-is-relative xcs-fix-max-height">
            <p class="{!v.displayContent ? 'slds-text-body_regular': 'slds-hide'}">{!v.content}</p>
        </div>
        <div aura:id="xid-cmp-body" class="slds-modal__content slds-p-around--medium slds-is-relative xcs-fix-max-height">
            <lightning:spinner aura:id="xid-cmp-spinner" variant="brand" size="small"/>
            <!--####################################################### -->
            <!-- The component is dynamically loaded here -->
            <!--####################################################### -->                              
            
        </div>
        <div class="{!v.showFooter ? 'slds-modal__footer': 'slds-hide'}">
            <button class="slds-button slds-button--neutral" onclick="{!c.handleCancel}">{!v.cancelButtonText}</button>
            <button class="slds-button slds-button--brand" disabled="{!v.disableSave}" onclick="{! c.fireMyComponentEvent }" >{!v.saveButtonText}</button>
        </div>
    </div>
</div>
<aura:if isTrue="{!v.showModal}">
    <div class="slds-backdrop slds-backdrop--open"></div>
</aura:if>   
</aura:component>