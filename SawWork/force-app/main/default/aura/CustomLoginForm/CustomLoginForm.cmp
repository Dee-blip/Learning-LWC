<!--Customer Community Component add implements="forceCommunity:availableForAllPageTypes" to surface the component in community builder -->
<aura:component controller="LightningLoginFormController" implements="forceCommunity:availableForAllPageTypes">
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <aura:attribute name="showError" type="Boolean" required="true" description="" default="false" access="private"/>
    <aura:attribute name="errorMessage" type="String" required="false" description="" access="private"/>
    <aura:attribute name="startUrl" type="String" required="false" description="The url you go to after a successful login" />
    <aura:attribute name="usernameLabel" type="String" required="false"/>
    <aura:attribute name="passwordLabel" type="String" required="false"/>
    <aura:attribute name="loginButtonLabel" type="String" required="false"/>
    <aura:attribute name="expid" type="String" required="false" description="The branding experience ID" />        
    
    <aura:attribute name="forgotPasswordLabel" type="String" required="false"/>
    <aura:attribute name="selfRegisterLabel" type="String" required="false"/>
    <aura:attribute name="forgotPasswordUrl" type="String" required="false" default="/ForgotPassword"/>
    <aura:attribute name="selfRegisterUrl" type="String" required="false" default="/SelfRegister"/>
    
    <aura:attribute name="isUsernamePasswordEnabled" type="Boolean" access="private"/>
    <aura:attribute name="isSelfRegistrationEnabled" type="Boolean" access="private"/>
    <aura:attribute name="communityForgotPasswordUrl" type="String" access="private"/>
    <aura:attribute name="communitySelfRegisterUrl" type="String" access="private"/>
    <aura:attribute name="isSSOloginPage" type="Boolean" access="private"/>
    <aura:attribute name="goToRegisterPage" type="Boolean" access="private"/>
    <aura:registerevent name="sitePropagatedStartUrl" type="c:setStartUrl"/>
    <aura:handler name="init" value="{!this}" action="{!c.initialize}"/>
    <aura:dependency resource="c:setStartUrl" type="EVENT"/>
    <!--Un Commented-->
    <aura:dependency resource="siteforce:registerQueryEventMap" type="EVENT"/>
    
    <aura:handler event="c:setStartUrl" action="{!c.setStartUrl}"/>
    <aura:handler event="c:setExpId" action="{!c.setExpId}"/>    
    <aura:dependency resource="c:setExpId" type="EVENT"/> 
    

    <article class="slds-card main-article slds-clearfix" aura:id="mainArticle">
        <aura:renderIf isTrue="{!v.isSSOloginPage}">
            <div class="slds-clearfix slds-scope" aura:id="loginOption">
                <a class="anchor" onclick="{!c.SSOInitiation}">
                    <div class="slds-float_left login-link" style="margin-right:2%;">
                        <div class="slds-grid slds-wrap">
                            <div class="slds-text-heading_medium">
                                {!$Label.c.Jarvis_CustomLoginForm_ACCUsersLoginHeading}
                                <!--Akamai Control Center Users-->
                            </div>
                        </div>
                        <div class="slds-text-body_regular">
                            {!$Label.c.Jarvis_CustomLoginForm_ACCUsersLoginDescription}
                            <!--Customers, partners, and Akamai employees, click here to use your Akamai Control Center account to login. If this is your first visit to the Akamai Community, your membership will be automatically confirmed upon your first login.-->
                        </div>                
                    </div>
                </a>
                <a class="anchor" onclick="{!c.displayLogin}">
                    <div class="slds-float_left login-link" style="margin-left:0%;">
                        <div class="slds-grid slds-wrap">
                            <div class="slds-text-heading_medium">
                                {!$Label.c.Jarvis_CustomLoginForm_CommunityOnlyUsersLoginHeading}
                                <!--Community-Only Users and Guests-->
                            </div>
                        </div>
                        <div class="slds-text-body_regular">
                            {!$Label.c.Jarvis_CustomLoginForm_CommunityOnlyUsersLoginDescription}
                            <!--If you don't have a login to the Akamai Control Center, but have a community user name and password, click here to login.-->
                        </div>
                    </div>
                </a>
            </div>
        </aura:renderIf>
    </article>
    
    
    
    <div>
        <aura:renderIf isTrue="{!v.isUsernamePasswordEnabled}">
            <span>
                <aura:renderIf isTrue="{!v.showError}">
                    <div id="error">
                        <ui:outputRichText value="{!v.errorMessage}"/>
                    </div>
                </aura:renderIf>
            </span>
            <aura:renderIf isTrue="{!v.goToRegisterPage}">
                <div style="align=center; font-size:1.5rem;">{!$Label.c.Jarvis_CustomLoginForm_UsernamePasswordLogin}<!--Community-Only and Guest User Login--></div>
                <div id="sfdc_username_container" class="sfdc">
                    <span id="sfdc_user" class="login-icon" data-icon="a"></span>
                    <ui:inputText value="" aura:id="username" placeholder="{!v.usernameLabel}" keyup="{!c.onKeyUp}" class="input sfdc_usernameinput sfdc" label="{!v.usernameLabel}" labelClass="assistiveText"/>
                </div>
                
                <div id="sfdc_password_container" class="sfdc">
                    <span id="sfdc_lock" class="login-icon sfdc" data-icon="c"></span>
                    <ui:inputSecret value="" aura:id="password" placeholder="{!v.passwordLabel}" keyup="{!c.onKeyUp}" class="input sfdc_passwordinput sfdc" label="{!v.passwordLabel}" labelClass="assistiveText"/>
                </div>
                
                <div class="sfdc"><br></br>
                    <lightning:button variant="brand" class="slds-button slds-button_stretch" aura:id="submitButton" label="{!$Label.c.Jarvis_CustomLoginForm_LogInButton}" onclick="{!c.handleLogin}"/>
                </div>
                
                <div id="sfdc_forgot" class="sfdc">
                    <span><a href="{!if(v.communityForgotPasswordUrl == null, v.forgotPasswordUrl, v.communityForgotPasswordUrl)}">{!v.forgotPasswordLabel}</a></span>
                    <aura:renderIf isTrue="{!v.isSelfRegistrationEnabled}">
                        <span style="float:right" ><a href="{!if(v.communitySelfRegisterUrl == null, v.selfRegisterUrl, v.communitySelfRegisterUrl)}">{!v.selfRegisterLabel}</a></span>
                    </aura:renderIf>                            
                </div> 
            </aura:renderIf>
        </aura:renderIf>
    </div>
    
</aura:component>