<!-- 
   @author:Nikhil Karn
   @date:
   @details:
   @lastModifiedBy:
   @lastModifiedDate:
   -->
<aura:component controller="HD_Lightining_Reporting"
   implements="force:appHostable,flexipage:availableForAllPageTypes,force:hasRecordId,force:lightningQuickAction"
   access="global">
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />

   <aura:attribute name="error_message" type="String" default="" />
   <aura:attribute name="serviceRequestsList" type="String[]" default="" />
   <aura:attribute name="isReportTypeIncident" type="Boolean" default="false" />
   <aura:attribute name="isReportTypeServiceRequest" type="Boolean" default="true" />
   <aura:attribute name="selectedServiceRequests" type="String[]" default="" />
   <aura:attribute name="selectedStatus" type="String[]" default=""/>
   <aura:attribute name="options" type="String[]" />
   <aura:attribute name="from" type="Date" default="" />
   <aura:attribute name="to" type="Date" default="" />
   <aura:attribute name="isReportViewComponentEnabled" type="Boolean" default="false" />
   <aura:attribute name="isViewReportButtonDisabled" type="Boolean" default="true" />
   <aura:attribute name="report" type="String" />
   <aura:attribute name="reportInCsvFormat" type="String" />
   <aura:attribute name="isReportAvailable" type="Boolean" default="false" />
   <aura:attribute name="isSpinnerActive" type="Boolean" default="false" />
   <aura:attribute name="isCsvReportAvailable" type="Boolean" default="false" />
   <aura:attribute name="windowWidth" type="Integer" />
   <aura:attribute name="windowHeight" type="Integer" />
   <aura:attribute name="selectedServiceRequestsTemp" type="String[]" default="" />
   <aura:attribute name="selectedStatusTemp" type="String[]" default=""/>
   <aura:attribute name="width" type="String" default="240px;" />

   <aura:handler name="selectChange" event="c:HD_Reporting_SelectChange" action="{!c.handleSelectChangeEvent}" />
   <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
   <div>
    <!--c:HD_Hide_Header /--> <!-- @Amogh as part of PRTORES-1868 -->
   <div class="slds-grid ">
      <div class="slds-col slds-has-flexi-truncate">
         <div
            class="slds-page-header slds-page-header--object-home "
            style="width: 100%;" id="outermostDiv"
            onresize="{!c.reszie}">
            <fieldset class="slds-form-element" data-aura-class="slds-col slds-has-flexi-truncate">
               <legend class="slds-form-element__legend slds-form-element__label">Helpdesk Service Request Reporting</legend>
               <div class="slds-form-element__control" onmouseleave="{!c.handleMouseLeave}">
                  <div class="slds-col slds-has-flexi-truncate">
                     <div class="slds-radio--button-group" style="width:100%">
                        <lightning:buttonGroup>
                           <lightning:button variant="brand" label="Service Request"/>
                        </lightning:buttonGroup>
                        <aura:if isTrue="{!v.isReportTypeServiceRequest}">
                           <c:HD_Reporting_Multiselect multiselectComponentDataType="serviceRequests" />
                           <c:HD_Reporting_Multiselect multiselectComponentDataType="status" />
                           <div class="slds-p-top_xxx-small">
                              <div class="slds-p-left_large">
                                 <ui:inputDate aura:id="fromDate" label="From" class="field" value="{!v.from}" displayDatePicker="true"/>
                              </div>
                           </div>
                           <div class="slds-p-top_xxx-small">
                            <div class="slds-p-left_large">
                              <ui:inputDate aura:id="toDate" label="To" class="field" value="{!v.to}" displayDatePicker="true"/>
                          </div>
                           </div>
                           <div class="slds-float_right">
                              <div class="slds-p-around_medium">
                                <div class="slds-p-top_x-small">
                                 <button class="slds-button slds-button_success"
                                    disabled="false"
                                    onclick="{!c.handleViewReportClick }">View Report</button>
                                 <aura:if isTrue="{!v.isCsvReportAvailable}">
                                    <lightning:button label="Download As CSV" iconName="utility:download" iconPosition="left" onclick="{!c.downloadServiceReportAsCsv}" variant="brand"/>
                                 </aura:if>
                             </div>
                              </div>
                           </div>
                        </aura:if>
                     </div>
                  </div>
               </div>
            </fieldset>
         </div>
      </div>
   </div>
</div>
   <div>
      <aura:if isTrue="{!v.isSpinnerActive}">
         <div class="demo-only" style="height: 6rem;">
            <div role="status" class="slds-spinner slds-spinner_medium">
               <span class="slds-assistive-text">Loading</span>
               <div class="slds-spinner__dot-a"></div>
               <div class="slds-spinner__dot-b"></div>
            </div>
         </div>
      </aura:if>
      <aura:if isTrue="{!v.isReportAvailable}">
         <span >
            <c:HD_Reporting_TableView report="{!v.report}" />
         </span>
      </aura:if>
   </div>
</aura:component>