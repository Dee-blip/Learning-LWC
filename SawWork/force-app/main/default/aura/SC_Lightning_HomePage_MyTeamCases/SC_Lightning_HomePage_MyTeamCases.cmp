<!--=====================================================================================================+
    Component name      :   SC_Lightning_HomePage_MyTeamCases
    Author              :   Sumukh SS
    Created             :   10-May-19
    Purpose             :   Component for lightning Home Page - Showing My Team Cases for Manager Profile
                            
    Last Modified Developer           Purpose            
    ============= ========================  =======
    10-May-19    Sumukh SS 	ESESP-2314 Initial Development
    26-FEB-2020  Harshil    ESESP-2917 Added Support country column for my team cases table and added dynamic case geo color support 
+=====================================================================================================-->
<aura:component implements="flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId" controller="SC_Akatec_Lightning_Homepage" access="global" >


<aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

<aura:attribute name="OpenCount" type="string"/>  

<aura:attribute name="OpenCase" type="List"/>

<lightning:workspaceAPI aura:id="workspace"/>

<aura:handler event="force:refreshView" action="{!c.doInit}"/>


<div class="slds-box slds-theme_default">
  
    <lightning:accordion allowMultipleSectionsOpen="true" activeSectionName="">
            <lightning:accordionSection name="My Team Cases" label="{!v.OpenCount + ' My Team Cases'}">
     			 <aura:set attribute="actions">
                <lightning:buttonMenu aura:id="menu" iconName="action:refresh" onselect="{! c.handleSelect }"  menuAlignment="right">
                    <lightning:menuItem value="Refresh" label="Refresh" />
                </lightning:buttonMenu>
                </aura:set>
    
    <div class="slds-m-around_medium"  style=" margin-left: 0px;margin-right: 0px; margin-top: 5px;margin-bottom: 5px; border: 1.5px #39B4C0 solid;">
        
        <div class="slds-form-element">  
            <div class="slds-grid slds-gutters">
                
                
                <div class="slds-col">
                    
                    
                </div>
                
                <div class="slds-col">
                </div>
                
            </div>
        </div>
        
        
        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-no-row-hover" style="width:100%">
            <thead>
                <tr class="slds-line-height_reset">
                    
                    <th class="slds-text-title_caps" scope="col" style="width:10%">
                        <div class="slds-truncate" >AKAM Case ID</div>
                    </th>
                    
                    <th class="slds-text-title_caps" scope="col" style="width:13%;">
                        <div class="slds-truncate" >Account</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col" style="width:17%;">
                        <div class="slds-truncate" >Subject</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col">
                        <div class="slds-truncate" >Geography</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col">
                        <div class="slds-truncate" >Support Country</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col" style="width:5.5%;">
                        <div class="slds-truncate" >LOE</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col">
                        <div class="slds-truncate" >Work Type</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col" style="width:7%;">
                        <div class="slds-truncate">Status</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col" style="width:4.5%;">
                        <div class="slds-truncate">Severity</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col" style="width:8%;">
                        <div class="slds-truncate">Support Level</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col">
                        <div class="slds-truncate" >Next Action</div>
                    </th>
                     <th class="slds-text-title_caps" scope="col">
                        <div class="slds-truncate" >Case Owner</div>
                    </th>
                    <th class="slds-text-title_caps" scope="col">
                        <div class="slds-truncate" >SLA</div>
                    </th>
                </tr>
            </thead>
            
            <tbody>
                <aura:iteration items="{!v.OpenCase}" var="case1">
                    <tr class="slds-hint-parent">
                        
                        <aura:if isTrue="{!case1.EachCaseRec.Recent_Update__c==true}">
                            
                            <td style="width:10%;background: orange;"><a id="{!case1.EachCaseRec.Id}" onclick="{!c.openNewTab}">{!case1.EachCaseRec.AKAM_Case_ID__c}</a>
                                
                            </td>
                        </aura:if>
                        <aura:if isTrue="{!case1.EachCaseRec.Recent_Update__c==false}">
                            
                            <td style="width:10%;"><a id="{!case1.EachCaseRec.Id}" onclick="{!c.openNewTab}">{!case1.EachCaseRec.AKAM_Case_ID__c}</a>
                            </td>
                        </aura:if>
                        
                        
                        <td style="width:13%;">{!case1.EachCaseRec.Account.Name}</td>
                        <td style="width:17%;">{!case1.EachCaseRec.Subject}</td>
                        <td Style="{! 'color:'+case1.GeoColor}">
                                                {!case1.EachCaseRec.Support_Geography__c}
                                            </td>
                        <!--<aura:if isTrue="{!case1.EachCaseRec.Support_Geography__c=='NORTHAM'}">
                            
                            <td Style="color:Orange">
                                <div class="">
                                    {!case1.EachCaseRec.Support_Geography__c}
                                </div>
                            </td>
                        </aura:if>
                        <aura:if isTrue="{!case1.EachCaseRec.Support_Geography__c=='LATAM'}">
                            
                            <td Style="color:Grey">
                                <div class="">
                                    {!case1.EachCaseRec.Support_Geography__c}
                                </div>
                            </td>
                        </aura:if>
                        <aura:if isTrue="{!case1.EachCaseRec.Support_Geography__c=='EMEA'}">
                            
                            <td Style="color:Green">
                                <div class="">{!case1.EachCaseRec.Support_Geography__c}
                                </div>
                            </td>
                            
                            
                        </aura:if>
                        <aura:if isTrue="{!case1.EachCaseRec.Support_Geography__c=='APJ'}">
                            <td Style="color:Purple">
                                <div class="">
                                    {!case1.EachCaseRec.Support_Geography__c}
                                </div>
                            </td>
                        </aura:if>-->
                        <td>{!case1.EachCaseRec.Account.BillingCountry}</td>
                        <td style="width:5.5%;">{!case1.EachCaseRec.Task_LOE__c}</td>
                        <td>{!case1.EachCaseRec.Work_Type__c}</td>
                        <td style="width:7%;">{!case1.EachCaseRec.Status}</td>
                        <td style="width:4.5%;">{!case1.EachCaseRec.Severity__c}</td>
                        <td style="width:8%;">{!case1.EachCaseRec.Support_Level__c}</td>
                        <td>{!case1.EachCaseRec.Next_Action__c}</td>
                        <td>{!case1.EachCaseRec.Case_Owner_Name__c}</td> 
                        <td style="{!'color:'+case1.SLA_Color}" >
                           {!case1.SLA}
                        </td>
                    </tr>
                </aura:iteration>  
            </tbody>
        </table>
        
        
    </div>
        </lightning:accordionSection>
    </lightning:accordion>
</div>
</aura:component>