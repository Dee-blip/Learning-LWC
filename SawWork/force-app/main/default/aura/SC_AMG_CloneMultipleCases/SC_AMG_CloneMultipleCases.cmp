<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction,lightning:isUrlAddressable" controller="SC_AMG_Lightning"  extends="c:AuraUtils" access="global" >
    
    <!-- Handlers -->
    <aura:handler name="Loading" event="c:Loading" action="{!c.spinnerShow}" />
    <aura:handler name="DoneLoading" event="c:DoneLoading" action="{!c.spinnerHide}" />
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    
    <!-- Attributes -->
    <aura:attribute name="caserecId" type="Id" />
    <aura:attribute name="showSpinner" type="boolean" default="false" />
    <aura:attribute name="showCloneFromCase" type="boolean" default="false" />
    <aura:attribute name="accountList" type="List" default="[]"/>
    <aura:attribute name="selectedAccList" type="List" default="[]"/>
    <aura:attribute name="accLookupId" type="Id" />
    <aura:attribute name="defaultOptions" type="List" default=""/>
   
    <!-- workspaceAPI -->
    <lightning:workspaceAPI aura:id="workspace" />
    
    
    <aura:if isTrue="{!v.showSpinner}">
        <div class="demo-only demo-only demo-only_viewport demo--inverse" style="height:6rem">
            <div class="slds-spinner_container slds-is-fixed">
                <div role="status" class="slds-spinner slds-spinner_large slds-spinner_brand">
                    <span class="slds-assistive-text">Loading</span>
                    <div class="slds-spinner__dot-a"></div>
                    <div class="slds-spinner__dot-b"></div>
                </div>
            </div>
        </div>
    </aura:if>
    
    <div class="slds-align_absolute-center">   
        <div class="slds-theme_default" style="height:600px; width:800px">
            
            <lightning:recordEditForm aura:id="form"
                                      objectApiName="Case"     
                                      onsubmit="{!c.handleOnSubmit}">
                
                <lightning:layout>
                    <lightning:layoutItem  padding="around-small">
                        <div style="padding-top:7px; font-size:14px" class="custom-box">Account:</div>
                    </lightning:layoutItem>
                    <lightning:layoutItem size="8" padding="around-small">   
                        <lightning:inputField variant="label-hidden" fieldName="AccountId" />
                    </lightning:layoutItem>
                    <lightning:layoutItem padding="around-small">
                        <lightning:button variant="brand" label="Add" type="submit" />
                    </lightning:layoutItem>
                </lightning:layout>
            </lightning:recordEditForm>
            
            <div class="slds-m-around_xx-large">
                <lightning:dualListbox aura:id="selectAccount"
                                       name="AccountNames"
                                       label="Select Account"
                                       sourceLabel="Available Accounts"
                                       selectedLabel="Selected Accounts"
                                       options="{!v.accountList }"
                                       onchange="{!c.handleAccountChange}"
                                       value="{! v.defaultOptions }"/>
                <br/> <br/> <br/>
                <div style="padding-left: 200px">
                    <lightning:button onclick="{!c.closeTab}" >Cancel</lightning:button>
                    &nbsp; &nbsp; &nbsp;
                    <lightning:button variant="brand" label="Clone" onclick="{!c.cloneSelectedAccount}" />
                </div>
            </div>
            
        </div>
    </div>       
    
    
</aura:component>