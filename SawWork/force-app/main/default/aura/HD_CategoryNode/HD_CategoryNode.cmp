<aura:component >
    <aura:dependency resource="markup://c:HD_CategoryNode" type="COMPONENT" />
    <aura:dependency resource="markup://c:HD_SelectCategory" type="EVENT" />
    <aura:attribute name="node" type="Object" />
    <aura:attribute name="expanded" type="Boolean" default="false" />
    <aura:attribute name="expandAll" type="Boolean" default="false" />
	<aura:registerEvent name="HD_SelectCategory" type="c:HD_SelectCategory"/>
	
    <div>
        <div onclick="{!c.toggle}" ondblclick ="{!c.selectCategory}">
            
            <aura:if isTrue="{!v.node.items.length>0}">
                 {!v.expanded?'&#x25BE;':'&#x25B8;'} 
                <!--<aura:if isTrue="{!v.expanded}">
                   <lightning:icon iconName="utility:chevrondown" size="xx-small"/>
               </aura:if>
                <aura:set attribute="else">
					<lightning:icon iconName="utility:chevronright" size="xx-small"/>
    			</aura:set>-->
               	<lightning:icon iconName="doctype:folder" size="xx-small"/>
				<aura:set attribute="else">
				
               &nbsp;
               <!--<lightning:icon iconName="utility:summary" size="xx-small"/>-->
    		</aura:set>
            </aura:if> 
            

            <ui:outputText value="{!v.node.Name}" />
        </div>
        
        <aura:if isTrue="{!or(v.expanded, v.expandAll)}">
            <div class="node">
                <aura:iteration items="{!v.node.items}" var="node">
                    <c:HD_CategoryNode node="{!node}" expandAll="{!v.expandAll}" />
                </aura:iteration>
            </div>
        </aura:if>
    </div>
</aura:component>