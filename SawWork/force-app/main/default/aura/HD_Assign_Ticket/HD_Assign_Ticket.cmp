<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,force:hasRecordId"
	access="global" controller="HD_IncidentDetailController">
    <aura:registerEvent name="HDLogger" type="c:HDLogger"/>
	<ltng:require scripts="{!$Resource.HD_Error_Logger}" /> 
	<aura:attribute name="searchQuery" type="String" />
    <aura:attribute name="incType" type="String" />
    <aura:attribute name="incident" type="BMCServiceDesk__Incident__c" default="{}"  />
	<aura:attribute name="results" type="List" />
	<aura:attribute name="initialResult" type="Map" />
	<aura:attribute name="recordId" type="Id" />
	<aura:attribute name="success" type="String" />
	<aura:attribute name="warnings" type="String[]" />
    <aura:attribute name="showCatChangeOption" type="Boolean" default="false"/>
	<aura:attribute name="selectedQueueId" type="String" />
	<aura:handler name="init" action="{!c.doInit}" value="{!this}" />
	<aura:dependency resource="markup://force:editRecord"
		type="EVENT" />
	<div>
		<div class="">
            <div aura:id="Accspinner" class="slds-spinner_container slds-hide">
                <div role="status" class="slds-spinner slds-spinner--medium slds-spinner--brand">
                    <span class="slds-assistive-text">Processing</span>
                    <div class="slds-spinner__dot-a"></div>
                    <div class="slds-spinner__dot-b"></div>
                </div>
            </div>
<!-- 			<c:HD_Lightning_Clone_Action recordId="{!v.recordId}" />
			<c:HD_Change_Priority recordId="{!v.recordId}" />  -->
            
			<label class="slds-form-element__label" for="queue-input">Queue Name</label>
			<input class="slds-lookup__search-input slds-input" id="queueInput" aura:id="auraQueueInput" type="search"
                      value="{!v.searchQuery}" onkeyup="{!c.performSearch}" >{!v.searchQuery}</input>
            
			<p>Selected Queue : {!v.searchQuery}</p>
			<ul class="">
				<aura:iteration items="{!v.results}" var="result">
					<li role="presentation" onclick="{!c.queueSelected}" data-queue="{!result.name}"
						data-qName="{!result.value}" data-queueid="{!result.id}">
						<span class="slds-lookup__item-action slds-media" id="queueLookupOption"
							role="option">
							<div class="slds-media__body">
								<div class="slds-lookup__result-text">{!result.name}</div>
								<span class="slds-lookup__result-meta slds-text-body--small">{!result.name}</span>
							</div>
						</span>
					</li>
				</aura:iteration>
			</ul>
			<div class="slds-form-element">
				<label class="slds-form-element__label" for="noteInput">Note</label>
				<div class="slds-form-element__control">
					<textarea id="noteInput" class="slds-textarea"
						placeholder="Transfer Note"></textarea>
				</div>
				                
				<label class="slds-form-element__label" for="effortInput">Effort</label>
				<input id="effortInput" aura:id="auraEffortInput" type="text"
					placeholder="hh:mm" class="slds-input"/>
                <br/>
                <aura:if isTrue="{!v.incType != 'Service Request'}">
                    <p class="slds-p-top_x-small slds-p-bottom_x-small">
                    <div class="slds-form-element">
                      <div class="slds-form-element__control">
                        <span class="slds-checkbox">
                          <input type="checkbox" name="options" id="checkbox-1" value="on" onclick="{!c.showChangeCategoryOpt}"/>
                          <label class="slds-checkbox__label" for="checkbox-1">
                            <span class="slds-checkbox_faux"></span>
                            <span class="slds-form-element__label">Change Category</span>
                          </label>
                        </span>
                      </div>
                    </div>
                  
                    <aura:if isTrue="{!v.showCatChangeOption}">
                        
                       <c:HD_Change_Category recordId="{!v.recordId}" showButton="false" />
                    </aura:if>
                    </p>
                </aura:if>

				<ui:button aura:id="Transfer" label="Transfer" press="{!c.transferTicket}" />
				<ui:inputDefaultError aura:id="warn" value="{!v.warnings}" />


			</div>

		</div>
	</div>
</aura:component>