<aura:component controller="HD_CMR_BlackoutPeriod" 
				implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes" 
				access="global" >
    <aura:handler event="c:HD_CMR_EventOutageMatchingCMRList" action="{!c.handleOutageMatchingCMRList}"/>

    <aura:attribute name="changerequests" type="BMCServiceDesk__Change_Request__c[]" />
    <aura:handler name="init" action="{!c.doInit}" value="{!this}" />
    <aura:handler event="force:refreshView" action="{!c.doInit}" />

    
  <aura:if isTrue="{!v.changerequests.length > 0}">
      <br/><br/>
  <div class=" slds-box" style="padding:20px;">    
  <span class="slds-text-heading_medium " style="padding:10px;"> Change Requests matching with service outage </span>
      <br/><br/>
<table class="slds-table slds-table_bordered  slds-cell-buffer_left slds-table_striped">
<thead>
<tr class="slds-text-title_caps">
    <th scope="col">
    <div class="slds-truncate" title="CMR#">CMR#</div>
    </th>
    <th scope="col" style="max-width:150px;">
    <div class="slds-truncate" title="Summury">Change Summary</div>
    </th>
    <th scope="col">
    <div class="slds-truncate" title="Amount">Change Category</div>
    </th>
    <th scope="col">
    <div class="slds-truncate" title="StartDate"> Scheduled  Dates</div>
    </th>
    <th scope="col">
    <div class="slds-truncate" title="Stage">Services SubServices</div>
    </th>
    <th scope="col">
    <div class="slds-truncate" title="Confidence">Status</div>
    </th>
    <th scope="col">
    <div class="slds-truncate" title="Contact">Users</div>
    </th>
    <th scope="col">
    <div class="slds-truncate" title="Action">Action</div>
    </th>
    </tr>
    </thead>
<tbody>
    <aura:iteration items="{!v.changerequests}" var="ch">	
       <tr>
           <td><a data-id="{!v.change.Id}"  target="_blank" href="{!'/lightning/r/BMCServiceDesk__Change_Request__c/'+ ch.Id + '/view'}" >
                          {!ch.Name}
                        </a></td>
           <td style="max-width:150px;" ><div class="slds-grow slds-cell-wrap" >{!ch.Change_Summary__c}</div></td>
           <td>{!ch.BMCServiceDesk__Change_Category__c}</td>
           <td> <c:HD_CMR_dateFormat dateAndTime = "{!ch.BMCServiceDesk__Scheduled_Start_Date__c}"/>
               <c:HD_CMR_dateFormat dateAndTime = "{!ch.BMCServiceDesk__Scheduled_End_Date__c}"/> </td>
           <td>{!ch.HD_Service_Impacted__c}:  {!ch.HD_Sub_services_Impacted__c}</td>
           <td>{!ch.HD_Change_Status__c}</td>
           <td>{!ch.Owner.Name}</td>
           <td><button class="slds-button slds-button_brand" data-changeid="{!ch.Id}" onclick="{!c.sendNotification}">Notify</button></td>
       </tr>
    </aura:iteration>	

   
</tbody>
</table>
      </div>
    </aura:if>
</aura:component>