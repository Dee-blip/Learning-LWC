<aura:component implements="force:hasRecordId" 
                controller="PartnerCommunityCustomSearchController" 
                access="global">
    
    <ltng:require styles="{!join(',',
                           $Resource.bootstrap4 + '/dist/css/bootstrap.min.css',
                          $Resource.datatablebootstrap + '/dist/css/jquery.dataTables.min.css')
                           }"
                  scripts="{!join(',', 
                           
                           $Resource.datatablebootstrap + '/dist/js/jquery.dataTables.min.js',
                           $Resource.datatablebootstrap + '/dist/js/dataTables.bootstrap4.min.js')
                           }" afterScriptsLoaded="{!c.scriptsLoaded}"/> 
    
    <aura:attribute name="record" type="Object"/>
    <aura:attribute name="simpleRecord" type="Object"/>
    <aura:attribute name="recordError" type="String"/>
    <aura:attribute name="sObjectName" type="String" />
    
    <!-- attributes -->
    <aura:attribute name="data" type="Object"/>
    <aura:attribute name="columns" type="List"/>
    <aura:attribute name="records" type="List" />
    <aura:attribute name="processedRecords" type="List" />
    <aura:attribute name="headerFieldsNames" type="List" />
    <aura:attribute name="tableId" type="String" />

    <!-- handlers-->
    <aura:attribute name="mydata" type="Object"/>
    <aura:attribute name="mycolumns" type="List"/>
    <aura:handler name="init" value="{!this}" action="{! c.init }"/>
    
    
    <!--<lightning:datatable data="{! v.mydata }"
        columns="{! v.mycolumns }"
        keyField="id"
        onrowselection="{! c.getSelectedName }"/>-->
    <div aura:id="pageSpinner" class="slds-hide">
        <lightning:spinner alternativeText="Loading" size="large" />
    </div>
    
    <div>
        <table id="{!v.tableId}" class="table table-striped table-bordered" style="width:100%">
            <thead>
            	
                <tr>
                <aura:iteration items="{!v.headerFieldsNames}" indexVar="key" var="label" >
                <th>{!label}</th>
                </aura:iteration>
                </tr>
            </thead>
            <tbody>
                <aura:iteration items="{!v.processedRecords}" indexVar="key" var="record" >
                <tr>
                    <aura:iteration items="{!record.value}" indexVar="key" var="field" >
                    <aura:if isTrue="{!field.isId}" >
                        <td>
                            <p><lightning:formattedUrl value="{!field.value}" label="{!field.label}" target="_blank"/>
                            </p> 
                        </td>
                        <aura:set attribute="else">
                          <td>{!field.value}</td>
                        </aura:set>
                    </aura:if>                        
                    </aura:iteration>
                </tr>
                </aura:iteration>
            </tbody>
            <!--<tfoot>
                <tr>
                    <aura:iteration items="{!v.headerFieldsAPINames}" indexVar="key" var="label" >
                    <th>{!label}</th>
                    </aura:iteration>
                </tr>
            </tfoot>-->
        </table>
    </div>

    <!-- the container element determine the height of the datatable -->
    <!--<div style="height: 300px">
        <lightning:datatable
                keyField="id"
                data="{! v.data }"
                columns="{! v.columns }"
                hideCheckboxColumn="true"/>
    </div>-->
</aura:component>