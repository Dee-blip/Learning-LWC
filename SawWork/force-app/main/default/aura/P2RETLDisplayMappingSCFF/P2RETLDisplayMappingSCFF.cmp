<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" controller="P2RETL_Mapping_cls" access="global">
     
<!-- Start of attribute declaration -->    
    
    <!-- 1.Stores the field name considered for sorting-->
    <aura:attribute name="sortedBy" type="string" default="Name" />
    
    <!-- 2. Stores the Sorting order (Ascending/Descending)-->
    <aura:attribute name="sortedDirection" type="string" default="asc" />
    
    <!-- 3.Stores the Table with all the rows  -->
    <aura:attribute name="FinaltabledataWarehouse" type="Object"/>
    
    <!-- 4.Stores the Table after Search are applied .It is a subset of FinaltabledataWarehouse -->
    <aura:attribute name="Finaltabledata" type="Object"/>
    
    <!-- 5.Stores the headings of the Table displayed in the app -->
    <aura:attribute name="columns" type="List"/>
    
    <!-- 6.Stores the SFDC Object API Name and corresponding EDW Table Name -->
    <aura:attribute name="SelectedObjectAndTable" type="List" default="Salesforce,EDW"/>
    
    <!-- 7.Stores the SFDC Object Options List -->
    <aura:attribute name="SFDCObjectOptionList" type="List" default="[]"/>
    
    <!-- 8 to 13.Attribute Declarations For Pagination -->
    
	 <!-- 8.Stores the table data to be displayed in a particular page -->    
    <aura:attribute name="PaginationList" type="Object"/>
    <!-- 9. Stores the row index of Finaltabledata attribute to be shown as the first record in the page -->    
    <aura:attribute name="startPage" type="Integer" />
    
    <!-- 10. Stores the row index of the last record of the page w.r.t  Finaltabledata attribute -->
    <aura:attribute name="endPage" type="Integer" />
    
    <!-- 11. Stores the number of rows in Finaltabledata attribute -->
    <aura:attribute name="totalRecords" type="Integer" />
    
    <!-- 12. Stores the number of rows in each page -->
    <aura:attribute name="pageSize" type="Integer" default="10"/>
    
    <!-- 13. Stores the options for page size drop down -->
    <aura:attribute name="sizeOptions" type="List" default="[]"/>
    
    <!-- 14. Stores the current page number -->
    <aura:attribute name="index" type="Integer" />
    
    <!-- 15 & 16. Attribute Declration For Suggestion Box -->
    
    <!-- 15. Stores the dropdown list values for the Suggestion Box -->
    <aura:attribute name="results" type="List" />
    
    <!-- 16. Stores the search text entered by the user in the Suggestion Box -->
    <aura:attribute name="searchQuery" type="String" default="" />
   
    <!-- 17 - 20. Attribute Declration For the 4 field search boxes  -->
    
    <!-- 17. Stores the search text entered by the user in the the search box 1-->
    <aura:attribute name="searchField1" type="String" default="" />
    
    <!-- 18. Stores the search text entered by the user in the the search box 2-->
    <aura:attribute name="searchField2" type="String" default="" />
    
    <!-- 19. Stores the search text entered by the user in the the search box 3-->
    <aura:attribute name="searchField3" type="String" default="" />
    
    <!-- 20. Stores the search text entered by the user in the the search box 4-->
    <aura:attribute name="searchField4" type="String" default="" />
    
<!-- End of attribute declaration -->   
    
<!-- Calling init method for initialization of the attributes needed-->   
    <aura:handler name="init" value="{! this }" action="{! c.init }"/>
    
    
<!--The first grid starts here (grid with suggestion box and dashboard) --> 
    
    <div class="slds-grid " style="border: 0px;box-shadow:0 5px 10px #999;background:#FCFCFC;height:140px;margin:10px;margin-bottom:15px;border-radius: 0.25rem;background-clip: padding-box;">
        <!-- SFDC Object Picklist starts here-->
        <div class="slds-col slds-size_4-of-12" align="left" style="padding:20px;padding-left:10px;" > 
            <div style="box-shadow: 0 5px 10px #888; width:300px;border-radius:.25rem;">
                <ui:inputText value="{!v.searchQuery}" keyup="{!c.performSearch}" updateOn="keyup"
                              class=" objectSearch slds-lookup__search-input slds-input " 
                              placeholder="Enter object..." 
                              />
                <ul style="width: 300px;position:unset"  class="slds-listbox slds-listbox--vertical slds-dropdown slds-dropdown--fluid slds-dropdown--length-5 slds-dropdown--left" >
                    <aura:iteration items="{!v.results}" var="result">
                        <li role="presentation" onclick="{!c.onSelectChangeObject}" class="slds-listbox__item" 
                            data-name="{!result}">
                            <span class="slds-lookup__item-action slds-media" id="lookup-option-475"
                                  role="option">
                                <div class="slds-media__body">
                                    <div class="slds-lookup__result-text">{!result}</div>
                                </div>
                            </span>
                        </li>
                    </aura:iteration>
                </ul>
            </div>
        </div>
        <!-- SFDC Object Picklist ends here-->
        
        <!-- Board starts here -->
        <div class="slds-col slds-size_8-of-12" style="padding:20px;" >
            <div align="right">
                <div >
                    <div style="height:92px;width:500px; background-color:#54698d;border-radius:15px;box-shadow: 0 5px 10px #333" >
                        <div style="border-radius:15px;"> 
                            <h1 style="padding-top:5px;padding-left:25px;" align="left"> Object &nbsp;: {!v.SelectedObjectAndTable[0]} </h1>
                            <h1 style="padding-top:5px;padding-left:25px;" align="left"> Table &nbsp;&nbsp;&nbsp;&nbsp;: {!v.SelectedObjectAndTable[1]} </h1>
                            <h1  style="padding-top:5px;padding-bottom:5px;padding-left:25px;" align="left"> Fields &nbsp;&nbsp;&nbsp;: {!v.totalRecords} </h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Board ends here -->
    </div>
<!-- The first grid ends here ( grid with suggestion box and dashboard)--> 
    
<!-- The second grid starts here ( grid with size drop down, table headings  and download button)--> 
    <div class="slds-grid " style="background:#FCFCFC;height:70px;margin-left:10px;margin-right:10px;margin-top:10px;margin-bottom:0px;padding-top:0px;border: 0px solid #dddbda;border-radius: 0.25rem;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;border-bottom:0px;background-clip: padding-box;box-shadow:0 10px 10px #999;">
        <!-- Size dropdown starts here -->
        <div class="slds-col slds-size_3-of-12" align="center" valign="bottom"  style="padding-right:10px;padding-left:10px;" >
            <div align="left"  style="padding-right:180px;height:70px;padding-top:10px;">
                <lightning:combobox aura:id="selectsize" placeholder="size"
                                    value="10"
                                    onchange="{!c.onSelectChangeSize}"
                                    options="{!v.sizeOptions}"
                                    />           
                
            </div> 
        </div>
        <!-- Size dropdown ends here -->
        
        <!-- Table heading starts here -->
        <div class="slds-col slds-size_6-of-12" align="center"  style="padding-right:10px;padding-left:10px;" >
            <div   style="height:70px;">
                <h5 class="objectTitle" align="center">{!v.SelectedObjectAndTable[0]} --> {!v.SelectedObjectAndTable[1]}</h5> 
            </div>
        </div>
        <!-- Table heading ends here -->
        
        
        <!-- Download button starts here -->
        <div class="slds-col slds-size_3-of-12" align="center" style="padding-right:10px;padding-left:10px;"  >
            <div  align="right" style="height:70px;padding-top:5px;padding-right:20px;" >
                <lightning:buttonIcon iconName="utility:download" alternativeText="Download" class="slds-icon_container slds-icon_container--circle DownloadButton" onclick="{!c.downloadCsv}"/>
            </div>
        </div>
        <!-- Download button ends here -->
    </div>
<!-- The second grid ends here ( grid with size drop down, table headings  and download button)-->
    
<!-- The third grid starts here (4 field searches)-->
    <div class="slds-grid " style="background:#FCFCFC;height:50px;margin-left:10px;margin-right:10px;margin-bottom:0px;padding-top:0px;border: 0px solid #dddbda;border-radius: 0px;border-bottom:0px;box-shadow:0px 10px 10px #999">
        
        <!-- Search field 1 starts here -->
        <div class="slds-col slds-size_3-of-12" align="center" valign="bottom"  style="padding-right:10px;padding-left:10px;" >
            <div style="box-shadow: 0 5px 10px #888;border-radius:.25rem;">
                <ui:inputText value="{!v.searchField1}" keyup="{!c.performSearchField}" updateOn="keyup"
                              class=" column_search slds-lookup__search-input slds-input " 
                              placeholder="{!'Search ' + v.SelectedObjectAndTable[0] + ' fields'}" 
                              />
            </div>
        </div>
        <!-- Search field 1 ends here -->
        
        <!-- Search field 2 starts here -->
        <div class="slds-col slds-size_3-of-12" align="center"  style="padding-right:10px;padding-left:10px;" >
            <div style="box-shadow: 0 5px 10px #888;border-radius:.25rem;">
                <ui:inputText value="{!v.searchField2}" keyup="{!c.performSearchField}" updateOn="keyup"
                              class="column_search slds-lookup__search-input slds-input " 
                              placeholder="{!'Search ' + v.SelectedObjectAndTable[0] + ' data types'}" 
                              />
            </div>
        </div>
        <!-- Search field 2 ends here -->
        
        <!-- Search field 3 starts here -->
        <div class="slds-col slds-size_3-of-12" align="center"  style="padding-right:10px;padding-left:10px;" >
            <div style="box-shadow: 0 5px 10px #888; border-radius:.25rem;">
                <ui:inputText value="{!v.searchField3}" keyup="{!c.performSearchField}" updateOn="keyup"
                              class="column_search slds-lookup__search-input slds-input " 
                              placeholder="{!'Search ' + v.SelectedObjectAndTable[1] + ' columns'}"
                              />
            </div>
        </div>
        <!-- Search field 3 ends here -->
        
        <!-- Search field 4 starts here -->
        <div class="slds-col slds-size_3-of-12" align="center" style="padding-right:10px;padding-left:10px;"  >
            <div style="box-shadow: 0 5px 10px #888; border-radius:.25rem;">
                <ui:inputText value="{!v.searchField4}" keyup="{!c.performSearchField}" updateOn="keyup"
                              class="column_search slds-lookup__search-input slds-input " 
                              placeholder="{!'Search ' + v.SelectedObjectAndTable[1] + ' data types'}" 
                              />
            </div>
        </div>
        <!-- Search field 4 ends here -->
    </div>
<!-- The third grid ends here (4 field searches)-->
    
    
<!-- Table starts here-->
    <div style="margin-left:10px;margin-right:10px;margin-top:0px;box-shadow:0px 10px 10px #999">
        <ui:scrollerWrapper class="scrollerSize" >
            <div class="slds-scrollable slds-float_left" style="height:388px;">
                <lightning:datatable data="{! v.PaginationList }" class="slds-table slds-table--bordered slds-table--striped "
                                     columns="{! v.columns }" 
                                     keyField="id"
                                     onsort="{!c.updateColumnSorting}" 
                                     sortedBy="{!v.sortedBy}" 
                                     sortedDirection="{!v.sortedDirection}"
                                     hideCheckboxColumn="true"
                                     resizeColumnDisabled="true"
                                     />
            </div>
        </ui:scrollerWrapper>
    </div>
<!-- Table ends here-->
    
    
<!-- The fourth grid starts here (previous button,page detail display,next button)-->
    <div class="slds-grid " style="background:#FCFCFC;height:60px;margin-left:10px;margin-right:10px;margin-top:0px;margin-bottom:0px;padding-top:10px;border:0px solid #dddbda;border-radius: 0.25rem;border-top-right-radius: 0px;border-top-left-radius: 0px;border-top:0px;background-clip: padding-box;box-shadow:0 10px 10px #999;">            
        <div class="slds-col slds-size_4-of-12">
            
        </div>
        <!-- Pagination previous button starts here -->
        <div class="slds-col slds-size_1-of-12" align="right">
            <lightning:buttonIcon iconName="utility:chevronleft" alternativeText="Previous" disabled="{!v.startPage == 0}" 
                                  class="Next_and_Previous_Button" onclick="{!c.previous}"/>
        </div>
        <!-- Pagination previous button ends here -->
        
        <!-- Pagination page number display starts here -->
        <div class="slds-col slds-size_1-of-12" align="center">
            <p style="font-size: 16px;color: #005fb2;font-weight:bold;padding-top:5px;" >{!v.index||1||((v.endPage+1)/v.pageSize)}
                /
                {!((v.totalRecords - v.totalRecords%v.pageSize)/v.pageSize + 1)||1}</p>
            
        </div>
        <!-- Pagination page number display ends here -->
        
        <!-- Pagination next starts here-->
        <div class="slds-col slds-size_1-of-12" align="left">
            <lightning:buttonIcon iconName="utility:chevronright" alternativeText="Next" disabled="{!v.endPage >= v.totalRecords}" 
                                  class="Next_and_Previous_Button" onclick="{!c.next}"/>
        </div>
        <!-- Pagination next ends here-->
        
        <div class="slds-col slds-size_4-of-12" >
        </div>
    </div>
<!-- The fourth grid ends here (previous button,page detail display,next button)-->
    
</aura:component>