<aura:component controller="CommunityBlogCtrl" implements="flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:themeLayout,forceCommunity:availableForAllPageTypes" access="global">
   
    <aura:attribute name="blogList" type="Knowledge__kav[]"/>
    <aura:attribute name="blogListTopicId" type="String" access="global"/>
    <aura:attribute name="listName" type="String" access="global"/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:attribute name="pageNumber" type="String" default="1" />
    <aura:attribute name="currentPagesCount" type="String" default="10" />
    <aura:attribute name="currentPageNumber" type="String"/>
    <aura:attribute name="pageCounterInfo" type="PGN_PageInfo"/>
    <aura:attribute name="showNoRows" type="boolean" default="false"/>
    <aura:attribute name="showTable" type="boolean" default="false"/>
    <aura:attribute name="showSearch" type="boolean" default="false"/>
    <aura:attribute name="searchKeyword" type="String"/>
    <aura:attribute name="totalBlogs" type="Integer"/>
    <aura:handler event="c:CommunityBlogPageChangeEvt" action="{!c.pageChange}" />
   
    <div class="slds-page-header" style="height:46px;padding-top:6px;display:inline-flex;width:100%;background-color: #F2F2F2;font-family: Ubuntu;" role="banner">
        <div style="width: 85%;padding-top: 7px;">
               <b><p style="color:#000000;" class="slds-text-heading_label">{!v.listName}&nbsp;({!v.totalBlogs})</p></b>
        </div>
        <aura:if isTrue="{!v.showSearch}">
            <div style="float: left;width: 300px; margin-top: -1px;">
                <ui:inputText aura:id="searchId" class="slds-input" value="{!v.searchKeyword}" required="true" placeholder="{!$Label.c.Jarvis_CommunityBlogList_SearchPlaceholderText}" keyup="{!c.searchBlogsEnt}"/>
                <lightning:buttonIcon class="searchBtnCls" iconName="utility:search" onclick="{!c.searchBlogs}" />
                <!--placeholder="Search here..."-->
                <!--<form class="slds-form-inline">
                    <div class="slds-form-element">
                       <label class="slds-form-element__label" for="search"></label>//form-element
                       <div class="slds-form-element__control" onKeyUp="{!c.search}">
                           <ui:inputText aura:id="searchId1" class="slds-input" value="{!v.searchKeyword}" required="true" placeholder="Search here..."/>
                        </div>
                    </div> 
					<div class="slds-form-element">
                		<button id="searchBlogId" type="button" onclick="{!c.searchBlogs}" class="slds-button slds-buttonbrand">Search</button>
            		</div>
                </form>-->
            </div>
            
            <div style="float: right;width: 15%;">
                <div class="slds-form slds-form_horizontal">
                    <lightning:select name="selectItem" aura:id="selectItem" label="{!$Label.c.Jarvis_CommunityBlogList_RecordsPicklistLabel}" variant="label-hidden" onchange="{!c.changeRecordNumber}">
                        <option value="10">10</option>
                        <option value="15">15</option>
                        <option value="20">20</option>
                    </lightning:select>
                </div>
            </div> 
        </aura:if>
    </div>
    <aura:if isTrue="{!v.showNoRows}">
        <p style="padding:14px;">{!$Label.c.Jarvis_CommunityBlogList_NoBlogsText}<!--No Community Blog articles were found.--></p>
    </aura:if>
    <aura:if isTrue="{!v.showTable}">
        <div style="margin-left:20px;">
            <aura:iteration items="{!v.blogList}" var="blog">
                    <div class="slds-truncate" style="font-size: 1rem;margin-top: 10px;" title="{!blog.Title}"><a href="{!'/customers/s/article/'+blog.UrlName}">{!blog.Title}</a></div>
                    <div class="slds-truncate" style="margin-top: 5px;color: #696969;font-size: .75rem; border-bottom: 1px solid #d4d4d4;padding-bottom: 9px;" title="{!blog.Community_Blog_AKAM_Created_By__r.Name}">{!blog.Community_Blog_AKAM_Created_By__r.Name}&nbsp;&nbsp;|&nbsp;&nbsp;{!blog.Community_Blog_AKAM_Created_Date__c}</div>
            </aura:iteration>
        </div>
        <div class="slds-global-header slds-grid slds-grid_align-spread" style="height:46px;background-color: #ffffff;font-family: Ubuntu; margin:8px 0px 8px 0px;">
            <div class="slds-global-header__item">
                <legend class="slds-form-element__label slds-text-title_caps" style="color:#000000;">{!v.pageCounterInfo.currentPageNumber} / {!v.pageCounterInfo.totalPages}</legend>
            </div>
            <div class="slds-button-group" role="group"  style="margin-right:6px;">
                <!--<lightning:buttonIcon iconName="utility:left" disabled="{!v.pageCounterInfo.currentPageNumber == 1}" variant="border" alternativeText="Previous Page" iconClass="dark" onclick="{!c.goPreviousPage}" />-->
                <lightning:buttonIcon iconName="utility:left" variant="border" alternativeText="{!$Label.c.Jarvis_CommunityBlogList_FirstPageAltText}" onclick="{!c.goPreviousPage}" />
                <aura:iteration items="{!v.pageCounterInfo.pageCounter}" var="pgn">
                    <c:CommunityBlogPageCount pageNumber="{!pgn}" currentPageNumber="{!v.pageCounterInfo.currentPageNumber}" currnetPagesCount="{!v.currnetPagesCount}" />
                    <!--<lightning:button variant="{!v.pageNumber == v.currentPageNumber ? 'brand' : 'neutral' }" label="{!pgn}" onclick="{!c.openthePage}" />-->
                </aura:iteration>
                <lightning:buttonIcon iconName="utility:right" variant="border" alternativeText="{!$Label.c.Jarvis_CommunityBlogList_LastPageAltText}" onclick="{!c.goNextPage}"/>
                <!--<lightning:buttonIcon iconName="utility:right" variant="border" alternativeText="Next Page" iconClass="dark" onclick="{!c.goNextPage}" disabled="{!v.pageCounterInfo.currentPageNumber == v.pageCounterInfo.totalPages}" />-->
            </div>
        </div>
    </aura:if>
</aura:component>