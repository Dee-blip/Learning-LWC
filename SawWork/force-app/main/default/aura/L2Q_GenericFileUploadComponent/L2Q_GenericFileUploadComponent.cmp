<!--SFDC-6363-->
<aura:component
    implements="flexipage:availableForAllPageTypes,lightning:actionOverride,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:appHostable,force:lightningQuickAction"
    access="global" controller="NotesAndAttachmentVfCompCntrl">
    <aura:attribute name="recordId" type="String" />
    <aura:attribute name="listOfAttachedFiles" type="List" />
    <aura:attribute name="fileDownloadUrl" type="String" />

    <aura:attribute name="hasErrors" type="Boolean" default="false" />
    <aura:attribute name="showFileSection" type="Boolean" default="false" />
    <aura:attribute name="errorMessage" type="String" />

    <aura:attribute name="noFileAttached" type="Boolean" default="false" />
    <aura:attribute name="showComponentOnLayout" type="Boolean" default="false" />

    <aura:handler name="init" value="{!this}" action="{!c.init}" />
    <aura:if isTrue="{! v.showComponentOnLayout }">
        <div class="slds-page-header genericFileComponent">
            <div class="">
                <div class="slds-grid slds-gutters">
                    <div class="slds-col slds-size_4-of-6" style="padding-top:10px;">
                        <lightning:buttonIcon iconName="utility:chevrondown" variant="container"
                            alternativeText="chevrondown" title="chevrondown" />
                        <span style="font:200%"><strong>Files</strong></span>
                    </div>
                    <div class="slds-col slds-size_2-of-6" style="padding-top:-10px;">
                        <lightning:fileUpload label="" name="fileUploader" multiple="true" recordId="{!v.recordId}"
                            onuploadfinished="{!c.handleUploadFinished}" />
                    </div>
                </div>
            </div>
        </div>
        <c:SF1_CustomLoader />
        <div style="padding:10px">
            <div class="slds-form-element">
                <div class="slds-form-element__control">

                </div>
            </div>
            <br />
            <aura:if isTrue="{! v.hasErrors }">
                <ui:message title="" severity="error" closable="false">
                    <strong>
                        ERROR:
                    </strong>
                    <br />
                    <ui:outputRichText class="slds-text-longform" value="{! v.errorMessage }" />
                </ui:message>

                <aura:set attribute="else">
                    <aura:if isTrue="{! !v.noFileAttached }">
                        <div id="scrollableDiv " class="slds-scrollable_y" style="height: 17vh;">
                            <div class="slds-border_top">
                                <lightning:layout horizontalAlign="spread" multipleRows="true">
                                    <lightning:layoutItem flexibility="grow" size="12" mediumDeviceSize="12"
                                        largeDeviceSize="12">
                                        <div class="slds-border_bottom" style="padding:5px;">
                                            <div class="slds-grid slds-gutters">
                                                <div class="slds-col slds-size_1-of-6">
                                                    Action
                                                </div>
                                                <div class="slds-col slds-size_3-of-6">
                                                    Title
                                                </div>
                                                <div class="slds-col slds-size_1-of-6">
                                                    Last Modified
                                                </div>
                                                <div class="slds-col slds-size_1-of-6">
                                                    Created By
                                                </div>
                                            </div>
                                        </div>
                                    </lightning:layoutItem>
                                    <aura:iteration items="{!v.listOfAttachedFiles}" indexVar="SectionIndex"
                                        var="eachFile">
                                        <lightning:layoutItem flexibility="grow" size="12" mediumDeviceSize="12"
                                            largeDeviceSize="12">
                                            <div class="slds-border_bottom" style="padding:5px;">
                                                <div class="slds-grid slds-gutters">
                                                    <div class="slds-col slds-size_1-of-6">
                                                        <lightning:formattedUrl
                                                            value="{! v.fileDownloadUrl + eachFile.ContentDocument.LatestPublishedVersionId }"
                                                            target="" title="Download" label="Download" />
                                                    </div>
                                                    <div class="slds-col slds-size_3-of-6">
                                                        <ui:outputText
                                                            title="{! eachFile.ContentDocument.LatestPublishedVersion.Title }"
                                                            value="{! eachFile.ContentDocument.LatestPublishedVersion.Title }" />
                                                    </div>
                                                    <div class="slds-col slds-size_1-of-6">
                                                        <lightning:formattedDateTime
                                                            value="{! eachFile.ContentDocument.ContentModifiedDate }"
                                                            year="numeric" month="numeric" day="numeric" hour="2-digit"
                                                            minute="2-digit" hour12="true" />
                                                    </div>
                                                    <div class="slds-col slds-size_1-of-6">
                                                        {!
                                                        eachFile.ContentDocument.LatestPublishedVersion.ContentModifiedBy.Name
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </lightning:layoutItem>
                                    </aura:iteration>
                                </lightning:layout>
                            </div>
                        </div>
                        <aura:set attribute="else">
                            <div class="slds-border_top">
                                <i>No Files to Display</i>
                            </div>
                        </aura:set>
                    </aura:if>
                </aura:set>
            </aura:if>
        </div>
    </aura:if>
</aura:component>