<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,force:hasRecordId" access="global" controller="HD_IncidentDetailController">
    <aura:registerEvent name="HDLogger" type="c:HDLogger"/>
	<ltng:require scripts="{!$Resource.HD_Error_Logger}" /> 
    <aura:handler name="init" action="{!c.doInit}" value="{!this}" />
    <aura:attribute name="incidents" type="BMCServiceDesk__Incident__c[]" />
    <aura:attribute name="selected" type="List" access="global"/>
    <aura:attribute name="recordId" type="Id" default="{!recordId}" />
             
            <div class="slds-page-header slds-page-header--object-home">
                
                <div class="slds-grid">
               
                    <div class="slds-col slds-no-flex slds-grid slds-align-bottom">
                        
                        <div class="slds-global-header__item slds-global-header__item--search">
                            <div class="slds-form-element slds-lookup">
                                <ui:inputText aura:id="searchInput" class="slds-input slds-lookup__search-input" placeholder="Search"/>
                            </div>
                        </div>
                        <button class="slds-button slds-m-left--xx-small slds-button--icon-border" aria-haspopup="true" title="Search Records" onclick = "{!c.onSearch}">
                            <lightning:buttonIcon iconName="utility:search"  alternativeText="Search Records"  />
                            <span class="slds-assistive-text">Search Records</span>
                        </button>
                        <button class="slds-button slds-m-left--xx-small slds-button--icon-border" aria-haspopup="true" title="Clear Input" onclick = "{!c.doInit}">
                            <lightning:buttonIcon iconName="utility:undo"  alternativeText="Clear Input"  />
                            <span class="slds-assistive-text">Clear input</span>
                        </button>
                        
                        
                        
                        <button class="slds-button slds-m-left--large slds-button--icon-border" title="Refresh" onclick="{!c.doInit}">
                            <lightning:buttonIcon iconName="utility:refresh" alternativeText="Refresh"  />
                            <span class="slds-assistive-text">Refresh</span>
                        </button>
                        
                        
                    </div>
                </div>
                
            </div>
            
                
                <table class="slds-table slds-table--bordered slds-table--striped">
                    <thead>
                        <tr class="slds-text-heading--label slds-line-height--reset">
                            
                            <th class=" slds-text-title--caps" scope="col" style="width:1.25rem;">
                                <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" tabindex="0">
                                    <span class="slds-truncate" title="Name"></span>
                                </a>
                                
                                
                            </th>
                            <th class=" slds-text-title--caps" scope="col" style="width:2rem;">
                                <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" tabindex="0">
                                    <span class="slds-truncate" title="Name">Number</span>
                                </a>
                               
                                
                            </th>
                            
                            <th class=" slds-text-title--caps" scope="col" style="width:2rem;">
                                <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" tabindex="0">
                                    <span class="slds-truncate" title="Name">Status</span>
                                </a>
                                
                                
                            </th>
                            <th class=" slds-text-title--caps" scope="col" style="width:2rem;">
                                <a href="javascript:void(0);" class="slds-th__action slds-text-link--reset" tabindex="0">
                                    <span class="slds-truncate" title="Name">Client Name</span>
                                </a>
                                
                                
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        
                        
                        <aura:iteration items="{!v.incidents}" var="incident" indexVar="idx">
                            <tr data-id="{!incident.Id}"  data-record="{!idx}">
                                <td role="gridcell" class="slds-text-align--left" style="width:1.25rem;"  data-id="{!incident.Id}">
                                    <input type="checkbox" data-id="{!incident.Id}" onclick = "{!c.selectRecord}"/> 
                                    
                                </td> 
                                <td><div class="slds-truncate"  title="{!incident.Name}"><a class = "custom-anchor" data-id="{!incident.Id}"  target="_blank" href="{!'/lightning/r/BMCServiceDesk__Incident__c/'+ incident.Id + '/view'}" >{!incident.Name}</a></div></td> 
                                <td><div class="slds-truncate"  title="{!incident.BMCServiceDesk__Status_ID__c }">{!incident.BMCServiceDesk__Status_ID__c }</div></td>
                                <td><div class="slds-truncate"  title="{!incident.BMCServiceDesk__Client_Name__c   }">{!incident.BMCServiceDesk__Client_Name__c   }</div></td>
                                
                                
                            </tr>
                        </aura:iteration>
                        
                        
                    </tbody>
                </table>

                <div class="slds-button-group" role="group">
                    <button class="slds-button slds-button--neutral" onclick = "{!c.linkTickets}">Link</button>
                </div>
    
</aura:component>