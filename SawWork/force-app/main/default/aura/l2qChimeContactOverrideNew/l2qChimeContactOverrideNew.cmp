<!--
  @description       : This component overrides new action on Chime_Contact object
  @author            : apyati
  @team              : GSM
  @last modified on  : 02-24-2022
  @last modified by  : apyati
  Modifications Log
  Ver   Date         Author   Modification
  1.0   09-14-2021   apyati   Created for SFDC-8655 
  2.0   24-02-2022   apyati   Added onchange function on chime access field for SFDC-9409

-->
<aura:component
    implements="flexipage:availableForRecordHome,force:hasRecordId,lightning:actionOverride,lightning:hasPageReference">
    <aura:attribute name="pageReference" type="Object" />
    <lightning:navigation aura:id="navService" />
    <aura:attribute name="fields" type="String[]" default="['Name','CHIME__c','Contact__c', 'Chime_access__c']" />
    <aura:attribute name="chimeId" type="Id" default="" />
    <aura:attribute name="contactId" type="Id" default="" />
    <aura:attribute name="showSpinner" type="boolean" default="false" />
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <aura:handler name="render" value="{!this}" action="{!c.doInit}" />

    <aura:html tag="style">
        .slds-modal__container{
        max-width: 100% !important;
        width:60% !important;
        transform: none !important;
        }
        .cuf-content {
        padding: 0 0rem !important;
        }
        .slds-p-around--medium {
        padding: 0rem !important;
        }
        .slds-modal__content{
        overflow-y:hidden !important;
        height:unset !important;
        max-height:unset !important;
        }
    </aura:html>

    <div aura:id="newDialog" role="dialog" tabindex="-1" aria-labelledby="header43"
        class="slds-modal slds-fade-in-open">

        <aura:if isTrue="{!v.showSpinner }">
            <div aura:id="spinnerId" class="slds-spinner_container">
                <div class="slds-spinner--brand  slds-spinner slds-spinner--large slds-is-relative" role="alert">
                    <span class="slds-assistive-text">Loading</span>
                    <div class="slds-spinner__dot-a"></div>
                    <div class="slds-spinner__dot-b"></div>
                </div>
            </div>
        </aura:if>

        <div class="slds-modal__container">
            <div class="slds-modal__header">
                <h2 class="slds-text-heading--medium">New Record</h2>
            </div>
            <lightning:recordEditForm aura:id="myRecordForm" objectApiName="CHIME_Contact__c"
                onsubmit="{!c.handleSubmit}" onsuccess="{!c.handleSuccess}" onerror="{!c.handleError}">
                <div class="slds-modal__content slds-var-p-around_medium slds-grid slds-wrap ">
                    <lightning:messages />
                    <lightning:inputField aura:id="chimeField" fieldName="CHIME__c" value="{!v.chimeId}" disabled="true"
                        class="slds-col slds-size_1-of-2 slds-var-p-horizontal_x-small" />
                    <lightning:inputField aura:id="contactField" fieldName="Contact__c" disabled="true"
                        value="{!v.contactId}" class="slds-col slds-size_1-of-2 slds-var-p-horizontal_x-small" />
                    <lightning:inputField aura:id="accessField" fieldName="Chime_access__c"
                        onchange="{!c.onChimeAccessChange}"
                        class="slds-col slds-size_1-of-2 slds-var-p-horizontal_x-small" />
                </div>
                <div class="slds-modal__footer slds-align_absolute-center">
                    <lightning:button class="slds-var-m-top_small" type="submit" label="Add Contact" />
                    <lightning:button class="slds-var-m-top_small" label="Cancel" onclick="{!c.handleSuccess}" />
                </div>
            </lightning:recordEditForm>
        </div>
    </div>


</aura:component>