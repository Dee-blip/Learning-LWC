<!--=====================================================================================================+
    Component name      :   SC_CaseProductSelector 
    Author              :   Pinkesh
    Created             :   20-Jan-19
    Purpose             :   This component is created to select case product on the case as a part of Akatec Lightning Migration
                            
    Last Modified Developer           Purpose            
    ============= ========================  =======
	13-Aug-19		Sumukh SS		Added support to render component as a child component
+=====================================================================================================-->
<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" controller="SC_Case_LightningUtility" access="global">
    <!-- to check if any case product is available -->
    <aura:attribute name="haveProducts" type="boolean" default="true"/>
    
    <!-- for loading spinner -->
    <aura:attribute name="Spinner" type="boolean" default="false"/>
    
    <!-- for the picklist values -->
    <aura:attribute name="options" type="List" />
    <aura:attribute name="selectedValue" type="String" />
    <!-- for storing values when called as a child component from a parent lightning component -->
    <aura:attribute name="CaseRecID" type="String"/>
    <aura:attribute name="isChildComponent" type="String" default="false"/>

    
    <!-- init method -->
    <aura:handler name="init" value="{!this}" action="{!c.init}" />
    
    <!-- to refresh the component if an update happens on case -->
    <aura:handler event="force:refreshView" action="{!c.init}"/>
    
    <!-- Spinner which gets invoked based on event -->
    <aura:if isTrue="{!v.Spinner}">
        <div aura:id="spinnerId" class="slds-spinner_container">
            <div class="slds-spinner--brand  slds-spinner slds-spinner--large slds-is-relative" role="alert">
                <span class="slds-assistive-text">Loading</span>
                <div class="slds-spinner__dot-a"></div>
                <div class="slds-spinner__dot-b"></div>
            </div>
        </div>
    </aura:if>
    
    <aura:if isTrue="{!v.haveProducts}">
        <div align="left" class="slds-box slds-theme_default">
            <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_3-of-4">
                    <lightning:select name="caseProductId" label="Case Product:" aura:id="caseProductId" value="{!v.selectedValue}">
                        <aura:iteration items="{!v.options}" var="option">
                            <option text="{!option.label}" value="{!option.id}" selected="{!option.selected}"/>
                        </aura:iteration>
                    </lightning:select>
                </div>
                <div class="slds-col slds-size_1-of-4" style="margin-top: 1.5rem;">
                    <lightning:button variant="Neutral" label="Save" title="Save" onclick="{!c.saveCaseProduct}"/>
                </div>
            </div>
        </div>
        <aura:set attribute="else">
            <div class="slds-box slds-theme_default slds-text-heading_small slds-text-align_center slds-text-color_error">No Case Products available!</div>
        </aura:set>
    </aura:if>
</aura:component>