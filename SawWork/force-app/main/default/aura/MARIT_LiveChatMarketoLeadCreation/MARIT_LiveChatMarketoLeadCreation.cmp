<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,force:hasRecordId" access="global" controller="MARIT_CreateOrLinkToLiveChatController">
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:attribute name="livechatId" type="Id" />

    <aura:attribute name="newLead" type="Lead" default="{'sobjectType': 'Lead'}"/>
    <aura:attribute name="showError" type="Boolean" default="false" />
    <aura:attribute name="isLoad" type="Boolean" default="false" />
    <aura:attribute name="errorMessage" type="String" default=""/>
    
    <aura:attribute name="parent" type="Aura.Component"/>
   
    <aura:if isTrue="{!v.showError}">
        <!-- Show the message to ui -->
        <ui:message title="Error" severity="error" closable="false">
            <div>
                <span class="slds-assistive-text">error</span>
                <div class="slds-notify__content">
                    <p class="">{!v.errorMessage}</p>
                    <lightning:button class="slds-m-top_small"
                                      onclick="{!c.closeError}" label="Close" />
                </div>
            </div>
        </ui:message> 
    </aura:if>
    <aura:if isTrue="{!v.isLoad}">
        Creating Marketo Lead...
        <div class="slds-align_absolute-center" style="height: 2rem;">
            
            <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_inline">
                <span class="slds-assistive-text">Loading</span>
                <div class="slds-spinner__dot-a"></div>
                <div class="slds-spinner__dot-b"></div>
            </div>
        </div>
    </aura:if>
    <lightning:recordEditForm aura:id="recordEditForm" objectApiName="Lead">
        <div class="slds-box">
            <div class="slds-media">
                <div class="slds-media__figure">
                    <lightning:icon iconName="standard:lead" size="x-small" alternativeText="lead" />
                </div>
                <div class="slds-media__body">
                    <!--<h3 class="slds-text-heading_small slds-align-middle slds-truncate" title="Create person lead">Create Person Lead</h3>-->
                    Create Person Lead
                    <br/> <br/>
                </div>
            </div>
            <!-- In the future releases we can try and add a custom metadata and repeat over the field names rather than creating each input field.
				This will save us code changes if there is any deletion/addition of new field in the form-->
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="FirstName" required = "true" value ="{!v.newLead.FirstName}"/>
            </div>
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="LastName" required = "true" value ="{!v.newLead.LastName}"/>
            </div>
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="Company" required = "true" value ="{!v.newLead.Company}"/>
            </div>
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="Phone" required = "true" value ="{!v.newLead.Phone}"/>
                <lightning:inputField fieldName="Phone_Custom__c" required = "true" value ="{!v.newLead.Phone}"/>
            </div>
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="Email" required = "true" value ="{!v.newLead.Email}"/>
            </div>
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="Country" required = "true" value ="{!v.newLead.Country}"/>
            </div>
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="State" required = "true" value ="{!v.newLead.State}"/>
            </div> 
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="Title" value ="{!v.newLead.Title}"/>
            </div>
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="Associated_Account__c" value ="{!v.newLead.Associated_Account__c}"/>
            </div> 
            <!--<div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="Person_Lead_Source__c" value ="{!v.newLead.Person_Lead_Source__c}"/>
            </div>
            <div class="slds-grid slds-gutters">
                <lightning:inputField fieldName="Lead_Owner__c" value ="{!v.newLead.Lead_Owner__c}"/>
            </div>-->
        </div>
        
        <lightning:button class="slds-m-top_small"
                          onclick="{!c.SaveNewMarketoLead}" label="Save" />
        
        <lightning:button class="slds-m-top_small"  
                          onclick="{!c.CancelMarketoLeadCreation}" variant="brand"  label="Cancel" />
    </lightning:recordEditForm>
</aura:component>