<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,force:hasRecordId,force:lightningQuickAction" 
                access="global" 
                controller="MARIT_CSAT_FollowUp_Dialog_Controller">
    <aura:attribute name="setActualCompletionDate" type="Boolean" default=""/>
    <aura:attribute name="dateField" type="String" default="Follow_Up_Complete_Date__c"/>
    <aura:attribute name="isLoad" type="Boolean" default="false" />
    <aura:attribute name="fieldsFollowUp" type="List" default=""/>  
    <aura:attribute name="newCSATSurvey" type="CSAT_Survey_Response__c" default="{'sobjectType': 'CSAT_Survey_Response__c'}"/>
    <aura:attribute name="Datetime" type="string" />
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:if isTrue="{!v.isLoad}">
        <div class="slds-align_absolute-center" style="height: 2rem;margin-top: 10px">
            
            <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_inline">
                <span class="slds-assistive-text">Loading</span>
                <div class="slds-spinner__dot-a"></div>
                <div class="slds-spinner__dot-b"></div>
            </div>
        </div>
    </aura:if>
    <lightning:recordEditForm aura:id="followUpForm" recordId="{!v.recordId}" objectApiName="CSAT_Survey_Response__c"
                              onsubmit="{!c.handleSubmit}" 
                              onsuccess="{!c.handleOnSuccess}"
                              onerror="{!c.handleError}">
       <aura:iteration items="{!v.fieldsFollowUp}" var="field">
           <aura:if isTrue="{!v.dateField == field.Name}">
               <lightning:inputField fieldName="{!field.Name}" required ="true" value="{!v.Datetime}"/>
               <aura:set attribute="else">
                   <aura:if isTrue="{!field.Required == 'false'}">
                       <aura:if isTrue="{!field.Name == 'Case_Record_Type__c'}">
                           <lightning:inputField style="display:none;" fieldName="{!field.Name}" disabled ="true"/>
                           <aura:set attribute="else">
                              <lightning:inputField fieldName="{!field.Name}" required ="false"/>
                           </aura:set>
                       </aura:if>    
                       <aura:set attribute="else">
                           <lightning:inputField fieldName="{!field.Name}" required ="true"/>
                       </aura:set>
                       </aura:if>
               </aura:set>
           </aura:if>
        </aura:iteration>
        <div class="modal-footer slds-modal__footer attach-to-bottom" style="display:block !important;">
            <lightning:button class="slds-m-top_small" variant="brand" type="Cancel" name="Cancel" label="Cancel" onclick="{!c.handleClose}"/>
            <lightning:button class="slds-m-top_small" variant="brand" type="submit" name="update" label="Save" />
        </div>    
    </lightning:recordEditForm>
    
    <aura:html tag="style">
    	.slds-modal__content {
            height: 90% !important;
            max-height: 90% !important;
        }
        
        .slds-modal__container {
            width: 65% !important;
            max-width: 65rem !important;
        }

        .modal-footer {
           display:none;
        }
	</aura:html>  
</aura:component>