<aura:component implements="flexipage:availableForRecordHome,force:hasRecordId" access="global" controller="BucherSuter_ACD_PageLayoutClass">
    <aura:attribute type="String" name="lob" default="default"/>
    <aura:attribute type="String" name="ani" default="default"/>
    <aura:attribute type="String" name="erc" default="default"/>
    <aura:attribute type="String" name="cti_object" default=""/>
    <aura:attribute type="String" name="cti_recordtype" default=""/>
    <aura:attribute type="String" name="method" default="default"/>
     <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:registerEvent name="vfEvent" type="c:SendDataToVFPage"/>
   <aura:attribute name="showSpinner" type="Boolean" default="true" />
    <aura:attribute name="ObjectName" type="String" default="Case" />
    <aura:attribute name="fields" type="List" default="[]" />
    <aura:attribute name="sections" type="List" default="[]" />
    <aura:attribute name="RecordTypeId" type="String" default="" />
    <aura:attribute name="RecordType" type="String" default="Billing" />
    <aura:attribute name="openSections" type="List" default="[]" />
  <aura:attribute name="defValues" type="String" default="" />

    <aura:attribute name="showMessageModal" type="Boolean" default="false" />
    <aura:attribute name="errorMessage" type="String" default="" />
    <hr/>

    <aura:html tag="style">
        .cuf-content {
        padding: 0 0rem !important;
        }
        .slds-p-around--medium {
        padding: 0rem !important;
        }
        .slds-modal__content{
        height:unset !important;
        max-height:unset !important;
        }
        lightning-helptext{
            display: none !important;
        }
        .slds-popover_tooltip {
            display: none !important;
        }
        
        #auraErrorMessage{
            display: none !important;
        }
        
    </aura:html>    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

    <aura:if isTrue="{!v.showSpinner}">
        <lightning:spinner />
    </aura:if>

    <aura:if isTrue="{!v.showMessageModal}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
          <div class="slds-modal__container">

            <header class="slds-modal__header slds-text-color_destructive" >
              <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" onclick="{! c.closeMessage}" title="Close">
                <lightning:icon iconName="utility:close" alternativeText="Close" title="Close" size="x-small"/>        
                <span class="slds-assistive-text">Close</span>
              </button>
              <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate" >{! v.errorMessage}</h2>  
            </header>
          </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>    
    </aura:if>
    <div class="slds-modal__header slds-size_1-of-1" >
        <aura:if isTrue="{!v.lob == 'Marketing'}">
            <h4 class="title slds-text-heading--medium">Create Person Record</h4>
            <aura:set attribute="else">    
                <h4 class="title slds-text-heading--medium">Create {!v.lob} Record</h4>
            </aura:set>
        </aura:if>
        
    </div>
    <div class="slds-modal__content  slds-p-around--x-small slds-size_1-of-1 slds-is-relative">
            <lightning:recordEditForm
                aura:id="formId"
                recordId=""
                recordTypeId="{!v.RecordTypeId}"
                objectApiName="{!v.cti_object}"
                onsuccess = "{!c.handleSuccess}" 
                onerror="{!c.handleError}"
               >
                <lightning:accordion aura:id="accordion" 
                                     activeSectionName="{!v.openSections}"
                                             allowMultipleSectionsOpen="true">
                    <aura:iteration items="{!v.sections}" var="section">
                    
                        <lightning:accordionSection name="{!section.sectionName}" label="{!section.sectionName}">
                            <aura:set attribute="body">
                                <lightning:layout multipleRows="true">
                                    <aura:iteration items="{!section.fields}" var="field">
                                        <lightning:layoutItem size="6" >    
                                            <aura:if isTrue = "{!field.isVisible}">
                                                <aura:if isTrue = "{!field.isBoolean}">
                                                    <lightning:inputField variant="label-stacked" aura:id = "field" fieldName="{!field.fieldName}" value="{!field.fieldValueBoolean}" disabled="{!field.isReadonly}" required="{!field.isRequired}" class="{!if(field.isRequired,'required-class','')}"/>
                                                    <aura:set attribute="else">    
                                                        <lightning:inputField variant="label-stacked"  aura:id = "field" fieldName="{!field.fieldName}" value="{!field.fieldValue}" disabled="{!field.isReadonly}" required="{!field.isRequired}" class="{!if(field.isRequired,'required-class','')}" />
                                                    </aura:set>
                                                    
                                                </aura:if>
                                                <aura:set attribute="else">
                                                    <aura:if isTrue = "{!field.isBoolean}">
                                                        <lightning:inputField variant="label-stacked" aura:id = "field" fieldName="{!field.fieldName}" value="{!field.fieldValueBoolean}" disabled="{!field.isReadonly}" required="{!field.isRequired}" class="{!if(field.isRequired,'required-class','')}" style="display:none;"/>
                                                        <aura:set attribute="else">    
                                                            <lightning:inputField variant="label-stacked"  aura:id = "field" fieldName="{!field.fieldName}" value="{!field.fieldValue}" disabled="{!field.isReadonly}" required="{!field.isRequired}" class="{!if(field.isRequired,'required-class','')}" style="display:none;"/>
                                                        </aura:set>
                                                    </aura:if>                                                                                                        
                                                </aura:set>                                             
                                            </aura:if>
                                        </lightning:layoutItem>    
                                    </aura:iteration>
                                </lightning:layout>    
                            </aura:set>
                        </lightning:accordionSection>                      
                     </aura:iteration>                     
                </lightning:accordion>                    
            </lightning:recordEditForm>
    </div>    
    <div class="modal-footer slds-modal__footer  slds-size_1-of-1" >
                <lightning:button variant="neutral" label="Cancel" onclick="{!c.cancelDialog}" aura:id="cancelBtnId" />
                <lightning:button variant="brand" type="save" value="save" label="Save" onclick="{!c.submitForm}" aura:id="saveBtnId"/>
    </div>    
 
    <!-- 
    <aura:if isTrue="{!v.method == 'singlematch'}">
    <div class="c-container">
        <lightning:layout multipleRows="true">
            <lightning:layoutItem padding="around-small" size="12">
                <div class="page-section page-header">
                    <h2>Test Pop {!v.lob}</h2><div style="float: right;">test</div>
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem padding="around-small" size="12">
                <lightning:layout>
                    <lightning:layoutItem padding="around-small" size="3">
                        <div class="page-section page-right">
                            <h2>Account</h2>
                            <p>Listed account information...
                                
                            </p>
                             <h2>Contact</h2>
                            <p>Listed contact information..
                            </p>
                        </div>
                    </lightning:layoutItem>
                    <lightning:layoutItem padding="around-small" size="6">
                        <div class="page-section page-main">
                            <h2>Cases</h2>
                            
                        </div>
                    </lightning:layoutItem>
                    
                </lightning:layout>
            </lightning:layoutItem>
            <lightning:layoutItem flexibility="auto" padding="around-small" size="12">
                <div class="page-footer page-section">
                    <h2>Footer</h2>
                </div>
            </lightning:layoutItem>
        </lightning:layout>
    </div>
    
    </aura:if>     
    -->
    
    
    
    
    
</aura:component>