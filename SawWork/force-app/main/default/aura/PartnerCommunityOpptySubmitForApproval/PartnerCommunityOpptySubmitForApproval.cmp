<aura:component controller="PartnerCommSubmitForApprovalController" 
                extends="c:PartnerCommunityParentComponent" 
                implements="flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickActionWithoutHeader" 
                access="global" >
    
    <aura:attribute name="recordId" type="String" />
    <aura:attribute name="oppty" type="Opportunity" />
    <!-- Progress bar for Showing Submission progress -->
    <aura:attribute name="progress" type="Integer" default="0"/>
    <aura:attribute name="isProgressing" type="Boolean" default="false"/>
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:handler event="force:refreshView" action="{!c.doInit}" />
    <aura:handler name="parentUpdateEvent" event="c:PartnerCommunityParentUpdateEvent" action="{!c.refreshEvent}"/>
    
    <aura:if isTrue="{!v.oppty.isRebateTCToShow__c}">
        <article class="slds-card">
            <c:PartnerCommunityRecordDetailHeader recordId="{!v.recordId}"/>
        </article>
        <aura:set attribute="else">
            <aura:if isTrue="{!v.oppty.FCM__c == null}">
                <article class="slds-card">
                    <c:PartnerCommunityFCMSelectionComp recordId="{!v.recordId}" />
                </article>
            </aura:if>
        </aura:set>
    </aura:if>
    
    <aura:if isTrue="{!v.isProgressing}" >
        <div>
            <div class="slds-grid">
                <div class="slds-col"> <lightning:icon iconName="action:approval" size="medium" alternativeText="Indicates approval"/></div>
                <div class="slds-col"> <div class="slds-text-heading_medium">Submitting the record for approval -</div> </div>
            </div>
        </div>        
        <div class="slds-m-top_xx-large">
            <lightning:progressBar value="{!v.progress}" size="large"/>
        </div>
        
    </aura:if>
    
</aura:component>