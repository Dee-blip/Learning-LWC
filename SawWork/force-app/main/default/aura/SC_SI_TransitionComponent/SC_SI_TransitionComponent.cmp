<aura:component implements ="force:lightningQuickActionWithoutHeader,force:hasRecordId,lightning:actionOverride,lightning:isUrlAddressable" controller="SC_SI_PageLayoutButton_Controllor">
	<aura:attribute name="recordId" type="Id" />
	<aura:attribute name="selectedUser" type="sObject" />
	<aura:attribute name="selectedUserId" type="Id" />
    <aura:attribute name="previousOwner" type="Id" />
	<aura:attribute name="wakeupTime" type="String" />
	<aura:attribute name="currentShift" type="String" />
	<aura:attribute name="isOwnerUser" type="Boolean" default="true" />
	<aura:attribute name="isOwnerIRAPT" type="Boolean" default="true"/>
    <aura:attribute name="fromSideSection" type="Boolean" default="false"/>
	<aura:attribute name="showTransitionModal" type="Boolean" default="false"/>
	
	<!--<aura:attribute name="showSpinner" type="Boolean" default="false" /> -->
	
    <aura:attribute name="disableTransition" type="Boolean" default="true" /> 
	<aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    
    
    <!--pop up start-->
	<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
		<div class="slds-modal__container">
			<header class="slds-modal__header">
				<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close">
					<span class="slds-assistive-text">Close</span>
				</button>
				<h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Service Incident Transition</h2>
			</header>
            
                
             
                
			<div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                <aura:if isTrue="{!v.disableTransition}">
                <div class="demo-only" style="height:4rem">
                      <div class="slds-notify_container slds-is-relative">
                        <div class="slds-notify slds-notify_toast slds-theme_warning" role="status">
                          <span class="slds-assistive-text">warning</span>
                          <span class="slds-icon_container slds-icon-utility-warning slds-m-right_small slds-no-flex slds-align-top" title="Description of icon when needed">
                            
                          </span>
                          <div class="slds-notify__content">
                              <h2 class="slds-text-heading_small ">You are not authorized for transitioning as Incident is already in queue.</h2>
                              
                          </div>
                          <div class="slds-notify__close">
                            
                          </div>
                        </div>
                      </div>
                </div>
                <aura:set attribute="else">
				<lightning:textarea aura:id="notes" class="slds-m-top_medium" name="Notes" label="Notes" required="true"/>
                <!--Grid strcture to show fields-->
				<div class="slds-grid">
					<div class="slds-col slds-m-right_medium slds-m-top_medium">
						<div class="slds-form-element__label slds-no-flex">Current Shift</div>
						<div>{!v.currentShift}</div>
						<lightning:select class="slds-m-top_medium" aura:id ="targetShift" name="targetShift" required = "true" label="Target Shift" onchange="{!c.handleShiftChange}">
							<option value="">Please select target shift</option>
                            <!--<aura:if isTrue="{!and(v.currentShift != 'US EAST',v.currentShift != 'US East')}">-->
								<option value="US East">US EAST</option>
                            <!--</aura:if> -->
                            <!--<aura:if isTrue="{!and(v.currentShift != 'US WEST',v.currentShift != 'US West')}">-->
								<option value="US West">US WEST</option>
                            <!--</aura:if> -->
                            <!--<aura:if isTrue="{!v.currentShift != 'EMEA'}">-->
								<option value="EMEA">EMEA</option>
                            <!--</aura:if>   -->
                            <!--<aura:if isTrue="{!and(v.currentShift != 'APJ',v.currentShift != 'APAC')}">-->
								<option value="APJ">APJ</option>
                            <!--</aura:if>   --> 
							<option value="Transition Now">Transition Now</option>
						</lightning:select>
						
					</div>
					<div class="slds-col slds-m-left_medium slds-m-top_medium">
						<div>
							<c:SC_SI_LookupComponent
                					objectAPIName="User"
                					IconName="standard:account"
                					label="Suggested BIL"
                					selectedRecord="{!v.selectedUser}"
                					selectedRecordId="{!v.selectedUserId}"
                			/>
						</div>
						
						<div class="slds-form-element__label slds-no-flex slds-m-top_medium">WakeUp Time</div>
						<div>{!v.wakeupTime}</div>
					</div>
				</div>
                    </aura:set>
                </aura:if>
			</div>
			<footer class="slds-modal__footer">
				<lightning:button variant = "neutral" label="Cancel" onclick="{!c.handleCancel }"/>
                <aura:if isTrue="{!!v.disableTransition}">
					<lightning:button variant = "brand" label="Submit" onclick="{!c.handleSubmit }"/>
                </aura:if>
			</footer>
               
		</div>
	</section>
	<div class="slds-backdrop slds-backdrop_open"></div>
</aura:component>