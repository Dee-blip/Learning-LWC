<apex:page standardStylesheets="true" showHeader="false" standardController="Case" recordSetVar="cases" >
    <apex:includeLightning />
    
    
    <div id="LightningAppDiv">
        <!-- The lightning app will form here -->
    </div>
    <apex:includeScript value="/support/console/47.0/integration.js" />
    <script>
    function testSetTabTitle() {
        //Set the current tab's title
        sforce.console.setTabTitle('Add Existing Case');
    }
    var pageLoad = window.onload;
    window.onload = function() {
        if (pageLoad) {
            pageLoad();
        }
        testSetTabTitle();
    }
    document.addEventListener("closeSubTab", function(event){
        sforce.console.getEnclosingTabId(function(result){
            sforce.console.closeTab(result.id);
            });
        });
    	$Lightning.use(
            "c:relatedCaseExistingApp",
            function(){
                $Lightning.createComponent(
                    "c:relatedCaseExisting",
                    {
                        recordId : '{!$CurrentPage.parameters.id}',
                        themeOfUser : '{!$User.UITheme}'
                    },
                    "LightningAppDiv",
                    function(cmp){
                    	console.log("LWC created");
                });
           });
    </script>
</apex:page>