<apex:page name="Search Account" controller="PRM_search_account_controller" showHeader="true" sidebar="true" standardStylesheets="false">
    <apex:form id="searchformid">
        <apex:pageMessages />
        <apex:pageBlock title="Search Account" mode="edit" rendered="{!mode}" >
            <apex:commandLink action="{!cancel}"  immediate="true" value=" « Back to Opportunity"/>
            <apex:pageBlockButtons location="bottom" >
                <apex:commandButton action="{!search}" value="Search" reRender="searchformid,resultsformid"/>
                <apex:commandButton action="{!CreateMode}" value="Create New Account"/>
            </apex:pageBlockButtons>
            <apex:pageBlockSection columns="1">
                <apex:pageBlockSectionItem > Account Name:<apex:inputText value="{!AccountName}" /> </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem > Account Domain:<apex:inputText value="{!AccountDomain}"/> </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem > Account Country:<apex:inputText value="{!AccountCountry}"/> </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem > Account State:<apex:inputText value="{!AccountState}"/> </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
    <apex:form id="resultsformid" >
        <apex:pageBlock rendered="{!mode}">
            <apex:PageblockTable value="{!Accs}" var="acc" width="100%" >
                <apex:column >
                    <apex:commandLink value="Select" action="{!AddAccount}" styleClass="btn">
                        <apex:Param name="pid" value="{!acc.id}" />
                    </apex:commandLink>
                </apex:column>
                <apex:column >
                    <apex:facet name="header"><b>Name</b></apex:facet>
                    <!-- <a href="/{!acc.id}">{!acc.Name}</a> -->
                    <apex:outputLink value="/{!acc.id}" >{!acc.Name}</apex:outputLink> <!-- SFDC-5897 Added <apex:outputlink and commented anchor <a-->

                </apex:column>
                <apex:column >
                    <apex:facet name="header"><b>Website</b></apex:facet>
                        {!acc.Website}
                </apex:column>
                <apex:column >
                    <apex:facet name="header"><b>Billing Country</b></apex:facet>
                        {!acc.BillingCountry}
                </apex:column>
                <apex:column >
                    <apex:facet name="header"><b>Billing State</b></apex:facet>
                        {!acc.BillingState}
                </apex:column>
                <apex:column >
                    <apex:facet name="header"><b>Account Owner</b></apex:facet>
                    <apex:outputLink value="/{!acc.OwnerId}" >{!acc.Owner.Name}</apex:outputLink> <!-- SFDC-5897 Added <apex:outputlink and commented anchor <a-->
                    <!-- <a href='/{!acc.OwnerId}'>{!acc.Owner.Name}</a> -->
                </apex:column>
                <apex:column >
                    <apex:facet name="header"><b>Account Status</b></apex:facet>
                        {!acc.Account_Status__c}
                </apex:column>
            </apex:PageblockTable>
        </apex:pageBlock>
        <apex:pageBlock title="Create Account" rendered="{!mode==false}" mode="edit" >
            <apex:commandLink action="{!cancel}" immediate="true" value=" « Back to Opportunity"/>
            <apex:pageBlock rendered="{!DupcheckFlag}" >
               <div style="overflow: scroll;height: 100px;">
               Duplicate Record Found Use one of these record
               <apex:PageblockTable value="{!DuplicateAcc}" var="accdup"  id="pagetable1" >
               <apex:column >
                          <apex:facet name="header"><b>Name</b></apex:facet>
                            <a href="/{!accdup.id}">{!accdup.Name}</a>
               </apex:column>
               <apex:column value="{!accdup.AKAM_Account_ID__c}"/>
               <apex:column >
                          <apex:facet name="header"><b>Website</b></apex:facet>
                            {!accdup.Website}
               </apex:column>
                  
             </apex:PageblockTable>

            </div></apex:pageBlock>
            <apex:pageBlockSection columns="1">
                <apex:inputField value="{!newAccount.Name}"/>
                <apex:inputField value="{!newAccount.Website}"/>
                <apex:inputField value="{!newAccount.BillingStreet}"/>
                <apex:inputField value="{!newAccount.BillingCity}"/>
                <apex:inputField value="{!newAccount.BillingState}"/>
                <apex:inputField value="{!newAccount.BillingPostalCode}"/>
                <apex:inputField value="{!newAccount.BillingCountry}" required="true"/>
            </apex:pageBlockSection>
            <apex:pageBlockButtons location="bottom">
                <apex:commandButton action="{!DupAccountCheck}" value="Create Account" reRender="resultsformid,searchformid" rendered="{!showButton}" />
            
            <apex:commandButton action="{!CreateAcc}" value="Proceed"  reRender="searchformid" rendered="{!showButton==false}" />

                <apex:commandButton action="{!CancelCreate}" value="Cancel" immediate="true" />
            </apex:pageBlockButtons>
        </apex:pageBlock>
    </apex:form>
</apex:page>