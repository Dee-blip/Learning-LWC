<!-- Author: Ruchika Sharma
    Version: 1.0
    Created date: 18/04/2017
    SFDC-1548: Consolidation View for AWE Opportunities
-->
<apex:page standardController="Opportunity" extensions="OpportunityConsolidatedUIController" standardStylesheets="false" sidebar="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0" showHeader="false">
        <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang="en">
        <head>
          <meta charset="utf-8" />
          <meta http-equiv="x-ua-compatible" content="ie=edge" />
          <title>Opportunity Consolidated View</title>
          <meta name="viewport" content="width=device-width, initial-scale=1" />
        
          <!-- Import the Design System style sheet -->
          <apex:slds />
         
        </head>
        <body>

          <!-- REQUIRED SLDS WRAPPER -->
        
        <apex:includeScript value="/lightning/lightning.out.js" />
        <!-- <apex:stylesheet value="/resource/slds0120/assets/styles/salesforce-lightning-design-system-vf.css"/> -->
        <apex:includeLightning />
        <style>

    #auraLoadingBox.auraMsgBox {
        display: block;
        width: 100%;
        margin: 120px auto 0;
        background-color: #708090;
        z-index: 1002;
        border-radius: 5px;
        box-shadow: 0 20px 40px rgba(0,0,0,.8),inset 0 1px 1px rgba(255,255,255,.3);
        overflow: hidden
    }

    #auraLoadingBox.auraMsgBox h2 {
        font-weight: 700;
        font-size: 1.2em;
        line-height: 1.5em;
        margin: 0;
        padding: 10px;
        overflow: hidden
    }

    #auraLoadingBox.auraLoadingBox {
        text-align: center;
        width: 200px;
        line-height: 80px
    }
</style>
              
        <div id="theOppty"/>
    
         <script>
            var opptyId = "{!$CurrentPage.parameters.id}";
            
            $Lightning.use("c:OpportunityConsolidatedUIApp", function() {

                $Lightning.createComponent(

                    "c:OpportunityConsolidatedUI",

                    {theOppty:{
                        sobjectType: "Opportunity",
                        Associated_Lead__c: "{!Opportunity.Associated_Lead__c}",
                        CampaignId: "{!Opportunity.CampaignId}",
                        Id: {!ISBLANK(Opportunity.Id)} ? null : "{!Opportunity.Id}"
                        },
                        theContact:{ 
                          // sobjectType: "Contact",
                          // FirstName: "{!con.FirstName}",
                          // LastName: "{!con.LastName}",
                          // Name: "{!con.Name}",
                          // Title: "{!con.Title}",
                          // Phone: "{!con.Phone}",
                          // Email: "{!con.Email}",
                          AKAM_Contact_ID__c: "{!con.AKAM_Contact_ID__c}",
                          Id: {!ISBLANK(Opportunity.Id)} ? null : "{!con.Id}"
                        }
                      // contactId:"{!con.id}",
                      // taskId:"{!tsk.id}",
                      // task:{
                      //   sobjectType: "Task",
                      //   OwnerName: "{!tsk.Owner.Name}",
                      //   Subject: "{!tsk.Subject}",
                      //   Status: "{!tsk.Status}",
                      //   Type__c: "{!tsk.Type__c}",
                      //   ActivityDate: "{!tsk.ActivityDate}",
                      //   ReminderDateTime: "{!tsk.ReminderDateTime}",
                      //   id: {!ISBLANK(Opportunity.Id)} ? null : "{!tsk.id}"
                      // }
                    },

                    "theOppty",

                    function(cmp) {

                        var loadingDivElt = document.getElementById("auraLoadingBox");
                        loadingDivElt.style.display = 'none';
                        console.log("Component is created!");

                        console.log(cmp);

                    });

                });

        
// JSENCODE
          </script>
<div id="auraLoadingBox" class="auraMsgBox auraLoadingBox">
    <h2>Loading</h2>
</div>
            </body>
    </html>
    </apex:page>