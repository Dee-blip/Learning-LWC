<apex:page showHeader="false" sidebar="false">

  <script>

    function getNameValuePair(strUrl)
    {
        strUrl = unescape(strUrl);
        strUrl = strUrl.substr(strUrl.indexOf("?")+1, strUrl.length);

        var myArrNameValuePair = new Array();

        var myArray = strUrl.split("&");
        var myKey;
        var myValue;

        for (var i=0;  i < myArray.length;  i++)
        {
            myKey = myArray[i].substr(0, myArray[i].indexOf("="));
            myValue = myArray[i].substr(myArray[i].indexOf("=")+1, myArray[i].length);
            myArrNameValuePair[myKey] = myValue;
        }

        return myArrNameValuePair;
    }

    function getURLParam(strParamName)
    {
        var strReturn = "";
        var strHref = window.location.href;

        if ( strHref.indexOf("?") > -1 )
        {
            var strQueryString = strHref.substr(strHref.indexOf("?")+1, strHref.length);
            var aQueryString = strQueryString.split("&");
            for ( var iParam = 0; iParam < aQueryString.length; iParam++ )
            {
                if (aQueryString[iParam].indexOf(strParamName.toLowerCase() + "=") > -1 )
                {
                    var aParam = aQueryString[iParam].split("=");
                    strReturn = aParam[1];
                    break;
                }
            }
        }

        return unescape(strReturn);
    }  

    function redirect()
    {
        var strUrl = getURLParam("url");
        var myArrNameValuePair = new Object();

        if(strUrl == "" || strUrl == "1")
            strUrl = "https://momentum-staging.akamai.com";
        else
        {
            if(strUrl.indexOf("?")>0)
            {
                myArrNameValuePair = getNameValuePair(strUrl);
                strUrl = strUrl.substr(0, strUrl.indexOf("?"));
            }
        }

        myArrNameValuePair["user_name"] = '{!$User.Username }';
        myArrNameValuePair["session_id"] = '{!$Api.Session_ID}';
        myArrNameValuePair["user_alias"] = '{!$User.Alias}';
        myArrNameValuePair["server_url"] = '{!$Api.Enterprise_Server_URL_180}';

        strUrl = strUrl + "?";
        
        
        for(var i in myArrNameValuePair)
        {
            strUrl = strUrl + i + "=" + escape(myArrNameValuePair[i]) + "&";
        }

        strUrl = strUrl.substr(0, strUrl.length -1);

        //parent.frames.location.replace(strUrl);
        window.location.href = strUrl;
        //document.write(strUrl);
    }    

        window.onload = redirect;

  </script>

  <H1> Please Wait ... </H1>

</apex:page>