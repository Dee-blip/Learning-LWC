<apex:page showHeader="false" sidebar="false" standardController="SFDC_MDF__c" extensions="FundRequestAddPrivateNoteController">

   <apex:form id="addPrivateNote" >
   <apex:outputPanel id="jspanel"> 
<script>
     function onControllerReturn()
     {
        // SFDC-5895 - Added By Prabhanjan
      	if('{!JSENCODE(message)}'=='error')
      	{
      		alert("Error updating the private note field" + '{!JSENCODE(updateErrorMessage)}');
      	}
        var url = '/{!JSENCODE($Request.id)}'
      	setTimeout(function() { window.parent.parent.window.opener.location.href = url;
      							  window.close();;}, 2500); //SFDC 7223 
      
         
     }
</script>
</apex:outputPanel>
   <apex:actionFunction name="doControllerSave" action="{!savePrivateNote}" rerender="jspanel" status="doneProcessing"/>
   <apex:actionStatus id="doneProcessing" onstop="onControllerReturn()" />
        <apex:pageBlock id="PrivateNoteMain" mode="edit" title="Private Note">
             <apex:pageBlockButtons location="bottom">
                <apex:commandButton value="Save" onclick="doControllerSave();" oncomplete="onControllerReturn()" />
                 <apex:commandButton value="Cancel" onclick="onControllerReturn()" />
            </apex:pageBlockButtons>
            <apex:pageMessages />
            <apex:pageBlockSection id="PrivateNoteArea" columns="1">
                <apex:pageBlockSectionItem >
                    <font>This note will not be visible to the Partner</font>
                </apex:pageBlockSectionItem>                    
                <apex:inputTextarea richtext="true" style="width:300px;height:450px" id="PrivateNote" value="{!pageObject.Private_Note__c}"/>
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
   <script>editor.on('instanceReady', function() {editor.resize(0, 450);});</script>
</apex:page>