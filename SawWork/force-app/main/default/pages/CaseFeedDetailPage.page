<apex:page sidebar="false" standardController="Case" extensions="CaseFeedDetailPageController" showHeader="false" id="pg">
<apex:includeScript value="/support/console/24.0/integration.js"/>
<script>
function openSuccess(){
}   
function testOpenPrimaryTab(navUrl, name) {
//Open a new primary tab with the salesforce.com home page in it
sforce.console.openPrimaryTab(null, navUrl, false,name, openSuccess, 'salesforceTab');
}
function OpenServiceIncident(){
    
    var selectList= document.getElementById("pg:frm1:pbQuickLink:pbsQuickLink:selIncident");
    var tName = selectList.options[selectList.selectedIndex].text;
    var url = selectList.options[selectList.selectedIndex].value;
    window.open(url ,tName );
    return false;
}
    
</script>
    <apex:form id="frm1" style="width:200px;">
        <apex:messages styleClass="errorMsg" /> 
        <apex:actionStatus id="aStatus">
            <apex:facet name="start" >               
                <apex:image url="/img/loading.gif" title="Please Wait..." style="padding-top: 10%;padding-bottom: 10%;padding-left: 50%;"/>               
            </apex:facet>
        </apex:actionStatus>    
        <apex:pageBlock id="pbQuickLink">
            <apex:pageblocksection id="pbsQuickLink" collapsible="true" columns="1"  title="Quick Links">
                 <apex:outputPanel id="thePanel" layout="block">
                 <table width="100%">
                    <tr>
                    <td width="70"> 
                        <apex:selectList id="selIncident" size="1" style="width:120px;">
                            <apex:selectOptions value="{!suggestedServiceIncidents}"/>                      
                        </apex:selectList>                    
                    </td>                    
                    <td width="30"><input type="submit" value="GO" onclick="OpenServiceIncident()" /></td>
                    </tr> 
                </table>
                </apex:outputPanel>
            </apex:pageblocksection>
        </apex:pageBlock>
<!--        <apex:pageBlock id="pbKnowledgeBase">-->
<!--            <apex:pageblocksection id="pbsKnowledgeBase" collapsible="true" columns="2"  title="Knowledge Base">-->
<!--                <apex:inputText value="{!strKnowledgeBaseSearchText}" size="17" id="txtKnowledge"/>-->
<!--                <input type="submit" value="GO" onclick="JavaScript:void(0);" />-->
<!--            </apex:pageblocksection>-->
<!--        </apex:pageBlock> -->
        <apex:pageBlock id="pbServiceIncidents">
            <apex:pageblocksection id="pbsServiceIncidents" collapsible="true" columns="1"  title="Service Incidents">
                <apex:outputPanel id="thePanel" layout="block">
                <table width="100%">
                    
                    <tr>
                    <td width="70"><apex:inputText size="17" value="{!strServiceIncidentsText}" id="txtService"/> </td>                    
                    <td width="30"><input type="submit" value="GO" onclick="SearchedIncident()" /></td>
                    </tr>                    
                    <apex:repeat value="{!lstIncidents}" var="incident">
                     <tr>
                        <td width="50"><a href="javascript:testOpenPrimaryTab('/{!incident.ID}','{!incident.Name}')" >{!incident.Name}</a></td>
                        <td width="50"><a href="javascript:if (window.confirm('Are you sure you want to update case incident..?')) PopulateCaseIncident('{!incident.Id}');" style="font-weight:bold">Populate case Incident</a></td>
                     </tr>
                    </apex:repeat>
                </table>
                </apex:outputPanel>
            </apex:pageblocksection>
            
        </apex:pageBlock>
        <apex:actionFunction status="aStatus" action="{!PopulateCaseIncident}" name="PopulateCaseIncident" reRender="frm1" >
           <apex:param name="incidentid" value="" assignTo="{!selectedIncident}"/>
        </apex:actionFunction>
        <apex:actionFunction status="aStatus" action="{!SearchedIncident}" name="SearchedIncident" reRender="pbServiceIncidents" />
    </apex:form>
</apex:page>