<apex:page id="page"  standardController="RSS_Form__c" extensions="RSS_FormController"  sidebar="false" showHeader="true" docType="html-5.0">
<!-- <apex:page id="page" controller="RSS_FormController" rendered="{!!(NewForm && PostSales)}" sidebar="false"> -->

<script type="text/javascript" src="/resource/jquery119/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js" ></script>
<script type="text/javascript" src="/resource/jquery119/jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.js" ></script>
<link rel="stylesheet" type="text/css" href="/resource/jquery119/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.css"></link>


<!-- <link rel="stylesheet" type="text/css" href="/resource/Jquery/css/flick/jquery-ui-1.8.17.custom.css"></link> -->
    <head>
        <style>
        .ui-widget-header
        {
            background-color:red;
        }
        .nounderline
        {
            text-decoration:none;
        }
        .nounderline:hover
        {
            text-decoration:none;
        }
        .Title
        {
            font-size:200%
        }
        .question
        {
            padding:4px 4px 4px 4px;
        }
        </style>
    </head>

    <script>
       	var navigateToUrlNew = navigateToUrl;
		var returnURL;
		var unidentifiedVariable;
		var typeOfObj;
		jeRSS$ = jQuery.noConflict();
		//KS : Added as part of CR 3482711
		navigateToUrl = function(){
            returnURL = arguments[0];
            //Value of this var is null.
            unidentifiedVariable = arguments[1];
            typeOfObj = arguments[2];

            jeRSS$( function() {

    			jeRSS$( "#dialog-confirm" ).dialog({
      			resizable: false,
    		    height: "auto",
      			width: 400,
      			modal: true,
      			buttons: {
        			"Continue": function() {
                        navigateToUrlNew(returnURL,unidentifiedVariable,typeOfObj);
          				jeRSS$( this ).dialog( "close" );
        	    },
           			Cancel: function() {
         				jeRSS$( this ).dialog( "close" );
        			}
      		}
                });
  			} );
        }



        jeRSS$(function()
        {
            applyStyleToTemplatePanel();
            // if('{!RSSForm.Submitted__c}' == 'false' && '{!PostSales}' == 'true')
            //     alert('It Works : ' + 'Sub : {!RSSForm.Submitted__c}' + 'Post : {!PostSales}');
            // // window.onbeforeunload = function (event) {
            //         saveFnUnload();
            //     };
        });

        jeRSS$("#productsfielddiv").click(function() {
                alert("hello");
        });


        //Created the function: this disables the form and makes it transparent
        function greyOut () {
            // changes by Vandhana : Disable mouse clicks to enter text while Save/Submit/Publish
            jeRSS$('#MainDiv').css( 'pointer-events', 'none' );
            jeRSS$('#MainDiv').css({opacity: 0.1});
        }

        //Created the function: this applies the style to the Template panel
        function applyStyleToTemplatePanel(){
            var tabs = jeRSS$( "#tabs" ).tabs();
            tabs.find( ".ui-tabs-nav" ).sortable(
            {
                axis: "x",
                stop: function()
                {
                    tabs.tabs( "refresh" );
                }
            });

        }

        //Created the function: This removes the diabled attribute and sets the opacity to 1
        function removeGreyOut () {
            // changes by Vandhana : Re-enable mouse clicks to enter text
            jeRSS$('#MainDiv').css( 'pointer-events', 'auto' );
            jeRSS$('#MainDiv').css({opacity: 1});
           //jeRSS$(".templateclass").load(location.href + " .templateclass>*","");
        }

        function rerenderMessageDiv()
        {
            jeRSS$("#pagemessagediv").load(location.href + " #pagemessagediv>*","");
        }
        //End of changes by shprasan

        function reOrderTheTabs()
        {
            var unorderedList = document.getElementById('tabList');
            var hiddenList = unorderedList.getElementsByTagName('input');
            var x=0;
            for(x;x<hiddenList.length;x++)
            {
                hiddenList[x].value = x;
            }
        }
        function SetNavBar()
        {
            var x23 = document.getElementById('topNavigationBar');
            if(jSurvey$(window).scrollTop()<113){

                x23.style.position='';
            }
            else{

                x23.style.position = 'fixed';
            }
        }

        function onBlur()
        {
           // alert('stoping Save');
            StopSaving();
        }

        function onFocus()
        {
           StartSaving();
        }

        if (/*@cc_on!@*/false)
        { // check for Internet Explorer
            document.onfocusin = onFocus;
            document.onfocusout = onBlur;
        }
        else
        {
            window.onfocus = onFocus;
            window.onblur = onBlur;
        }

        function ShowSavedBar()
        {
            var d = new Date(); // for now
            var sec;
            if(d.getSeconds()<10) { sec = 0 +d.getSeconds();} else {  sec = d.getSeconds(); }
            document.getElementById('SavedBar').innerHTML = 'Last Saved at ' + d.getHours() + ':' + d.getMinutes() + ':' + sec;
        }

    </script>

    <style>
         .Custbtn
         {
          height:22px;
         }
    </style>
        <div id="dialog-confirm" title="Leave Page?" style = "display:none;">
            <p><span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span>Any changes you made to the form will be lost if you attach a new file without saving changes first. Do you want to continue to attach a file?</p>
        </div>

    <apex:outputPanel >
        <apex:actionStatus id="SubmitPublish">
            <apex:facet name="start">
                <c:P2RenhancedActionStatus BackColor="#ffffff" borderColor="#ffffff" borderSize="2" height="50px" width="150px" ImageUrl="/changemgmt/img/spinner24.gif" Message="Please wait..." messageStyle="color:darkred;font-size:11pt;font-weight:bold;"/>
            </apex:facet>
        </apex:actionStatus>
    </apex:outputPanel>


    <div id="MainDiv">
    <apex:form id="form" >

        <div id="SavedBar" style="position:fixed; top:60px; right:30px;color:red;z-index:999"></div>

        <div id="pagemessagediv">
        <apex:outputPanel id="PageMessages">
            <apex:PageMessages escape="false"/>
        </apex:outputPanel>
        </div>

        <div id="pagemessagediv2">
        <apex:outputPanel id="PageMessages2">
            <apex:pageMessage summary="{!onChangeError}" escape="false" severity="{! PageMessageSeverity}" strength="3" rendered="{!onChangeError != ''}" />
        </apex:outputPanel>
        </div>

        <!--Changes by Sharath: Rendering the form for all Users: No check for post-sales -->
        <!-- <apex:PageBlock id="pageblock" mode="edit" rendered="{!!(PostSales && NewForm)}"> -->
        <apex:PageBlock id="pageblock" mode="edit">
        <apex:actionPoller action="{!WrapperForCheckForInvalidScenarios}" reRender="validpanel" interval="5" enabled="{! !Disabled && !NewForm  && ValidScenario && !ServicesForm}" oncomplete="if ('{!ValidScenario}' == 'false'){rerenderMessageDiv();}"/>

            <apex:outputPanel id="titlepanel">
                <apex:pageBlockSection title="{!if(RSSForm.Name==null,'New RSS Form',RSSForm.Name)}"/>
            </apex:outputPanel>

            <apex:pageBlockButtons id="pageblockbuttons" location="Top">

                <!-- Changes by shprasan: Added the onclick, oncomplete and status attributes. Rerenders the pageMessageblock and loadas the page with the url specified in SavedURl -->

                <apex:commandButton id="nextButton" value="Save" action="{!SaveForm}"  reRender="PageMessages,leap1,leap2" rendered="{!NewForm && WriteAccessOfUser}" status="SubmitPublish" styleClass="Custbtn" onclick="greyOut();" oncomplete="removeGreyOut();"/>

                <!-- Changes by shprasan: Enclosed the button in an output panel. This is to re-render it on update-->
                <!-- changes by Vandhana : added !Disabled check so that error message is not rendered in read-only mode -->
              <apex:outputPanel id="updatepanel">
                <apex:commandButton id="updateTemplates" title="Update Product Forms" value="Update Product Forms" action="{!UpdateProductForms}" rendered="{!UpdateForm && InvalidTemplates && WriteAccessOfUser && !(RSSForm.Published__c && PreSales) && ValidScenario && !Disabled}"/>
              </apex:outputPanel>

              <!-- Changes by shprasan: Added the greyOut function onClick, Added the onComplete and status attribute. It re-renders the title block, the template panel, the page message block, the TSP output field and its label  -->
              <apex:outputPanel id="validpanel">
                <apex:commandButton id="updateButton" value="Save" title="Save" action="{!UpdateForm}" onclick="reOrderTheTabs();greyOut();"  rendered="{!UpdateForm && !Disabled && WriteAccessOfUser && !(RSSForm.Published__c && PreSales) && !(!PreSales && SaveNewFlag) &&ValidScenario}" styleClass="Custbtn" oncomplete="removeGreyOut();applyStyleToTemplatePanel();" reRender="PageMessages,templatePanel,productsfield,updatepanel,titlepanel,TSP,TSPlabel,PageMessages2" status="SubmitPublish"/>

                <apex:commandButton id="SaveNew" title="Save" value="Save" action="{!CloneNewRSSForm}" onclick="greyOut();reOrderTheTabs();" oncomplete="removeGreyOut();applyStyleToTemplatePanel();"  rendered="{!UpdateForm && !Disabled && WriteAccessOfUser && !RSSForm.Published__c && (!PreSales && SaveNewFlag) && ValidScenario}" styleClass="Custbtn" status="SubmitPublish" reRender="PageMessages,PageMessages2"/>

                <!-- Changes by shprasan: Adding a new Submit button for pre-sales -->
                <apex:commandButton id="submitButton" title="Submit" value="Submit" status="SubmitPublish" onclick="greyOut();" oncomplete="removeGreyOut();applyStyleToTemplatePanel();" action="{!PublishForm}" rendered="{! !PostSales && UpdateForm && !Disabled && WriteAccessOfUser && !RSSForm.Submitted__c &&ValidScenario}" reRender="PageMessages,PageMessages2,templatePanel"/>
                <!-- Changes by shprasan: Changed the rendered attribute, check if the form is not published if the user is pre-sales-->

                <!-- Changes by shprasan: Added the re-render attribute-->
                <!-- changes by Sharath: Displaying the Publish button for PostSales for Services Forms-->
                <apex:commandButton id="publishButton" status="SubmitPublish" title="Publish" value="Publish" onclick="greyOut();" oncomplete="removeGreyOut();applyStyleToTemplatePanel();" action="{!PublishForm}" rendered="{! !PreSales && UpdateForm && !Disabled && WriteAccessOfUser && (RSSForm.Submitted__c || (PostSales && ServicesForm)) && ValidScenario}" reRender="PageMessages,PageMessages2,templatePanel" />

<!--                 <apex:commandButton id="AcceptanceForm" status="SubmitPublish" value="AcceptanceForm" onclick="greyOut();" oncomplete="removeGreyOut();" action="{!NavigateToAcceptanceForm}" rendered="{! !PreSales && UpdateForm && WriteAccessOfUser && RSSForm.Submitted__c && ValidScenario}" reRender="none"/>
 -->            <!-- Changes by sharath: created the button to navigate to the acceptance form-->
                <apex:commandLink id="AcceptanceForm" status="SubmitPublish" styleClass="btn" style="text-decoration: none;" target="_blank" value="Acceptance Form"  action="{!NavigateToAcceptanceForm}" rendered="{! !PreSales && UpdateForm && WriteAccessOfUser && RSSForm.Submitted__c && ValidScenario}" />


              </apex:outputPanel>
                <!-- Changes by Sharath: Displaying the Revise button for Post Sales for Services Forms-->
                <apex:commandButton id="reviseButton" title="Revise" value="Revise" action="{!ReviseRSS}" rendered="{!UpdateForm && Disabled && WriteAccessOfUser && !(RSSForm.Published__c && PreSales) && !(PostSales && !RSSForm.Submitted__c && !ServicesForm) && ValidScenario}"/>

                <!--  apex:commandButton id="DownloadOfflineDataButton" title="Download Offline Data" value="Download Offline Data"  action="{!DownloadOfflineData}" rendered="{!UpdateForm && !Disabled}"/>-->
                <apex:commandButton id="ViewAsPDFButton" title="Download PDF" value="Download PDF"  action="{!DownloadPDF}" rendered="{!UpdateForm}"/>

            </apex:pageBlockButtons>

            <apex:actionFunction name="UpdateForm" action="{!UpdateForm}" reRender="PageMessages,templatePanel,productsfield,updatepanel,titlepanel,TSP,TSPlabel" ></apex:actionFunction>
            <!-- <apex:actionFunction name="CloneNewRSSForm" action="{!CloneNewRSSForm}"></apex:actionFunction> -->

<!--             <apex:actionFunction name="saveFnUnload" action="{!UpdateForm}" reRender="none"></apex:actionFunction>
 -->
            <b><p><center style="text-align:center;color:green;size:14">
            <!-- Changes by shprasan: Showing the published and submitted labels accordingly -->
            <apex:outputText rendered="{!Disabled && RSSForm.Submitted__c && RSSForm.Published__c}">Published Form</apex:outputText>
            <!-- Showing the Submitted label only when the publish locked flag is false-->
            <apex:outputText rendered="{!Disabled && RSSForm.Submitted__c && !RSSForm.Locked__c}">Submitted Form</apex:outputText></center></p></b>

            <!-- <apex:actionFunction name="UpdateOpportunityDateFields" action="{!UpdateOpportunityDateFields}" reRender="none"/> -->
            <!-- End of changes by shprasan -->
            <apex:outputPanel id="actionPoller">
            <!-- <apex:actionPoller action="{!AutoSave}" timeout="20" interval="10" enabled="{!KeepSaving && UpdateForm && !Disabled}" oncomplete="ShowSavedBar()" reRender="actionPoller" /> -->
            </apex:outputPanel>

            <apex:actionFunction name="StopSaving" action="{!StopSaving}" rerender="actionPoller"/>
            <apex:actionFunction name="StartSaving" action="{!StartSaving}" rerender="actionPoller"/>

            <apex:PageBlockSection id="pageblocksection" columns="1">

                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Form Name" for="techName" rendered="{!!Disabled}"/>
                        <apex:outputPanel >
                            <div class="requiredInput">
                                <div class="requiredBlock"></div>
                                <apex:inputField value="{!RSSForm.Name}" required="false" rendered="{!!Disabled}"/>
                            </div>
                        </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <!-- <apex:outputText escape="false" value="{!RSSForm.Name}" rendered="{!Disabled}"/> -->

                <!--Changes by shprasan: Display the Submit version and Publish version -->

                <apex:outputField id="submitversion" value="{!RSSForm.Submit_Version__c}" rendered="{!RSSForm.Submit_Locked__c}"/>
                <apex:outputField id="publishversion" value="{!RSSForm.Version__c}" rendered="{!RSSForm.Published__c}"/>
                <!--End of changes by shprasan -->

                <!-- Changes by Sharath for Leap: The Customer Technical Contact Name and Customer Technical Contact Details are rendered only for the existing forms-->
            </apex:PageBlockSection>

            <apex:PageBlockSection columns="1" rendered="{! !LeapForm}">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Customer Technical Contact Name" for="techName" rendered="{! !Disabled && !LeapForm}"/>
                    <apex:outputPanel >
                    <div class="requiredInput">
                        <div class="requiredBlock"> </div>
                                <apex:inputField value="{!RSSForm.Customer_Technical_Contact_Name__c}" rendered="{! !Disabled && !LeapForm}" id="techName"/>
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:outputField value="{!RSSForm.Customer_Technical_Contact_Name__c}" rendered="{! Disabled && !LeapForm}"/>
                <!-- <apex:outputField value="{!aNewForm.Id}" /> -->

                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Customer Technical Contact Details" for="techDetail" rendered="{! !Disabled && !LeapForm}"/>
                    <apex:outputPanel >
                        <div class="requiredInput">
                            <div class="requiredBlock"> </div>
                            <apex:inputTextarea value="{!RSSForm.Customer_Technical_Contact_Details__c}" rows="5" style="width:25%;" rendered="{! !Disabled && !LeapForm}" id="techDetail"/>
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:outputField value="{!RSSForm.Customer_Technical_Contact_Details__c}" style="width:25%;" rendered="{! Disabled && !LeapForm}"/>
            </apex:PageBlockSection>

        <apex:outputPanel id="OpportunityPanelSection">
            <apex:pageBlockSection columns="1">
            <!-- changes by Vandhana : Opportunity field is mandatory -->
                <!-- added changes : Opportunity is Read-Only for Post-Sales -->
                <!-- Changes by Sharath: Opportunity is not Read-Only for Post-Sales for Services Forms-->
                <apex:pageBlockSectionItem rendered="{! !Disabled && (!PostSales || (PostSales && (NewForm || ServicesForm)))}">
                    <apex:outputLabel value="Opportunity" for="oppId" />
                        <apex:outputPanel id="OpportunityItem">
                        <div class="requiredInput">
                            <div class="requiredBlock"></div>
                            <apex:inputField required="false" value="{!RSSForm.Opportunity__c}" rendered="{! !Disabled && (!PostSales || (PostSales && (NewForm || ServicesForm)))}" onchange="ValidateOpportunity();"/>
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:outputField value="{!RSSForm.Opportunity__c}" rendered="{! Disabled || !(!PostSales || (PostSales && (NewForm || ServicesForm))) }"/>

                <!-- end of changes by Vandhana -->

                <apex:pageBlockSectionItem id="TSPsectionitem">
                    <apex:outputPanel id="TSPLabel">
                        <apex:outputLabel value="Technical Sales Primary" for="tspoutputfield" rendered="{!OpportunitySet}"/>
                    </apex:outputPanel>
                    <apex:outputPanel id="TSP">
                        <apex:outputField id="tspoutputfield" value="{!RSSForm.TSP__c}" rendered="{!OpportunitySet}"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Account" for="accountId" />
                    <apex:outputPanel id="accountId" >
                        <apex:outputField label="Account" value="{!RSSForm.Account__c}" rendered="{!!InvalidOpportunity}"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

            <!-- changes by Vandhana for CR 3303711 : AE name auto-populate from Account Team Member with Sales - Primary role -->
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="AE Name" for="AEName"/>
                    <apex:outputPanel id="AEName" >
                        <!-- <apex:inputField value="{!RSSForm.AEName__c}"/> -->
                        <apex:outputField value="{!RSSForm.AEName__c}" rendered="{!!InvalidOpportunity}" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
            <!-- end of changes -->

            <!-- changes by Vandhana for CR 3053881 - Partner Involved check -->
            <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Partner Involved" />
                    <apex:outputPanel id="PartnerInvolved" >
                        <apex:outputField label="Partner Involved" value="{!RSSForm.Partner_Involved__c}" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem rendered="{!IndirectOpportunity}">
                    <apex:outputPanel id="PartnerNameLabel">
                        <apex:outputLabel value="Partner Organisation Name" for="partnernamefield" />
                    </apex:outputPanel>
                    <apex:outputPanel id="PartnerName">
                        <apex:outputField id="partnernamefield" value="{!RSSForm.Partner_Name__c}" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem rendered="{!IndirectOpportunity}">
                    <apex:outputPanel id="PartnerInfoLabel">
                        <apex:outputLabel title="Add the phone number, email address or URL for the Partner's support organization" rendered="{! !Disabled && !PostSales}" value="Partner Project Delivery Contact" />
                    </apex:outputPanel>
                    <apex:outputPanel id="PartnerInfo">
                        <apex:inputTextarea rendered="{! !Disabled && !PostSales}" style="width:25%;" value="{!RSSForm.Partner__c}"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:outputField value="{!RSSForm.Partner__c}" style="width:25%" rendered="{! (Disabled || PostSales)}" />
            <!-- end of changes by Vandhana -->

                <apex:actionFunction name="ValidateOpportunity" action="{!ValidateOpportunity}" reRender="PageMessages2,OpportunityPanelSection,TestData,leap1,leap2"/>
            </apex:pageBlockSection>
        </apex:outputPanel>
            <apex:pageBlockSection columns="1" rendered="{! LeapForm}">
                <!-- Changes by Sharath for Leap-->
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Customer Administrator Contact Email Id" for="aEmail" rendered="{! !Disabled }"/>
                    <apex:outputPanel >
                    <div class="requiredInput">
                        <div class="requiredBlock"> </div>
                        <!-- <apex:input value="{! AEmail}" rendered="true" id="aEmail"  onChange="RetrieveContact('admin')" type="email"/> -->                            <apex:inputText value="{!AEmail}" rendered="{!!Disabled}" id="aEmail"  onChange="RetrieveContact('admin')"/>
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!Disabled }">
                    <apex:outputLabel value="Customer Administrator Contact Email Id" for="AEmailOutput" />
                    <apex:outputPanel id="AEmailOutput" >
                         <apex:outputText value="{! AEmail}" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

            </apex:PageBlockSection>
        <apex:outputPanel id="leap1">
            <apex:pageBlockSection rendered="{!LeapForm && NOT(ISNULL(RSSForm.Admin_Contact_Details__c)) && RSSForm.Admin_Contact_Details__c != '' && ISNULL(RSSForm.Admin_Contact__c) && NOT(ISNULL(RSSForm.Opportunity__c))}" columns="1">
                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="aFNameLabel" layout="inline" >
                        <apex:outputLabel value="Administrator First Name"  for="aFName" />
                    </apex:outputPanel>
                    <apex:outputPanel id="aFName" >
                        <div class="requiredInput">
                            <div class="requiredBlock"> </div>
                                    <apex:inputText value="{!AFirstName}" />
                            </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="aLNameLabel" >
                        <apex:outputLabel value="Administrator Last Name"  for="aLName" />
                    </apex:outputPanel>
                    <apex:outputPanel id="aLName" >
                        <div class="requiredInput">
                            <div class="requiredBlock"> </div>
                                    <apex:inputText value="{!ALastName}" />
                            </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="aPhoneLabel" >
                        <apex:outputLabel value="Administrator Phone Number"  for="aPhone" />
                    </apex:outputPanel>

                    <apex:outputPanel id="aPhone"  >
                        <div class="requiredInput">
                            <div class="requiredBlock"> </div>
                                    <apex:inputText value="{! APhone}"  />
                            </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

            </apex:pageBlockSection>
            <apex:pageBlockSection columns="1" rendered="{!LeapForm  && NOT(ISNULL(RSSForm.Admin_Contact__c)) && NOT(ISNULL(RSSForm.Opportunity__c))}">
                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="aFNameOutputLabel" >
                        <apex:outputLabel value="Administrator First Name" for="aFNL" />
                    </apex:outputPanel>
                    <apex:outputPanel id="aFNameOutput" >
                        <apex:outputText value="{!AFirstName}" id="aFNL" label="Administrator First Name" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="aLNameOutputLabel" >
                        <apex:outputLabel value="Administrator Last Name" for="aLNL" />
                    </apex:outputPanel>
                    <apex:outputPanel id="aLNameOutput" >
                        <apex:outputText value="{!ALastName}" id="aLNL" label="Administrator Last Name" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="aPhoneOutputLabel" >
                        <apex:outputLabel value="Administrator Phone Number" for="aPNL" />
                    </apex:outputPanel>
                    <apex:outputPanel id="aPhoneOutput" >
                        <apex:outputText value="{!APhone}" id="aPNL" label="Administrator Phone Number" />
                    </apex:outputPanel>

                </apex:pageBlockSectionItem>

            </apex:pageBlockSection>

        </apex:outputPanel>
        <apex:outputPanel id="leap2">

           <apex:pageBlockSection columns="1" rendered="{!LeapForm && (!Disabled || (Disabled && TEmail != null && TEmail != ''))}">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Customer Technical Contact Email Id" for="tEmail" rendered="{! !Disabled}"/>
                    <apex:outputPanel >
                        <apex:inputText label="Technical Contact Email"  value="{! TEmail}" rendered="{! !Disabled && LeapForm}" id="tEmail"  onChange="RetrieveContact('tech')"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!Disabled }">
                    <apex:outputLabel value="Customer Technical Contact Email Id" for="TEmailOutput" />
                    <apex:outputPanel id="TEmailOutput" >
                         <apex:outputText value="{! TEmail}" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

            </apex:pageBlockSection>

            <apex:pageBlockSection columns="1" rendered="{!LeapForm  && NOT(ISNULL(RSSForm.Technical_Contact_Details__c)) && RSSForm.Technical_Contact_Details__c != '' && ISNULL(RSSForm.Technical_Contact__c) && NOT(ISNULL(RSSForm.Opportunity__c))}">

                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="tFNameLabel">
                        <apex:outputLabel value="Technical Contact First Name" for="tFName" />
                    </apex:outputPanel>
                    <apex:outputPanel id="tFName">
                        <div class="requiredInput">
                            <div class="requiredBlock"> </div>
                                    <apex:inputText value="{! TFirstName}" />
                            </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="tLNameLabel">
                        <apex:outputLabel value="Technical Contact Last Name" for="tLName" />
                    </apex:outputPanel>
                    <apex:outputPanel id="tLName">
                        <div class="requiredInput">
                            <div class="requiredBlock"> </div>
                                    <apex:inputText value="{!TLastName}" />
                            </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="tPhoneLabel">
                        <apex:outputLabel value="Technical Contact Phone Number" for="tPhone" />
                    </apex:outputPanel>

                    <apex:outputPanel id="tPhone" >
                        <div class="requiredInput">
                            <div class="requiredBlock"> </div>
                                    <apex:inputText value="{! TPhone}"  />
                            </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
             </apex:pageBlockSection>
             <apex:pageBlockSection columns="1" rendered="{!LeapForm  && NOT(ISNULL(RSSForm.Technical_Contact__c)) && NOT(ISNULL(RSSForm.Opportunity__c))}">
                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="tFNameOutputLabel">
                        <apex:outputLabel value="Technical Contact First Name" for="tFNL" />
                    </apex:outputPanel>
                    <apex:outputPanel id="tFNameOutput">
                        <apex:outputText value="{! TFirstName}" id="tFNL" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="tLNameOutputLabel">
                        <apex:outputLabel value="Technical Contact Last Name" for="tLNL" />
                    </apex:outputPanel>
                    <apex:outputPanel id="tLNameOutput">
                        <apex:outputText value="{! TLastName}" id="tLNL" label="Technical Contact Last Name" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem >
                    <apex:outputPanel id="tPhoneOutputLabel">
                        <apex:outputLabel value="Technical Contact Phone Number" for="tPNL" />
                    </apex:outputPanel>
                    <apex:outputPanel id="tPhoneOutput">
                        <apex:outputText value="{! TPhone}" id="tPNL" label="Technical Contact Phone Number" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
             </apex:pageBlockSection>
        </apex:outputPanel>

           <apex:pageBlockSection columns="1">

            <apex:actionFunction name="RetrieveContact" action="{! RetrieveContact}" reRender="PageMessages2,leap1,leap2">
                <apex:param name="ContactType" value=""/>
            </apex:actionFunction>
            <!-- End of changes by Sharath-->

            <!-- start of changes by Vandhana -->
                <!-- changes for CR 3147461 : Added Commitment Type field -->
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Commitment Type" for="commitmenttype" rendered="{!!Disabled}"/>
                    <apex:outputPanel >
                        <div class="requiredInput">
                            <div class="requiredBlock"></div>
                            <apex:inputField value="{!RSSForm.Commitment_Type__c}" id="commitmenttype" rendered="{!!Disabled}"/>
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <!-- added new formula field to display commitment type -->
                <apex:outputText escape="false" rendered="{!Disabled}" label="Commitment Type" value="{!RSSForm.Commitment_Type_Internal__c}" />


                <!-- changes for CR 3147451 : Renamed field to Integration Management Type -->
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Integration Management Type" for="integration" rendered="{!!Disabled}"/>
                    <apex:outputPanel >
                        <div class="requiredInput">
                          <div class="requiredBlock"> </div>
                        <apex:inputField value="{!RSSForm.Type_of_Integration__c}" rendered="{!!Disabled}" id="integration"/>
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:outputField value="{! RSSForm.Type_of_Integration__c}" rendered="{!Disabled}"/>
            <!-- end of changes by Vandhana -->

                <!--apex:inputField label="Hostnames (Digital Properties)" value="{!RSSForm.DigitalProperty__c}" rendered="{!!Disabled}"/-->
                <!--apex:outputField label="Hostnames (Digital Properties)" value="{!RSSForm.DigitalProperty__c}" rendered="{!Disabled}"/-->
            </apex:pageBlockSection>

            <apex:pageBlockSection columns="1">
           <!-- start of changes by Vandhana -->
               <!-- changes for CR 3147501 : Added 3 new fields -->
                <apex:pageBlockSectionItem helpText="If unidentified, make note of why" rendered="{!!Disabled}">
                    <apex:outputLabel value="Customer Business Objective" rendered="{!!Disabled}"/>
                    <apex:outputPanel >
                        <div>
                        <apex:inputTextarea style="width:25%;" value="{!RSSForm.Customer_Business_Objective__c}" rendered="{!!Disabled}" />
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:outputField title="If unidentified, make note of why" value="{!RSSForm.Customer_Business_Objective__c}" rendered="{!Disabled}"/>

                <apex:pageBlockSectionItem helpText="Add guidance that this refers to any knowledge gaps, customer infrastructure issues, communication issues, other potential risks" rendered="{!!Disabled}">
                    <apex:outputLabel value="Customer Risk" rendered="{!!Disabled}"/>
                    <apex:outputPanel >
                        <div>
                        <apex:inputTextarea style="width:25%;" value="{!RSSForm.Customer_Risk__c}" rendered="{!!Disabled}"/>
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:outputField title="Add guidance that this refers to any knowledge gaps, customer infrastructure issues, communication issues, other potential risks" value="{!RSSForm.Customer_Risk__c}" rendered="{!Disabled}"/>

                <apex:pageBlockSectionItem helpText="If unidentified, make note of why" rendered="{!!Disabled}">
                    <apex:outputLabel value="Customer agreed Success Criteria" rendered="{!!Disabled}"/>
                    <apex:outputPanel >
                        <div class="requiredInput">
                            <div class="requiredBlock"></div>
                            <apex:inputTextarea style="width:25%;" value="{!RSSForm.Customer_agreed_Success_Criteria__c}" rendered="{!!Disabled}" />
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:outputField title="If unidentified, make note of why" value="{! RSSForm.Customer_agreed_Success_Criteria__c}" rendered="{!Disabled}"/>
           <!-- end of changes by Vandhana -->

           <!-- changes by Vandhana for CR 3306821 - add LOE field -->
           <apex:pageBlockSectionItem >
                    <apex:outputLabel value="LOE" rendered="{!!Disabled}"/>
                    <apex:outputPanel >
                        <div>
                            <apex:inputField value="{!RSSForm.LOE__c}" rendered="{!!Disabled}" />
                        </div>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
            <apex:outputField value="{!RSSForm.LOE__c}" rendered="{!Disabled}"/>

            <!-- end of changes by Vandhana -->

            <div id="productsfielddiv">
                <apex:pageBlockSectionItem id="pageblocksectionitem" >
                    Products<b style="color:red">*</b>
                    <apex:outputPanel id="productsfield" >
                        <apex:outputPanel rendered="{!!Disabled}">
                            <!-- <c:MultiSelectComponent id="selectcomponent" AvailableList="{!availableList}" ChosenList="{!chosenList}" /> -->
                            <c:ERSSMultiselectPicklist leftLabel="Available List" rightLabel="Chosen List" size="5" width="100%" leftOptions="{!availableList}" RightOptions="{!chosenList}" isEditable="true"/>
                        </apex:outputPanel>
                        <apex:selectList disabled="true" rendered="{!Disabled}">
                            <apex:selectOptions value="{!chosenList}"></apex:selectOptions>
                        </apex:selectList>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
            </div>

            <!--    <apex:outputField label="Owner" value="{!RSSForm.OwnerId}" rendered="{!showOwner && PreSales && !RSSForm.Submit_Locked__c}"/>
            -->

                <apex:outputField label="Submitted By" value="{!RSSForm.Submitted_By__c}" rendered="{!showOwner && RSSForm.Submit_Locked__c}"/>
                <apex:outputField label="Published By" value="{!RSSForm.LastModifiedByID}" rendered="{!showOwner && RSSForm.Locked__c}"/>
                <apex:outputField value="{!RSSForm.Submittal_Date__c}" rendered="{!RSSForm.Submitted__c}"/>
                <apex:outputField value="{!RSSForm.Published_Date__c}" rendered="{!RSSForm.Published__c}"/>
            </apex:PageBlockSection>


        <!--apex:dynamicComponent componentValue="{!MyTabs}" rendered="{!tabRendered}"/-->
         </apex:PageBlock>
         <!-- Changes by Sharath: Rendering the template panel for all users: No check for Post Sales-->
        <!-- <apex:outputPanel id="templatePanel"  rendered="{!!(NewForm && PostSales)}"> -->
        <apex:outputPanel id="templatePanel" >
            <div id="tabs" >
                <ul id="tabList" >
                    <apex:repeat value="{!RSSFormWrappers}" var="rfw">
                        <li>
                            <a href="#tabs-{!rfw.UniqueNumber}">{!rfw.ProductForm.Survey__r.Name}</a>
                            <apex:inputHidden value="{!rfw.ProductForm.OrderNumber__c}"/>
                        </li>
                    </apex:repeat>
                </ul>

                <apex:repeat value="{!RSSFormWrappers}" var="rfw">
                    <div id = "tabs-{!rfw.UniqueNumber}">
                        <apex:repeat var="g" value="{!rfw.responseGroupWrappers}">
                            <div id="QuestionGroup{!g.questionGroup.Name}" >
                                <div style="padding:4px 4px 8px 4px;">
                                    <apex:outputLabel value="{!g.questionGroup.Name}" style="font-size:150%;"></apex:outputLabel>
                                </div>

                                <apex:repeat var="r" value="{!g.surveyResponses}" >
                                    <div title="{!r.response.Survey_Question__r.QuestionDescription__c}">
                                        <h1>
                                            <span style="padding:4px 4px 4px 4px;">{!r.order}.</span>    {!r.response.Survey_Question__r.Question__c}
                                                <apex:outputLabel style="color:red" rendered="{!if(r.response.Survey_Question__r.Required__c,true,false)}">*</apex:outputLabel>
                                        </h1>

                                        <div id="radio">
                                            <apex:selectRadio value="{!r.answer}" disabled="{!Disabled}" layout="pageDirection" rendered="{!if(r.response.Survey_Question__r.Type__c = 'Single Select--Vertical',true,false)}">
                                                <apex:selectOptions value="{!r.Choices}"/>
                                            </apex:selectRadio>
                                        </div>

                                        <div id="checkbox">
                                            <apex:selectCheckboxes value="{!r.CheckBoxValues}" disabled="{!Disabled}" layout="pageDirection" rendered="{!if(r.response.Survey_Question__r.Type__c = 'Multi-Select--Vertical',true,false)}" >
                                                <apex:selectOptions value="{!r.Choices}"/>
                                            </apex:selectCheckboxes>
                                        </div>

                                        <div id="text">
                                            <apex:inputTextArea value="{!r.answer}" readonly="{!Disabled}" rows="10" style="width:80%;" rendered="{!if(r.response.Survey_Question__r.Type__c = 'Free Text',true,false)}"/>
                                        </div>

                                        <div id="row">
                                            <apex:selectRadio value="{!r.answer}" disabled="{!Disabled}" rendered="{!if(r.response.Survey_Question__r.Type__c = 'Single Select--Horizontal',true,false)}">
                                                <apex:selectOptions value="{!r.Choices}"/>
                                            </apex:selectRadio>
                                        </div>

                                        <div id="picklist">
                                            <apex:selectList multiselect="false" size="1" disabled="{!Disabled}" value="{!r.answer}" rendered="{!if(r.response.Survey_Question__r.Type__c = 'Picklist',true,false)}">
                                                <apex:selectOptions value="{!r.Choices}"/>
                                            </apex:selectList>
                                        </div>
                                        <br/>
                                    </div>
                                </apex:repeat>
                            </div>
                        </apex:repeat>
                    </div>
                </apex:repeat>
            </div>
        </apex:outputPanel>

    </apex:form>
  </div>
<apex:relatedList list="NotesAndAttachments" subject="{!RSSForm.Id}" />

</apex:page>