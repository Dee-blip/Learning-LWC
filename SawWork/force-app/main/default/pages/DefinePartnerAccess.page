<apex:page controller="PartnerAccessController" action="{!exceptionCheck}">
	<apex:form >
	<apex:actionStatus id="btnClickStatus">
	    <apex:facet name="start">
	        <c:enhancedActionStatus BackColor="#ffffff" borderColor="#ffffff" borderSize="2" height="50px" width="150px" ImageUrl="/changemgmt/img/spinner24.gif" Message="Loading..." messageStyle="color:darkred;font-size:11pt;font-weight:bold;"/>
	    </apex:facet>   
    </apex:actionStatus>
	    <apex:pageMessages />
	    <apex:outputLink value="/{!contactId}" >
				<apex:outputText value="<<Back To Contact"/>
		</apex:outputLink>
		<br/><br/>
		<apex:pageBlock id="UpdateAccessBlock" rendered="{! $Profile.Name =='Akamai Partner Administrator' || $Profile.Name =='Partner Support' || $Profile.Name == 'System Administrator' || $Profile.Name == 'Partner Community Admin' }">
			<apex:pageBlockSection rendered="{!NOT(isViewMode)}">
				<!-- CR 2839539: rsharma - added role and profile to be selected -->
				<apex:pageBlockSectionItem rendered="{!if(NoRolesFound==false,TRUE,FALSE)}" >
                    Role
                    <apex:selectList size="1" value="{!BUOpt}">
                        <apex:selectOptions value="{!BUOptions}"/>
                    </apex:selectList>
                </apex:pageBlockSectionItem>
                
           
                <apex:pageBlockSectionItem >
                    Profile
                    <apex:selectList size="1" value="{!BUOptProfile}">
                        <apex:selectOptions value="{!BUOptionsProfile}"/>
                    </apex:selectList>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem />
                <apex:pageBlockSectionItem />
                <!-- CR 2839539: End -->
				 <apex:inputField id="MDFAccess" value="{!partnerUser.Has_MDF_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:inputField id="OpportunityAccess" value="{!partnerUser.Has_DealRegistration_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:inputField id="PartnerPlansAccess" value="{!partnerUser.Has_PartnerPlans_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:inputField id="PartnerCertificationAccess" value="{!partnerUser.Has_PartnerCertification_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:inputField id="ViewPricingDetails" value="{!partnerUser.View_Pricing_Details__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}" />
				 <apex:inputField id="POAAccess" value="{!partnerUser.Can_Accept_POA__c}" />
				 <apex:inputField id="ViewContentInPortal" value="{!partnerUser.Has_view_content_in_portals__c}" />
				 <apex:inputField id="AUAccess" value="{!partnerCon.Has_Akamai_University_Access__c}" />
				 <!-- SFDC-837 -->
				 <apex:inputField id="ConciergeAccess" value="{!partnerUser.Has_Partner_Concierge_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner) && isAccountConcierge}"/>
				 <apex:inputField id="LeadAccess" value="{!partnerUser.Has_Partner_Lead_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:inputField id="StartTrialAccess" value="{!partnerUser.Has_Start_Trial_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:inputField id="ViewTrialAccess" value="{!partnerUser.Has_View_Trial_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
                 <apex:inputField id="ViewTableauAccess" value="{!partnerUser.Has_Portal_Tableau_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>

			</apex:pageBlockSection>
			<apex:pageBlockSection rendered="{!isViewMode}">
				<!-- CR 2839539: rsharma - added role and profile to be displayed -->
				 <apex:pageBlockSectionItem >
                    Role
                    <apex:outputText value="{!partnerUser.UserRole.Name}"/>
                </apex:pageBlockSectionItem>
                
                
                <apex:pageBlockSectionItem >
                    Profile
                    <apex:outputText value=" {!partnerUser.Profile.Name}"/>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem />
                <apex:pageBlockSectionItem />
                <!-- CR 2839539: End -->
				 <apex:outputField id="MDFAccess" value="{!partnerUser.Has_MDF_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:outputField id="OpportunityAccess" value="{!partnerUser.Has_DealRegistration_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:outputField id="PartnerPlansAccess" value="{!partnerUser.Has_PartnerPlans_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:outputField id="PartnerCertificationAccess" value="{!partnerUser.Has_PartnerCertification_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:outputField id="ViewPricingDetails" value="{!partnerUser.View_Pricing_Details__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}" />
				 <apex:outputField id="POAAccess" value="{!partnerUser.Can_Accept_POA__c}" />
				 <apex:outputField id="ViewContentInPortal" value="{!partnerUser.Has_view_content_in_portals__c}" />
				 <apex:outputField id="AUAccess" value="{!partnerCon.Has_Akamai_University_Access__c}" />
				 <!-- SFDC-837 -->
				 <apex:outputField id="ConciergeAccess" value="{!partnerUser.Has_Partner_Concierge_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner) && isAccountConcierge}"/>
				 <apex:outputField id="LeadAccess" value="{!partnerUser.Has_Partner_Lead_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:outputField id="StartTrialAccessOutput" value="{!partnerUser.Has_Start_Trial_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
				 <apex:outputField id="ViewTrialAccessOutput" value="{!partnerUser.Has_View_Trial_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>
                 <apex:outputField id="ViewTableauAccess" value="{!partnerUser.Has_Portal_Tableau_Access__c}" rendered="{!$User.Id!=partnerUser.Id && Not(isSRAPartner)}"/>

			</apex:pageBlockSection>
			
			<apex:pageBlockButtons >
				 <apex:commandButton value="Update Access" action="{!updateAccess}" rendered="{!NOT(isViewMode)}" rerender="UpdateAccessBlock" status="btnClickStatus" oncomplete="updateContactJS()"/>
				 <apex:commandButton value="Edit" action="{!edit}" rendered="{!isViewMode}" rerender="UpdateAccessBlock" status="btnClickStatus"/>
				 <apex:commandButton value="Cancel" action="{!cancel}" status="btnClickStatus" rerender="UpdateAccessBlock"/>				 
		    </apex:pageBlockButtons>
		</apex:pageBlock>
	  <apex:actionFunction action="{!updateContact}" name="updateContactJS" rerender="UpdateAccessBlock" status="btnClickStatus"/>
	</apex:form>
</apex:page>