<apex:page name="TransferOpptyToPartner" id="Mainpage" standardController="Opportunity" extensions="TransferOpptyToPartnerController" >
<apex:form id="myform" >
<apex:pageMessages escape="false"/>
 <apex:actionStatus id="Opportunitystatus">
    <apex:facet name="start">
    <c:enhancedActionStatus BackColor="#ffffff" borderColor="#ffffff" borderSize="2" height="50px" width="150px" ImageUrl="/changemgmt/img/spinner24.gif" Message="Loading..." messageStyle="color:darkred;font-size:11pt;font-weight:bold;"/>
    </apex:facet>   
    </apex:actionStatus>
<apex:sectionHeader title="Opportunity" subtitle="{!Opportunity.Name}"/>   
<apex:commandLink action="{!cancel}" value=" Â« Back to Opportunity"/>
<apex:pageBlock id="mypageblock" rendered="{!!HasError}" title="Select Partner">
 <apex:PageblockTable id="myPageblockTable" value="{!userlist}" var="usr" width="100%"  >
 <apex:column id="mycolumn" width="30px" >
 <apex:actionSupport event="onclick" rerender="myform" status="Opportunitystatus" action="{!setvalue}" >
    <apex:Param name="pid" value="{!usr.userid}" />
 </apex:actionSupport>
 <apex:outputPanel rendered="{!if(pid==usr.userid,TRUE,FALSE)}" >
 <input type="radio" checked="true" />
 </apex:outputPanel>
 <apex:outputPanel rendered="{!pid!=usr.userid}" >
 <input type="radio" />
 </apex:outputPanel>
  </apex:column>    
  <apex:column >
              <apex:facet name="header"><b>Partner Name</b></apex:facet>
                {!usr.user.Name}
   </apex:column>
   <apex:column >
              <apex:facet name="header"><b>Partner Role</b></apex:facet>
                {!usr.user.UserRole.Name}
   </apex:column>
  </apex:PageblockTable>
  <apex:pageBlockButtons location="bottom">
  <apex:commandButton value="Transfer To Partner" action="{!transferToPartner}" rerender="myform" status="Opportunitystatus" />
  <apex:commandButton value="Add Partner Users To Sales Team" action="{!redirectToAddPartnerPage}" rerender="myform" status="Opportunitystatus" />
  </apex:pageBlockButtons>
  </apex:pageBlock>
 </apex:form>
</apex:page>