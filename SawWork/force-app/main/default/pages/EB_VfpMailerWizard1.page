<!--
Author: Jayalakshmi A & Sharath K
Description: First page of the Mailer wizard which gives the option for selecting the type of notification and search.
11/14/2011: CR 1378172 CNotify: Superficial Fix, Accepting Issue Details & SI# in the first step of Mailer Creation
07/06/2012: CR 1766963 CNotify: Q32012 Email Template Help Text next to or below the Email Template field in the Mailer Creation Wizard
12/07/2013: CR 2277920 CNotify: Swap Impacted Region and Additional Issue description fields in the Mailer Creation Wizard 
-->

<apex:page controller="EB_CtrlMailerWizard" showHeader="true" sidebar="false" standardStylesheets="true">
<script>
var link1;
function showPreview()
{
var link='{!$Component.myform.block.MailerDefailtValues.pageblockSectionitem.PreviewTemplate}';
link1=link;
var x = document.getElementById(link);
x.style.display='';
}
</script> 
<apex:pageMessages /> 
    <apex:form id="myform"> 
        <apex:pageBlock id="block" >
        <table cellspacing="0px" cellpadding = "10px" valign="top">
             <tr valign="top">
                <th style="font-size:150%;border-color:#E3E4FA;border-width:1px;border-style:none solid none none;">Service Incident Notification</th>
                <th style="font-size:150%;">Mailer Default Values</th>
             </tr>
             <tr valign="top">
                <td width="40%" style="border-color:#E3E4FA;border-width:1px;border-style:none solid none none;">
                    <table cellpadding="10px" valign="top">
                        <tr>
                            <th>
                                Type of Notification:
                            </th>
                        </tr>
                        <tr>
                            <td>
                                <apex:selectList value="{!mailchoice}" size="1">
                                    <apex:selectOptions value="{!mailitems}"/>
                                </apex:selectList>
                                <apex:selectList value="{!choice}" size="1" style="visibility:hidden;">
                                    <apex:selectOptions value="{!items}"/>
                                </apex:selectList>
                            </td>
                        </tr>
                        <tr>
                            <th>
                                Search By:
                            </th>
                        </tr>
                        <tr>
                            <td>
                                <apex:selectRadio value="{!radioChoice}" required="true" layout="pageDirection">
                                    <apex:selectOptions value="{!radioItems}"/>
                                </apex:selectRadio>
                            </td>
                        </tr>
                        <tr>
                            <!--th>
                                Chatter Notification :
                            </th-->
                        </tr>
                        <tr>
                            <td align="left">
                               <!--Start of changes by SAJHA for CR 1814836 - CNotify: Notify Account Teams Pre-Requisite text needs to be modified --> 
                                <!--Notify Account Teams via Email and Chatter * : <apex:inputField value="{!newtoken.EB_ChatterNotification__c}" style="text-align:left;text-indent:inherit" label="chatter" rendered="true"/-->
                            <p>
                            
                                <b>*Pre-requisites for Chatter Notification:</b><br/>  All members of account teams need to subscribe for chatter notifications by opting in for the chatter notifications by following his/her customer.  
                            </p>
                            <p>
                            <b>Limitations :</b>
                            <br/>
                             1) As Technical Support - Primary and Technical Support - Secondary is not part of the account team data in Salesforce, they have been excluded and hence out of scope.<br/> <br/>
                             2) As batch logic for sending mails is not yet incorporated for Account Team notification, we notice the account team notification fails for high volume mailers.
                            </p>
                            <!--END OF CHANGES by SAJHA for CR 1814836-->
                            </td>
                            
                        </tr>
                    </table>
               </td>
                <td align="top" width="60%">
                    <apex:pageBlockSection id="MailerDefailtValues" rendered="{!showDefaultTemplate}" columns="1">
                       <apex:inputField value="{!newtoken.EB_TokenSINumber__c}" style="text-align:left;text-indent:inherit"/>
                       <!--Vineet CR 1766963 CNotify: Q32012 Email Template Help Text next to or below the Email Template field in the Mailer Creation Wizard -->
                       <apex:outputLabel style="font-size:80%;color:red;">Please type in a minimum of 3 letters in Email Template field </apex:outputLabel>
                       <apex:pageBlockSectionItem id="pageblockSectionitem" >
                       <apex:outputLabel >Email Template</apex:outputLabel>
                       <apex:outputPanel >
                       <apex:inputField value="{!newtoken.EB_TokenEmailTemplate__c}" onclick="showPreview();"  style="text-align:left;text-indent:inherit"/>
                       <apex:commandlink id="PreviewTemplate" value="[Preview template]" action="{!goToPreviewPage}" target="_blank" style="text-align:right;font-size:90%;color:Blue;display:none;"/>
                       </apex:outputPanel>
                       </apex:pageBlockSectionItem>
                       
                       
                       
                       <apex:inputField value="{!newtoken.EB_TokenStartDate__c}" style="text-align:left;text-indent:inherit"/>
                      
                       <apex:inputField value="{!newtoken.EB_TokenEndDate__c}" style="text-align:left;text-indent:inherit"/>
                       <!--Sonia CR 2277920 CNotify: Swap Impacted Region and Additional Issue description fields in the Mailer Creation Wizard --> 
                       <apex:inputField value="{!newtoken.EB_TokenAdditionalReason__c}" style="text-align:left;text-indent:inherit"/>
                       
                       <apex:inputField value="{!newtoken.EB_TokenImpactedProduct__c}" style="text-align:left;text-indent:inherit"/>
                      
                       <a href="{!AccountProductPage}" target="_blank" style="font-family: arial;  font-size: 9px; font-weight: bold; color: blue;">[Product list]</a>
                      
                       <!--<apex:commandLink value="[Products List]" action="{!AccountProductPage}"  style="font-family: arial;  font-size: 9px; font-weight: bold; color: blue;"/>-->
                       <apex:inputField value="{!newtoken.EB_TokenIssueReason__c}" style="text-align:left;text-indent:inherit"/>
                      
                        <apex:inputField value="{!newtoken.EB_TokenImpactedRegion__c}" style="text-align:left;text-indent:inherit"/>
                       
                    </apex:pageBlockSection> 
                </td>
            </tr>
        </table>
        <hr width="100%" size="3" color="gray" align="left" /> 
        <p align="left">
           <!-- 3/25/2011 - CR 845804 CNotify: User should be able to pick the default Email Template during Mailer creation -->
           <apex:commandButton value="Next" action="{!goToSearchPage}" style="font-size:125%;font-weight:bold;"/>
        </p>
        </apex:pageBlock>      
    </apex:form>
</apex:page>