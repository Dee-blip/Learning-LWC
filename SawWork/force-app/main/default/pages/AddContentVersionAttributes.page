<apex:page controller="AddContentVersionAttributeController">
<style>
.fewerMore { display: none;}
    .myButton {
        background: none !important;
        text-decoration: underline !important;
        border: none !important;
        color: black !important;
        cursor: pointer !important;
    }
</style>
 <apex:form >
 <apex:outputPanel id="errorMessagePanel">
            <apex:pageMessages />
        </apex:outputPanel>
        <apex:actionStatus id="btnClickStatus">
            <apex:facet name="start">
                <c:enhancedActionStatus BackColor="#ffffff" borderColor="#ffffff" borderSize="2" height="50px" width="150px" ImageUrl="/changemgmt/img/spinner24.gif" Message="Loading..." messageStyle="color:darkred;font-size:11pt;font-weight:bold;"/>
            </apex:facet>
        </apex:actionStatus>
        <apex:outputLink value="/sfc/#version/{!cv.Id}" id="theLink">Back to the File</apex:outputLink>

        <apex:outputPanel id="newAttribute">
        <apex:pageBlock title="Create New Attribute" tabStyle="Opportunity" rendered="{!createMode}" mode="edit">
            <apex:pageBlockSection columns="2" collapsible="false">
                    <apex:outputField value="{!newAttr.ContentVersionId__c}" id="theCV" label="Content Version"/>
                    <apex:inputField value="{!newAttr.Name}" id="theName" label="Name"/>
                    <apex:inputField value="{!newAttr.Attribute_Name__c}" id="theAttrName" label="Attribute Name"/>
                    <apex:inputField value="{!newAttr.Attribute_Value__c}" id="theValue" label="Attribute Value"/>
                    <apex:inputField value="{!newAttr.Partner_Account__c}" id="theAccount" label="Partner Account"/>
            </apex:pageBlockSection>
            <apex:pageBlockButtons location="Bottom">
                <apex:commandButton action="{!saveAttribute}" value="Save"
                    status="btnClickStatus" reRender="attributeList,newAttribute,errorMessagePanel" />
                <apex:commandButton action="{!cancelCreation}" value="Cancel"
                    immediate="true" status="btnClickStatus" reRender="attributeList,newAttribute,errorMessagePanel"/>
            </apex:pageBlockButtons>
     </apex:pageBlock>
     </apex:outputPanel>

     <apex:pageblock id="attributeList" title="{!cv.Title}">
 <apex:pageblocktable value="{!attributes}" var="attr" rendered="{!NOT(ISNULL(attributes))}">
  <apex:column >
             <apex:facet name="header">Action</apex:facet>
                        
             <apex:commandButton value="Edit" action="{!editAttribute}" status="btnClickStatus" rerender="newAttribute,errorMessagePanel" styleClass="myButton">
             <apex:param name="attr_id" value="{!attr.id}"/>
             </apex:commandButton>
  &nbsp; | &nbsp;   <apex:commandButton action="{!deleteAttribute}" value="Delete" status="btnClickStatus" rerender="attributeList,errorMessagePanel" styleClass="myButton">
  <apex:param name="attr_id" value="{!attr.id}"/>
 </apex:commandButton>
 </apex:column>
 <apex:column value="{!attr.Name}"/>
 <apex:column value="{!attr.Attribute_Name__c}"/>
 <apex:column value="{!attr.Attribute_Value__c}"/>
 <apex:column value="{!attr.Partner_Account__c}"/>
 </apex:pageblocktable>
 <apex:pageblockButtons >
 <apex:commandButton value="New" action="{!addNewAttribute}" rerender="newAttribute, errorMessagePanel" status="btnClickStatus"/>
 </apex:pageblockButtons>
 </apex:pageblock>
 </apex:form>
</apex:page>