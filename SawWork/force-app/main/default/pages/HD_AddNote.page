<apex:page standardStylesheets="true" showHeader="false" sidebar="false" controller="HD_AddNoteController" cache="false" language="{!$CurrentPage.parameters.lang}">
  <head>
  <script type="text/javascript">
            function closeWin(){ 
                var successElement = document.getElementById('{!$Component.form.success}');
                if(successElement.value=='true') {
                    window.close();   
                }          
            }
    </script>
  </head>
  <body>
        <apex:form id="form">
            <apex:pageMessages id="msgQ"/>
            <apex:inputHidden id="success" value="{!success}"/>
            <apex:pageBlock >                
                    <apex:pageblockSection columns="1" title="Add Note" collapsible="false">
                    <apex:pageBlockSectionItem >
                         <apex:inputTextarea value="{!currentNote.BMCServiceDesk__note__c}" style="width:200%;height: 100px;" required="true" /><p/>
                         </apex:pageBlockSectionItem>
                         
                         <apex:inputText id="duration" value="{!currentNote.BMCServiceDesk__duration__c}" label="Time Spent (HH:MM)" style="margin-left:0px"  required="false"/><p/>
                         
                    </apex:pageblockSection>    
            </apex:pageBlock>
            <apex:panelGrid columns="2" style="margin-left:auto; margin-right:auto">
                <apex:commandButton value="Save Note" action="{!saveNote}" oncomplete="closeWin();" styleClass="btn btn-default" reRender="success,msgQ"/>
                <apex:commandButton value="Cancel" action="{!cancel}" styleClass="btn btn-default" immediate="true"/>
            </apex:panelGrid>
        </apex:form>
    </body>
</apex:page>