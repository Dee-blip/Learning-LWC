<apex:page standardController="PACE_Program__c" extensions="PACE_Program2Controller" title="Program Overview" label="Program" >
    <style>
        
    .listHoverLinks{
            display: none;
    }

    .theTabPanel{ margin-top:0.75em !important;
    background-color:#8e9dbe;
    padding-top:2px}
    
     .hideClass {
        display: none;
         border-style: hidden;
    }
    .columnClass {
       border-style: hidden;
       }
    .rowClass {
        border-style: hidden;
       }
    .theTabPanel img{ margin:0}
    
    .activeTab{ background-image:url(/img/tab/miniTab_on.gif);
    border:1px solid #747e96;
    border-bottom:2px solid #fff;
    font-weight:bold}
    
    .inactiveTab{ background:url(/img/tab/miniTab_off.gif);
    border:1px solid #747e96;
    border-bottom:2px solid #8e9dbe;
    font-weight:bold}
    
    .tabContent{ background:#fff}
    
    .dr-tbpnl-cntnt{ font-size:.91em}
    
    .apexp .totalRow{ background-color:#FFFFFF;
    border-bottom:medium none;
    border-top:1px solid #E3DEB8;
    padding-bottom:10px;
    padding-top:10px}
    
    .classDefTypeHeader{ font-size:91%;
    font-weight:bold;
    margin-bottom:2px;
    margin-top:8px;
    overflow:hidden;
    padding:2px 2px 2px 5px;
    background-color:#EBECF2;
    color:#333333}
    
    .classDefBody{ padding-top:12px;
    padding-right:12px;
    padding-left:12px;
    padding-bottom:0}
    
    .classDefBodyName{ padding-bottom:8px}
    
    .acSizeLimitMessageWrapper .message{ margin-bottom:15px}
    
    .apexClassDetailTabPanelWrapper{ margin-top:20px}
    
    .classDef .codeGroupHeader .codeGroupHeaderSig{ font-size:1.45em;
    font-weight:bold}
    
    .customSettingEditWrapper .requiredInput,.editCSDataPageWrapper .requiredInput{ display:inline-block}
    
    .manageSettingDefaultOrgValuesWrapper{ margin-top:10px;
    margin-bottom:30px}
    
    body .theTabPanel{ background-color:transparent}
    
    body .rich-tab-bottom-line,body .rich-tabpanel-content,body .rich-tabpanel-content-position,body .rich-tabhdr-side-cell,body .rich-tab-header,body .rich-tab-active,body .dr-tbpnl-tb-dsbl,body .dr-tbpnl-tb-dsbld,body .rich-tab-inactive,body .dr-tbpnl-tb-sel,body .rich-tabhdr-side-border,body .dr-tbpnl-tbcell-dsbld,body .rich-tabhdr-cell-inactive{ border:0 none;
    padding:0;
    background:transparent none;
    font-size:1em}
    
    body .rich-tabpanel-content{ border:1px solid #D4DADC;
    border-top:3px solid #747E96;
    -moz-border-radius:4px;
    -webkit-border-radius:4px;
    background-color:#F8F8F8;
    padding:6px}
    
    body .activeTab,body .inactiveTab{ font-weight:bold;
    color:#333;
    text-decoration:none}
    
    body .rich-tabhdr-cell-active>table[id$="shifted"] td.rich-tabhdr-side-cell{ padding-right:9px}
    
    body .rich-tabhdr-cell-inactive>table[id$="shifted"] td.rich-tabhdr-side-cell{ padding-right:4px}
    
    body .rich-tabhdr-cell-active>table[id$="shifted"] td.rich-tabhdr-side-cell,body .rich-tabhdr-cell-inactive>table[id$="shifted"] td.rich-tabhdr-side-cell,body .rich-tabhdr-cell-active>table[id$="shifted"] td.rich-tabhdr-side-cell td.rich-tab-active,body .rich-tabhdr-cell-inactive>table[id$="shifted"] td.rich-tabhdr-side-cell td.rich-tab-inactive{ background:transparent url('/img/alohaSkin/subtab_sprite.png') no-repeat right -299px !important;
    cursor:pointer}
    
    body .rich-tabhdr-cell-active>table[id$="shifted"] td.rich-tabhdr-side-cell{ background-position:right -100px !important}
    
    body .rich-tabhdr-cell-active>table[id$="shifted"] td.rich-tabhdr-side-cell td.rich-tab-active{ padding:8px 2px 4px 11px;
    background-position:left top !important}
    
    body .rich-tabhdr-cell-inactive>table[id$="shifted"] td.rich-tabhdr-side-cell td.rich-tab-inactive{ padding:8px 4px 4px 8px;
    background-position:left -199px !important}
    
    body table[id$="connectionTab_shifted"],body table[id$="apexClassTab_shifted"],body table[id$="classCodeTab_shifted"],body table[id$="apexTriggerTab_shifted"],body table[id$="emailContentTab_shifted"],body table[id$="visualforceMarkupTab_shifted"]{ margin-left:1px}
    
    body table[id$="templateTab_shifted"],body table[id$="versionSettingsTab_shifted"],body table[id$="classDocTab_shifted"],body table[id$="traceSettingsTab_shifted"]{ margin-left:-6px}
    
    body .rich-tabhdr-cell-active>table[id$="shifted"]{ top:0 !important;
    margin-bottom:-3px;
    height:29px !important;
    z-index:1}
    
    body .rich-tabhdr-cell-inactive>table[id$="shifted"]{ height:24px !important}
    
    body.setupTab a.acDownloadLink{ text-decoration:none;
    padding:3px 5px 4px}
    
    body.setupTab a.acDownloadLink:hover{ color:#333;
    text-decoration:none}
    
    .compRefLink{ margin-left:5px}
    
    .newSpacer{ padding:5px}
    
    .vfPageDetailWrapper{ margin-top:15px;
    margin-bottom:15px}
    
    body .rich-tabpanel-content {
    background-color: #FFFFFF;
    }
    
    .primaryPalette {
    background-color: #CC9933 !important;
    border-color: #CC9933;
    }
        
 .headerRow .headerStyle1{width:25.00%}
 .headerRow .headerStyle2{width:15%}
 .headerRow .headerStyle3{width:47%}
 .headerRow .headerStyle4{width:5%}
 .headerRow .headerStyle5{width:7%}

    </style>
    
    <style type="text/css">
        .custPopup{
            background-color: white;
            border-width: 2px;
            border-style: solid;
            z-index: 9999;
            left: 50%;
            padding:10px;
            position: absolute;
            width: 500px;
            margin-left: -250px;
            top:100px;
        }
        .popupBackground{
            background-color:black;
            opacity: 0.20;
            filter: alpha(opacity = 20);
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 9998;
        }

    </style>
    
    
   
   
<script type="text/javascript">


var newWin;
var tabName;
var programID;
function displaypopup(stepID,tabname,programID)
{
tabName = tabname;
programID = programID
newWin = window.open("/apex/PACE_UploadDocument_Program?id="+stepID+"&tabname="+tabname+"&programId="+programID,"","resizable=yes,scrollbars=yes,width=610,height=200,toolbar=no");

newWin.focus();
return false;
}

function setSelectedTabOnController() {
    selectTabActionFunction(getSelectedTabName());
}

function confirmdel(){
if(confirm('Are you sure you want to delete?')){
return true;
}
return false;
}
</script>
        <chatter:feedWithFollowers entityId="{!programObj.Id}"/>

<!-- 
  <apex:form >
               <div align="center">
                    <apex:commandButton value="Upcoming Events" action="{!showPopup}" rerender="tstpopup" style="align:center"/>
                 </div>               
 
                    <apex:outputPanel id="tstpopup">
                    <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopUp}"/>
                    <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}">
                    <apex:pageBlock >
                        PRB Review<br/>
                        <apex:pageBlockTable value="{!upcomingPRB}" var="prb">
                        <apex:column headerValue="Name" value="{!prb.Name}"/>
                        </apex:pageBlockTable>
                        
                        <br/>
                        <br/>
                        Exception Review<br/>
                        
                        <apex:pageBlockTable value="{!upcomingException}" var="exc">
                        <apex:column headerValue="Name" value="{!exc.Name}"/>
                        </apex:pageBlockTable>
                        </apex:pageBlock>
                        <div align="center">
                    <apex:commandButton value="Close" action="{!closePopup}" rerender="tstpopup"/>
                    </div>
                    </apex:outputPanel>
                    </apex:outputPanel>
 
                </apex:form> -->
      <br/><br/>
      
           
    <apex:tabPanel switchType="client"  value="{!selectedTab}"  id="ProgramTabPanel"   activeTabClass="activeTab primaryPalette" inactiveTabClass="inactiveTab" > 
<!-- {!TabInFocus} -->
     <!--   <apex:tab label="1. Concept" name="concept" id="concept_tab">
            <apex:detail subject="{!conceptId}" relatedList="false" title="false" inlineEdit="true" >
            <apex:relatedList list="Contingencies__r" subject="{!conceptId}"/>
            </apex:detail>
           
           
       <apex:form >

        
               <apex:pageBlock >
                    <apex:pageBlockTable value="{!dummyList}" var="dummy"  border="0px">
                         <apex:column headerValue="Step Name"  headerClass="headerStyle1"></apex:column>
                         <apex:column headerValue="Title" headerClass="headerStyle2"></apex:column>
                        <apex:column headerValue="Link" headerClass="headerStyle3"></apex:column>
                        <apex:column headerValue="Remove" headerClass="headerStyle4"></apex:column>
                        <apex:column headerValue="Upload" headerClass="headerStyle5"></apex:column>
                   </apex:pageBlockTable>
                   
                      <apex:pageBlockTable value="{!conceptstepLinkClassList}" var="clinklist" title="Links" headerClass="hideClass" columnClasses="columnClass" rowClasses="rowClass" width="100%">
                         <apex:column width="25%" > 
                              <apex:outputLabel id="Elink">{!clinklist.stepToLinkObject.Name}</apex:outputLabel>
                         </apex:column>
                         <apex:column width="68%">
                         <apex:pageBlockTable value="{!clinklist.documentLinkList}" var="doc" headerClass="hideClass" columnClasses="columnClass" rowClasses="rowClass" width="68%">
                              <apex:column width="15%" >
                                  <apex:outputLabel id="Elink">{!doc.Name}</apex:outputLabel>
                              </apex:column>
                              <apex:column value="{!doc.Document_Address__c}" width="49%"/>
                              <apex:column width="3%">
                                   <apex:commandLink value="Remove" action="{!removeLinkMethod}" onclick="if(!confirmdel()) return false;" >
                                       <apex:param name="linkId" value="{!doc.Id}" assignTo="{!removedocumentLinkId}"/>
                                       <apex:param name="tabId" value="concept" assignTo="{!removedFromTab}"/>
                                   </apex:commandLink>
                               </apex:column>
                         </apex:pageBlockTable>    
                         </apex:column>
                         <apex:column width="7%">
                           <apex:commandLink value="Add Link" onclick="return displaypopup('{!clinklist.stepToLinkObject.Id}','concept','{!pageID2}'); return false;" immediate="true"/>
                         </apex:column>
                         
                      </apex:pageBlockTable>
                      
               </apex:pageBlock> 
                <apex:pageBlock title="Concept History">
                     <apex:pageBlockTable value="{!conceptHistoryList}" var="h">
                        <apex:column headerValue="Date"  value="{!h.thedate}"/>
                        <apex:column headerValue="User" value="{!h.who}"/> 
                        <apex:column headerValue="Action"><apex:outputText escape="false" value="{!h.action}"/></apex:column>
                     </apex:pageBlockTable>
                     
                </apex:pageBlock> 
           </apex:form> 
        </apex:tab>-->
        
        <apex:tab label="Overview" name="program" id="program_tab">
            <apex:detail subject="{!programObj.Id}" relatedList="false" inlineEdit="true"  />
             <apex:relatedList list="Contingency__r" subject="{!programObj.Id}"/> 
            <apex:pageBlock title="Program History">
                     <apex:pageBlockTable value="{!programHistoryList}" var="h">
                        <apex:column headerValue="Date"  value="{!h.thedate}"/>
                        <apex:column headerValue="User" value="{!h.who}"/> 
                        <apex:column headerValue="Action"><apex:outputText escape="false" value="{!h.action}"/></apex:column>
                     </apex:pageBlockTable>
                     
                </apex:pageBlock> 

        </apex:tab>
        
         <apex:tab label="1. Concept" name="concept" id="con_tab"  >
            <apex:detail subject="{!conceptId}" relatedList="true" title="false" inlineEdit="true" > 
          <!--  <apex:relatedList list="Contingency__r" subject="{!definitionId}"/> -->
            </apex:detail>
            <apex:form >
                <apex:pageBlock title="Steps" >
                  
                      <apex:pageBlockTable value="{!dummyList}" var="dummy"  border="0px">
                         <apex:column headerValue="Step Name"  headerClass="headerStyle1"></apex:column>
                         <apex:column headerValue="Title" headerClass="headerStyle2"></apex:column>
                        <apex:column headerValue="Link" headerClass="headerStyle3"></apex:column>
                        <apex:column headerValue="Remove" headerClass="headerStyle4"></apex:column>
                        <apex:column headerValue="Upload" headerClass="headerStyle5"></apex:column>
                   </apex:pageBlockTable>
                   
                      <apex:pageBlockTable value="{!conceptstepLinkClassList}" var="clinklist" title="Links" headerClass="hideClass" columnClasses="columnClass" rowClasses="rowClass" width="100%">
                         <apex:column width="25%" > 
                              <apex:outputLabel id="Elink">{!clinklist.stepToLinkObject.Name}</apex:outputLabel>
                         </apex:column>
                         <apex:column width="68%">
                         <apex:pageBlockTable value="{!clinklist.documentLinkList}" var="doc" headerClass="hideClass" columnClasses="columnClass" rowClasses="rowClass" width="68%">
                              <apex:column width="15%" >
                                  <apex:outputLabel id="Elink">{!doc.Name}</apex:outputLabel>
                              </apex:column>
                            <!--  <apex:column value="{!doc.Document_Address__c}" width="49%"/>-->
                            <apex:column value="{!doc.Document_URL__c}" width="49%"/>
                              <apex:column width="3%">
                                   <apex:commandLink value="Remove" action="{!removeLinkMethod}" onclick="if(!confirmdel()) return false;" >
                                       <apex:param name="linkId" value="{!doc.Id}" assignTo="{!removedocumentLinkId}"/>
                                       <apex:param name="tabId" value="concept" assignTo="{!removedFromTab}"/>
                                   </apex:commandLink>
                               </apex:column>
                         </apex:pageBlockTable>    
                         </apex:column>
                         <apex:column width="7%">
                           <apex:commandLink value="Add Link" onclick="return displaypopup('{!clinklist.stepToLinkObject.Id}','concept','{!pageID2}'); return false;" immediate="true"/>
                         </apex:column>
                         
                      </apex:pageBlockTable>
                                            
               </apex:pageBlock>
                <apex:pageBlock title="Concept History">
                    <apex:pageBlockTable value="{!conceptHistoryList}" var="h">
                        <apex:column headerValue="Date"  value="{!h.thedate}"/>
                        <apex:column headerValue="User" value="{!h.who}"/> 
                        <apex:column headerValue="Action"><apex:outputText escape="false" value="{!h.action}"/></apex:column>
                     </apex:pageBlockTable>
                     
                </apex:pageBlock> 
           </apex:form>       
             
        </apex:tab>
        

        

        <apex:tab label="2. Definition" name="definition" id="def_tab"  >
            <apex:detail subject="{!definitionId}" relatedList="true" title="false" inlineEdit="true" > 
          <!--  <apex:relatedList list="Contingency__r" subject="{!definitionId}"/> -->
            </apex:detail>
            <apex:form >
                <apex:pageBlock title="Steps" >
                  
                      <apex:pageBlockTable value="{!dummyList}" var="dummy"  border="0px">
                         <apex:column headerValue="Step Name"  headerClass="headerStyle1"></apex:column>
                         <apex:column headerValue="Title" headerClass="headerStyle2"></apex:column>
                        <apex:column headerValue="Link" headerClass="headerStyle3"></apex:column>
                        <apex:column headerValue="Remove" headerClass="headerStyle4"></apex:column>
                        <apex:column headerValue="Upload" headerClass="headerStyle5"></apex:column>
                   </apex:pageBlockTable>
                   
                      <apex:pageBlockTable value="{!defstepLinkClassList}" var="dlinklist" title="Links" headerClass="hideClass" columnClasses="columnClass" rowClasses="rowClass">
                         <apex:column width="25%" >
                                  <apex:outputLabel id="Elink">{!dlinklist.stepToLinkObject.Name}</apex:outputLabel>
                              </apex:column>
                         
                         
                         <apex:column width="68%">
                         <apex:pageBlockTable value="{!dlinklist.documentLinkList}" var="doc" headerClass="hideClass" columnClasses="columnClass" rowClasses="rowClass" width="68%">
                              <apex:column width="15%" >
                                  <apex:outputLabel id="Elink">{!doc.Name}</apex:outputLabel>
                              </apex:column>
                             <!-- <apex:column value="{!doc.Document_Address__c}"  width="49%"/>-->
                              <apex:column value="{!doc.Document_URL__c}"  width="49%"/>
                               
                               
                              
                              <!--<apex:column >
                                 <a href="{!doc.Document_Address__c}"> <apex:outputText value="{!doc.Document_Address__c}"/></a>
                              </apex:column>-->
                              <apex:column width="3%">
                                   <apex:commandLink value="Remove" action="{!removeLinkMethod}" onclick="if(!confirmdel()) return false;" >
                                       <apex:param name="linkId" value="{!doc.Id}" assignTo="{!removedocumentLinkId}"/>
                                       <apex:param name="tabId" value="definition" assignTo="{!removedFromTab}"/>
                                   </apex:commandLink>
                               </apex:column>
                         </apex:pageBlockTable>    
                         </apex:column>
                         <apex:column width="7%">
                           <apex:commandLink value="Add Link" onclick="return displaypopup('{!dlinklist.stepToLinkObject.Id}','definition','{!pageID2}'); return false;" immediate="true"/>
                         </apex:column>
                      </apex:pageBlockTable>
                      
               </apex:pageBlock>
                <apex:pageBlock title="Definition History">
                     <apex:pageBlockTable value="{!definitionHistoryList}" var="h">
                        <apex:column headerValue="Date"  value="{!h.thedate}"/>
                        <apex:column headerValue="User" value="{!h.who}"/> 
                        <apex:column headerValue="Action"><apex:outputText escape="false" value="{!h.action}"/></apex:column>
                     </apex:pageBlockTable>
                     
                </apex:pageBlock> 
           </apex:form>       
             
        </apex:tab>

        <apex:tab label="3. Development" name="development" id="dev_tab">
            <apex:detail subject="{!developmentId}" relatedList="true" title="false" inlineEdit="true"/>
            <apex:form >
                <apex:pageBlock title="Steps" >
                     <apex:pageBlockTable value="{!dummyList}" var="dummy"  border="0px">
                        <apex:column headerValue="Step Name" headerClass="headerStyle1"></apex:column>
                        <apex:column headerValue="Title"     headerClass="headerStyle2"></apex:column>
                        <apex:column headerValue="Link"      headerClass="headerStyle3"></apex:column>
                        <apex:column headerValue="Remove" headerClass="headerStyle4"></apex:column>
                        <apex:column headerValue="Upload" headerClass="headerStyle5"></apex:column>
                    </apex:pageBlockTable>
                    <apex:pageBlockTable value="{!devstepLinkClassList}" var="dvlinklist" title="Links" headerClass="hideClass"  border="0px">
                        <apex:column width="25%" > 
                                <apex:outputLabel id="Elink">{!dvlinklist.stepToLinkObject.Name}</apex:outputLabel>
                        </apex:column>
                        <apex:column width="68%">
                            <apex:pageBlockTable value="{!dvlinklist.documentLinkList}" var="doc" headerClass="hideClass" border="0px" width="68%">
                                <apex:column width="15%" >
                                    <apex:outputLabel id="Elink">{!doc.Name}</apex:outputLabel>
                                </apex:column>
                               <!-- <apex:column value="{!doc.Document_Address__c}" width="49%"/>-->
                               <apex:column value="{!doc.Document_URL__c}" width="49%"/>
                                <apex:column width="3%">
                                    <apex:commandLink value="Remove" action="{!removeLinkMethod}" onclick="if(!confirmdel()) return false;" >
                                        <apex:param name="linkId" value="{!doc.Id}" assignTo="{!removedocumentLinkId}"/>
                                       <apex:param name="tabId" value="development" assignTo="{!removedFromTab}"/>
                                    </apex:commandLink>
                                </apex:column>
                             </apex:pageBlockTable>    
                         </apex:column>
                         <apex:column width="7%">
                             <apex:commandLink value="Add Link" onclick="return displaypopup('{!dvlinklist.stepToLinkObject.Id}','development','{!pageID2}'); return false;" immediate="true"/>
                         </apex:column>
                      </apex:pageBlockTable>
                   </apex:pageBlock>
               
                <apex:pageBlock title="Development History">
                     <apex:pageBlockTable value="{!developmentHistoryList}" var="h">
                        <apex:column headerValue="Date"  value="{!h.thedate}"/>
                        <apex:column headerValue="User" value="{!h.who}"/> 
                        <apex:column headerValue="Action"><apex:outputText escape="false" value="{!h.action}"/></apex:column>
                     </apex:pageBlockTable>
                </apex:pageBlock> 
           </apex:form>
            
        </apex:tab>

        <apex:tab label="4. Launch" name="launch" id="launch_tab">
            <apex:detail subject="{!launchId}" relatedList="true" title="false" inlineEdit="true" />
            <apex:form >
                <apex:pageBlock title="Steps" >
                      <apex:pageBlockTable value="{!dummyList}" var="dummy"  border="0px">
                         <apex:column headerValue="Step Name"  headerClass="headerStyle1"></apex:column>
                         <apex:column headerValue="Title" headerClass="headerStyle2"></apex:column>
                        <apex:column headerValue="Link" headerClass="headerStyle3"></apex:column>
                        <apex:column headerValue="Remove" headerClass="headerStyle4"></apex:column>
                        <apex:column headerValue="Upload" headerClass="headerStyle5"></apex:column>
                   </apex:pageBlockTable>
                      <apex:pageBlockTable value="{!launchstepLinkClassList}" var="llinklist" title="Links" headerClass="hideClass"  border="0px">
                         <apex:column width="25%" > 
                                  <apex:outputLabel id="Elink">{!llinklist.stepToLinkObject.Name}</apex:outputLabel>
                          </apex:column>
                         <apex:column width="68%">
                         <apex:pageBlockTable value="{!llinklist.documentLinkList}" var="doc" headerClass="hideClass" border="0px" width="68%">
                              <apex:column width="15%" >
                                  <apex:outputLabel id="Elink">{!doc.Name}</apex:outputLabel>
                              </apex:column>
                            <!--  <apex:column value="{!doc.Document_Address__c}" width="49%"/>-->
                            <apex:column value="{!doc.Document_URL__c}" width="49%"/>
                              <apex:column width="3%">
                                   <apex:commandLink value="Remove" action="{!removeLinkMethod}" onclick="if(!confirmdel()) return false;" >
                                       <apex:param name="linkId" value="{!doc.Id}" assignTo="{!removedocumentLinkId}"/>
                                       <apex:param name="tabId" value="launch" assignTo="{!removedFromTab}"/>
                                   </apex:commandLink>
                               </apex:column>
                         </apex:pageBlockTable>    
                         </apex:column>
                         <apex:column width="7%">
                           <apex:commandLink value="Add Link" onclick="return displaypopup('{!llinklist.stepToLinkObject.Id}','launch','{!pageID2}'); return false;" immediate="true"/>
                         </apex:column>
                      </apex:pageBlockTable>
               </apex:pageBlock>
                <apex:pageBlock title="Launch History">
                     <apex:pageBlockTable value="{!launchHistoryList}" var="h">
                        <apex:column headerValue="Date"  value="{!h.thedate}"/>
                        <apex:column headerValue="User" value="{!h.who}"/> 
                        <apex:column headerValue="Action"><apex:outputText escape="false" value="{!h.action}"/></apex:column>
                     </apex:pageBlockTable>
                </apex:pageBlock> 
           </apex:form>
        </apex:tab>
         <apex:tab disabled="true" labelWidth="25">
        </apex:tab>
        <apex:tab label="Catalog Activities" name="Catalog-Activities">
          
            <apex:relatedList list="Launch_Item__r" />
         </apex:tab>
         
    </apex:tabPanel>
   
   <script>var ObjectTabPanel = '{!$Component.ProgramTabPanel}';</script>
</apex:page>