<apex:page docType="html-5.0" sidebar="false" showHeader="false" standardStylesheets="false" cache="true" controller="PSA_BulkApproveFromEmailController">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes"/>
    <apex:includeScript value="/support/console/32.0/integration.js"/>
    <script src="{!URLFOR($Resource.SCNewHomePage, '/js/bootstrap_jquerydatatables.js')}"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <apex:stylesheet value="{!URLFOR($Resource.SCNewHomePage,'css/bootstrap_jquerydatatable.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.SCNewHomePage,'css/Inline_Styles.css')}"/>
            <style>
            head {
            height: 1%;
            }
            html, body {
                width: 100%;
                height: 100%;
                font-family: Arial, Helvetica, sans-serif;
            }
    #SearchTool
    {
        width:12%;
       
        font-family: Arial, Helvetica, sans-serif
    }
    #container1
    {
        width:87%;
        display:inline-block;
    }
    .highlight {
        background-color: #dddddd !important;
    }
    .importantYellow {
        background-color: #F0F8AA !important;
    }
#badgeNum:hover, img:hover {
    
    -webkit-border-radius: 100px;
    -moz-border-radius: 100px;
    border-radius: 100px;
    -webkit-transition: all 5s ease;
    -moz-transition: all 5s ease;
    -o-transition: all 5s ease;
    -ms-transition: all 5s ease;
    transition: all 5s ease;
    -webkit-transform: rotate(3600deg);
    -moz-transform: rotate(3600deg);
    -o-transform: rotate(3600deg);
    -ms-transform: rotate(3600deg);
    transform: rotate(3600deg);
}

#Home:focus {
    
    -webkit-border-radius: 100px;
    -moz-border-radius: 100px;
    border-radius: 100px;
    -webkit-transition: all 5s ease;
    -moz-transition: all 5s ease;
    -o-transition: all 5s ease;
    -ms-transition: all 5s ease;
    transition: all 5s ease;
    -webkit-transform: rotate(3600deg);
    -moz-transform: rotate(3600deg);
    -o-transform: rotate(3600deg);
    -ms-transform: rotate(3600deg);
    transform: rotate(3600deg);
}
    </style>
    <apex:form id="FormStart">
    <head>
    
    <div id = "HeaderDiv">
    <nav id="navToggleBar" class="navbar navbar-fixed-top" style="display:block;background-color:#2a516f;height:1px;">
                <div id ="MyNavBar" class ="container-fluid" style="margin-bottom:0px;padding-bottom:0px;height:1px">
                    <ul class="nav nav-tabs navbar-left" style="border-bottom:0px;margin-bottom:0px;padding-bottom:0px;">   
                                <li>
                                <!-- <a href="#tab1" style ="background-color: #f1f1f1;height:1%;"><span class="glyphicon glyphicon-flash" aria-hidden="true"><b>Timecard Approval</b><span id = "badgeNum" class="badge"><b>{!piwSize}</b></span></span></a> -->
                                <h4><span id="badgeNum" class="label label-default glyphicon glyphicon-flash" style ="background-color: #f1f1f1;color:black;padding:8px 8px 10px 10px;">Timecard Approval (<b>{!piwSize}</b>)</span></h4>
                                </li>
          
                    </ul> 
                         <ul class="nav nav-tabs navbar-right" style="border-bottom:0px;margin-bottom:0px;padding-bottom:2px;">   
                        <li>    
                            <h4 id="Home"><span class="label label-default glyphicon glyphicon-home" style ="margin-left:2%;background-color: #f1f1f1;color:black;cursor:pointer;padding:8px 8px 10px 10px;" onclick = "window.open('/')">&nbsp;Home</span></h4>
                            <!-- <p id="Home" style ="background-color:#f1f1f1;color:inherit;height:1%">&nbsp;<span class="glyphicon glyphicon-home" style="margin-right:2%;cursor:pointer;" onclick = "window.open('/')" aria-hidden="true">Home</span></p> -->
                        </li>
                        <li>&nbsp;&nbsp;</li>
                            <li>
                            <h4 id="Pref"><span class="label label-default glyphicon glyphicon-user" style ="margin-left:2%;background-color: #f1f1f1;color:black;cursor:pointer;padding:8px 8px 10px 10px;" onclick = "window.open('/{!Userpreference}')">&nbsp;Preference</span></h4>   
                            </li>
                                </ul>  
  
                            </div>
                            </nav>
                            </div>
    </head>
    
    <body style ="margin-top:0px;padding-top:40px;height:95%;width:100%">
    
        <section id="tab1" class="tab-content active" style ="margin-top:0.00px;height: 99%;float:top;" >
            <div style ="margin-top: 0.5%;height: 95%;float:bottom;"></div>
            <div id="ActionStatusDisable" class="panel panel-default setheight">
            <apex:actionFunction name="resetFilters" action="{!resetFilters}" reRender="AccountRefresh,ProjectRefresh,ResourceRefresh,MilestoneRefresh,DateRefresh,BillableRefresh" oncomplete="refreshMyTable()" />
            <apex:actionFunction name="refreshProjMilestoneFilter" reRender="AccountRefresh,ProjectRefresh,ResourceRefresh,MilestoneRefresh" action="{!RefreshFilterProject}" oncomplete="refreshMyTable()" status="actMStatusId"/>
            <apex:actionFunction name="refreshMilestoneFilter" reRender="ProjectRefresh,ResourceRefresh,MilestoneRefresh" action="{!RefreshFilterMilestone}" oncomplete="refreshMyTable()" status="actMStatusId"/>
<apex:actionFunction name="refreshMyTable" reRender="AccountRefresh,ProjectRefresh,ResourceRefresh,MilestoneRefresh,BillableRefresh,hiddenFieldMyList" action="{!populateMyTable}" oncomplete="reConstructMTable()" status="actMStatusId"/>
<apex:param name="name1" value="{!MyFilter1}"/>
<apex:param name="name2" value="{!MyFilter2}"/>
<apex:param name="name1" value="{!MyFilter3}"/>
<apex:param name="name1" value="{!MyFilter4}"/>
<apex:param name="name1" value="{!MyFilter5}"/>
<apex:param name="name1" value="{!MyFilter6}"/>
<apex:param name="name1" value="{!MyFilter7}"/>
<apex:actionFunction name="populateMyTable" action="{!populateMyTable}" reRender="hiddenFieldMyList" onComplete="constructMTable()"/>
<apex:inputHidden value="{!lMCaseERjson}" id="hiddenFieldMyList"/>                       
<div style="width:100%;overflow:auto;" id="section2">

<div id = "sticky-anchor" style="width: 100%;overflow:auto;">

<div id = "SearchTool" class = "truncate" style="padding-left: 0.3%;float:right; padding-top: 2%;width:0%;opacity:0;height:100%;background-color:#f1f1f1;">

<div>
<Apex:PageBlock id="AccountRefresh">
<label style="font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 12px;">Account</label>
<apex:selectList value="{!MyFilter2}" size="1" styleclass="form-control" style="width: 70%; margin-top: 2%;margin-bottom: 10%;margin-right: 10%;margin-left:5%;font-size:12px" onchange="refreshProjMilestoneFilter()" >
<apex:selectOptions value="{!AccountsOwned}"></apex:selectOptions>
</apex:selectList>
       </Apex:PageBlock>  
        </div>
<div>
<Apex:PageBlock id="ProjectRefresh">
<label style="font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 12px;">Project</label>
<apex:selectList value="{!MyFilter1}" styleclass="form-control" size="1" style="width: 70%; margin-top: 2%;margin-bottom: 10%;margin-right: 10%;margin-left:5%;padding-right:5%;font-size:12px" onchange="refreshMilestoneFilter()"> 
    <apex:selectOptions value="{!projectsOwned1}"></apex:selectOptions>
    </apex:selectList>
    
 </Apex:PageBlock> 
 </div>  
 <Apex:PageBlock id="MilestoneRefresh">
                <div>
                    <label style="font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 12px;">Milestone</label>
                    <apex:selectList value="{!MyFilter4}" size="1" styleclass="form-control" style="width: 70%; margin-top: 2%;margin-bottom:10%;margin-right:10%;margin-left:5%;font-size:12px" onchange="refreshMyTable()"> 
                        <apex:selectOptions value="{!MilestoneFilter}"></apex:selectOptions>
                        </apex:selectList>
                        </div>
                        </Apex:PageBlock> 
            <div>
                <Apex:PageBlock id="ResourceRefresh">
                <label style="font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 12px;">Resource</label>
                <apex:selectList value="{!MyFilter3}" size="1" styleclass="form-control" style="width: 70%; margin-top: 2%;margin-bottom: 10%;margin-right: 10%;margin-left:5%;font-size:12px" rendered="true" onchange="refreshMyTable()"> 
                    <apex:selectOptions value="{!ResourcesFilter}"></apex:selectOptions>
                </apex:selectList>
                </Apex:PageBlock> 
                </div>
                <div id="BillableRefreshDiv">
                <Apex:PageBlock id="BillableRefresh">
                        
                            <label style="font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 12px;">Billable</label>
                            <br></br>
                            <apex:selectList value="{!MyFilter9}" size="1" styleclass="form-control" style="width: 70%; margin-top: 2%;margin-bottom: 10%;margin-right: 10%;margin-left:5%;font-size:12px" rendered="true" onchange="refreshMyTable()"> 
                           <apex:selectOptions value="{!BillableOptions}"></apex:selectOptions>
                            </apex:selectList>
                           
                        </Apex:PageBlock>
                 </div>
                        <!--<Apex:PageBlock id="ProductRefresh">
                        <div>
                            <label style="font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 12px;">Product</label>
                            <apex:selectList value="{!MyFilter5}" size="1" styleclass="form-control" style="width: 70%; margin-top: 2%;margin-bottom: 10%;margin-right: 10%;margin-left: 5%;font-size:12px" onchange="refreshMyTable()"> 
                                <apex:selectOptions value="{!ProductFilter}"></apex:selectOptions>
                            </apex:selectList>
                        </div>
                         </Apex:PageBlock> -->
                        <Apex:PageBlock id="DateRefresh">
                        <div>
                            <label style="font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 12px;">Start Date</label>
                            <br></br>
                            <apex:input title="Enter date in the format mm/dd/yyyy" type="date" value="{!MyFilter6}" styleClass="form-control" style="width:95%;margin-top: 2%;margin-bottom: 7%;margin-right: 0%;margin-left: 0%;font-size:10px" onchange="refreshMyTable()"/>
                                </div>
                            <div>
                                <label style="font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 12px;">End Date</label>
        
                            <apex:input title="Enter date in the format mm/dd/yyyy" type="date" value="{!MyFilter7}" styleclass="form-control" style="width:95%;margin-top: 2%;margin-bottom: 7%;margin-right: 0%;margin-left:0%;font-size:10px" onchange="refreshMyTable()"/>
                                </div>
                        </Apex:PageBlock>
                        
                            <br></br>
                            <apex:commandButton id="ClearFilter" value="Clear Filter" onclick="resetFilters()" rerender="AccountRefresh,ProjectRefresh,MilestoneRefresh,BillableRefresh,hiddenFieldMyList" style="margin-bottom:100%;color:#fff;background-color:#333;align-items:center;font-weight:bold;width:100%"/> 
                            <br></br>
                            </div>
                            <div id = "ToggeleButtonHide" style="cursor:pointer;float:right;display:inline;opacity:0">
                                    
                            <h5><span class="glyphicon glyphicon-hand-right" aria-hidden="true" style="margin-left: 0%;"><i>Hide</i></span></h5>
                            </div>
                            <h5><div id = "ToggeleButtonShow" style="cursor:pointer;float:right;display:inline"><i>Filter</i>
                                <span class= "glyphicon glyphicon-hand-left" aria-hidden="true" style="margin-left: 0%;"></span>
                                </div></h5>
                                <div id ="container1" style="width:99%;float:left;margin-left: 0.7%;">  
                                    
                             <!--action status-->
                                <apex:actionStatus id="actMStatusId" >
                                    <apex:facet name="start">
                                        <div class="statusOuter">   
                                            <div class="statusInner">        
                                                <img src="/img/loading.gif" />       
                                                    </div>             
                                                </div>
                                                </apex:facet>            
                                                    </apex:actionStatus>
    <div id="CommentSection" style ="margin-left:45%;height: 90%;float:center;display:none">
        <b style="font-family: Arial, Helvetica, sans-serif;font-size: 100%;">Comments:</b><br></br>
                <apex:inputTextarea value="{!Comments1}"  id="BulkComments1"/>
                                      <br></br>
            <div id="ApprovalSection" style="float:center;">
    <script>function complete2(){}</script>
    <apex:commandButton id="ApproveClicked" value="Approve" onclick="Approveselected(1)" rerender="none" style="font-size:100%;font-weight:bold;" />
    <apex:commandButton id="ApproveClicked2" style="margin-left:1%;font-weight:bold;" value="Reject" onclick="Approveselected(0)" rerender="none"/>
    
</div>
</div>
<br></br>
<input type="button" styleClass="btn" style="font-weight:bold;" class="SelectAll" value="Select All"/>
<input type="button" class="unSelectAll" style="font-weight:bold;" value="Unselect All"/>                   
<div id="myTopPanel" class="panelbodytopsection">
    <div id="searchtext" align="center">
    </div>                    
    <apex:outputPanel id="myPanel" styleClass="setwidth setheight"> 
        <table id="myTable" class="display table table-striped table-responsive" style="white-space: normal;table-layout: fixed;width:100%">

            <thead>
                
                <tr style="height:25px">                               
                    <th style="width:2%;"> </th>
                    <th style="width:auto;overflow:scroll;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Timecard</th>
                    <th style="width:auto;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Account</th>
                    <th style="width:auto;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Project</th>
                    <th style="width:auto;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Milestone</th>
                    <th style="width:auto;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Resource</th>
                    <th style="width:5%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Billable</th>
                    <th style="width:7%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Start Date</th>
                    <th style="width:4%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Sun</th>
                    <th style="width:4%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Mon</th>
                    <th style="width:4%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Tue</th>
                    <th style="width:4%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Wed</th>
                    <th style="width:4%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Thu</th>
                    <th style="width:4%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 12px;">Fri</th>
                    <th style="width:4%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Sat</th>
                    <th style="width:4%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Total</th>
                    <th style="width:6%;font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size: 110%;">Status</th>                                                    
                </tr>
                
            </thead>
            <tbody>
                
            </tbody>
            
        </table>
    </apex:outputPanel>         
</div>
<input type="button" class="SelectAll" style="font-weight:bold;" value="Select All"/>
<input type="button" class="unSelectAll" style="font-weight:bold;" value="Unselect All"/> 
<div id="CommentSection1" style ="margin-left: 45%;height: 90%;float:center;">
    <b style="font-family: Arial, Helvetica, sans-serif;font-size: 100%;">Comments:</b><br></br>
<apex:inputTextarea value="{!Comments}"  id="BulkComments"/>

<br></br>
<div id="ApprovalSection2" style="float:center;">
    <script>function complete3(){}</script>
    <apex:commandButton id="ApproveClicked1" value="Approve" style="font-weight:bold;" onclick="Approveselected(1)" rerender="none"/>
    <apex:commandButton id="ApproveClicked0" style="margin-left:1%;font-weight:bold;" value="Reject"  onclick="Approveselected(0)" rerender="none"/>
        
        </div>
    </div>
    <br></br> 
    </div>
    </div>
    </div>
    </div>
    </section>
    </body>
    <script type="text/javascript">
    var mTable=null; 
    function constructMTable() {
        
        var mdatas = JSON.parse(document.getElementById('{!$Component.hiddenFieldMyList}').value);          
        mTable=  $('#myTable').DataTable( {
            
            fixedHeader: {
                footer: true
            },
            "data": mdatas,
            "columns":[
                {
                    "data": "Id",
                    "type": "html",
                    "bSortable": false,
                    "mRender" : function(data,type,full) {
                        return '<input value = "'+ data + '" type="checkbox">';
                    }
                },
                {
                    "data": "Name",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        return '<a style="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" onclick=window.open("/'+full.Id+'")>' + data+ '</a>';
                    }
                },
                {
                    "data": "pse__Project__r.pse__Account__r.Name",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" onclick=window.open("/'+full.pse__Project__r.pse__Account__c+'")>' + data+ '</a>';
                    }
                },
                {
                    "data": "pse__Project__r.Name",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" onclick=window.open("/'+full.pse__Project__c+'")>' + data+ '</a>';
                    }
                },
                {
                    "data": "pse__Milestone__r.Name",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" onclick=window.open("/'+full.pse__Milestone__c+'")>' + data+ '</a>';
                    }                
                },
                {
                    "data": "pse__Resource__r.Name",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" onclick=window.open("/'+full.pse__Resource__c+'")>' + data+ '</a>';
                    }
                },
                {
                    "data": "pse__Billable__c",
                    "type": "html",
                    "mRender" : function(data,type,full) 
                    {    
                           if(data==true)
                           {
                               <!-- return '<p style="display:none">'+data+'</p><img src="https://community.openclinica.com/OpenClinica/3.0/images/icon_DoubleCheck.gif" style="float:left;margin-left: 0%;"></img>'; -->
                                return '<span class="glyphicon glyphicon-ok" style="text-align:center;"></span>';
                 
                           }
                           else
                           {
                               <!-- return '<p style="display:none">'+data+'</p><img src="https://www.adventuretoys.co.uk/images/icon-cross.png" style="float:left;margin-left: 0%;"></img>'; -->
                               return '<p style="display:none">'+data+'</p><span class="glyphicon glyphicon-remove" aria-hidden="true" style="margin-left: 0%;"></span>';
                           }
                    }
                },
                {
                    "data": "pse__Start_Date__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        return '<p style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;">' + data+ '</p>';
                    }
                },            
                {
                    "data": "pse__Sunday_Hours__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        if(full.pse__Sunday_Notes__c==undefined)
                        {
                            return '<p  style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" class="truncate">'+ data + '</p>';
                            
                        }
                            else
                            {
                                return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" class="truncate" data-toggle="tooltip" html: "true" title="Sunday : '+full.pse__Sunday_Notes__c+'">' + data+ '</a>';
                            }
                    }
                },
                {
                    "data": "pse__Monday_Hours__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        if(full.pse__Monday_Notes__c==undefined)
                        {
                            return '<p style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" class="truncate">'+ data + '</p>';
                            
                        }
                            else
                            {
                                return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" class="truncate" data-toggle="tooltip" html: "true" title="Monday : '+full.pse__Monday_Notes__c+'">' + data+ '</a>';
                            }
                    }
                },
                {
                    "data": "pse__Tuesday_Hours__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {if(full.pse__Tuesday_Notes__c==undefined)
                    {
                        return '<p style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;"  class="truncate">'+ data + '</p>';
                    }
                                                          else
                                                          {
                                                              return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" class="truncate" data-toggle="tooltip" html: "true" title="Tuesday : '+full.pse__Tuesday_Notes__c+'">' + data+ '</a>';
                                                          }
                                                         }
                },
                {
                    "data": "pse__Wednesday_Hours__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {if(full.pse__Wednesday_Notes__c==undefined)
                    {
                        return '<p style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" class="truncate">'+ data + '</p>';
                    }
                                                          else
                                                          {
                                                              return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" class="truncate" data-toggle="tooltip" html: "true" title="Wednesday : '+full.pse__Wednesday_Notes__c+'">' + data+ '</a>';
                                                          }
                                                         }
                },
                {
                    "data": "pse__Thursday_Hours__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {if(full.pse__Thursday_Notes__c==undefined)
                    {
                        return '<p style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;">'+ data + '</p>';
                    }
                                                          else
                                                          {
                                                              return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;" data-toggle="tooltip" html: "true" title="Thursday : '+full.pse__Thursday_Notes__c+'">' + data+ '</a>';
                                                          }
                                                         }
                },
                {
                    "data": "pse__Friday_Hours__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {if(full.pse__Friday_Notes__c==undefined)
                    {
                        return '<p  class="truncate">'+ data + '</p>';
                    }
                                                          else
                                                          {
                                                              return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;" class="truncate" data-toggle="tooltip" html: "true" title="Friday : '+full.pse__Friday_Notes__c+'">' + data+ '</a>';
                                                          }
                                                         }
                },
                {
                    "data": "pse__Saturday_Hours__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {if(full.pse__Saturday_Notes__c==undefined)
                    {
                        return '<p style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;" class="truncate">'+ data + '</p>';
                    }
                                                          else
                                                          {
                                                              return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;" class="truncate" data-toggle="tooltip" html: "true" title="Saturday : '+full.pse__Saturday_Notes__c+'">' + data+ '</a>';
                                                          }
                                                         }
                },
                {
                    "data": "pse__Total_Hours__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        if(full.pse__Additional_Notes__c==undefined)
                        {
                            return '<p style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;" class="truncate">'+ data + '</p>';
                        }
                        else
                        {
                            return '<a style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;" class="truncate" data-toggle="tooltip" html: "true" title="Notes : '+full.pse__Additional_Notes__c+'">' + data+ '</a>';
                        }
                        
                    }
                },
                {
                    "data": "pse__Status__c",
                    "type": "html",
                    "mRender" : function(data,type,full) {
                        return '<p style ="font-family: Arial, Helvetica, sans-serif;font-size: 12px;text-overflow: ellipsis;word-wrap: break-word;">' + data+ '</p>';
                    }
                }
                
            ],
            "oLanguage": {
                "sInfoFiltered": "<div id = 'mycustomtext' style='display:none'><h6><b>Searched _END_ records </b></h6> </div>"
            },  
            "order": [[ 7, 'desc' ]],      
            "fnDrawCallback": function(){
                $('#myTable tbody').on( 'mouseenter', 'td', function () 
                                       {
                                           var colIdx = mTable.cell(this).index().column;
                                           $( mTable.cells().nodes() ).removeClass( 'highlight' );
                                           $( mTable.column( colIdx ).nodes() ).addClass( 'highlight' );
                                       } );
                $('#myTable tbody').on( 'mouseleave', 'td', function () 
                                       {
                                           $( mTable.cells().nodes() ).removeClass( 'highlight' );
                                       } );
                $( '#searchtext' ).text($( '#mycustomtext > h6' ).text());
                
            }
        });
    }
    function reConstructMTable(){
        if(mTable!= null)
        { mTable.destroy();}
        constructMTable();
    }
    
    function Approveselected(action)
    { 
        var SelectedTC="";
        var i=0;
        mTable.$('input[type=checkbox]',{"page": "all"}).each(function () {
            SelectedTC += (this.checked ? (this.value.charAt(0)=="a"?this.value + ",":"" ): "");
            if (this.checked)
            {
                $(this).attr('checked',false).attr('disabled','disabled')
                $(this).closest('td').closest('tr').addClass( 'importantYellow');
                $(this).closest('td').closest('tr').find('td').each (function() {
                $(this).addClass( 'importantYellow');
                });  
            }
        });
        var approvalComments2 = $( '[id $="BulkComments"]').val();
        var approvalComments = $( '[id $="BulkComments1"]').val();        
        if(SelectedTC.length > 14)
        {    
            
            //TestApproveController.ApproveSelectedTC(action,SelectedTC,approvalComments,approvalComments2,function(result, event){//alert("The selected timecards are in the process of being approved. A notification will be sent on completion.");
            var Comment=''; 
            if (approvalComments != null || approvalComments != '')
            {   
                Comment = approvalComments;
                if (approvalComments2 != null || approvalComments2 != '')
                {
                    Comment += approvalComments2;
                }
            }
            else
            {
                if (approvalComments2 != null || approvalComments2 != '')
                {
                    Comment = approvalComments2;
                }                
            }
            var actiontoSend = "";
            if (action == 0)
            {
                actiontoSend = 'Reject';
            }   
            else if (action == 1)
            {
                actiontoSend = 'Approve';
            } 
            //window.location.href = "{! url}" + "?comment=" + Comment + "&action=" +actiontoSend + "&timecardIds=" + SelectedTC;
            var approvalObject = PSA_BulkApproveFromEmailController.ApproveSelectedTC(actiontoSend,SelectedTC,Comment,function(result, event)
                {
                    window.location.href = "{! url}" + "?ApprovalObjectID=" + result;
                });                                                                                                                    
        }       
    }
    
   
    $(document).ready(function(){
    
    
        populateMyTable();
        //$("#SearchTool").hide();
        //$("#container1").css('width','88');
        //$("#SearchTool").css('width','11');
        $(".SelectAll").click(function(event){
            //First the checkbox statuses will be changed according to
            //the status of the master checkbox
            event.preventDefault();
            
            $('input:checkbox').prop('checked', true);
            
        });
        $(".unSelectAll").click(function(event){
            event.preventDefault();
            //First the checkbox statuses will be changed according to
            //the status of the master checkbox
            $('input:checkbox').prop('checked', false);
            
        }); 
        
        $('.nav-tabs > li > a').click(function(event){
            event.preventDefault();//stop browser to take action for clicked anchor
            
            //get displaying tab content jQuery selector
            var active_tab_selector = $('.nav-tabs > li.active > a').attr('href');                  
            
            //find actived navigation and remove 'active' css
            var actived_nav = $('.nav-tabs > li.active');
            actived_nav.removeClass('active');
            
            //add 'active' css into clicked navigation
            $(this).parents('li').addClass('active');
            
            //hide displaying tab content
            $(active_tab_selector).removeClass('active');
            $(active_tab_selector).addClass('hide');
            
            //show target tab content
            var target_tab_selector = $(this).attr('href');
            $(target_tab_selector).removeClass('hide');
            $(target_tab_selector).addClass('active');
        });
        
     jQuery("#ToggeleButtonHide").click(
     function(event)
     {
            event.preventDefault();
            jQuery("#SearchTool").animate({
                "width": "0%","opacity": "0"}, 500);
            jQuery("#container1").animate({
                "width": "99%","opacity": "1"
            }, 500);
            
     },
                                           
    function() 
    {
           jQuery("#SearchTool").animate({
               "width": "0%","opacity": "0" 
           }, 500);
           jQuery("#container1").animate({
               "width": "99%","opacity": "1"
           }, 500);
           $(this).animate({
               "opacity": "0"
           }, 500);
           jQuery("#ToggeleButtonShow").animate({
               "opacity": "1"
           }, 500);
    });
        jQuery("#ToggeleButtonShow").click(
        function(event) 
        {
            jQuery("#container1").animate({
                "width": "87%"
            }, 500);
            jQuery("#SearchTool").animate({
                "width": "12%","opacity": "1"
            }, 500);
        },
        function () 
        {
           jQuery("#container1").animate({
               "width": "87%"
               
           }, 500);
           jQuery("#SearchTool").animate({
               "width": "12%","opacity": "1"  }, 500);
           $(this).animate({
               "opacity": "0"
           }, 500);
           jQuery("#ToggeleButtonHide").animate({
               "opacity": "1"
           }, 500);
       }); 
    });  
    </script>
</apex:form>
</apex:page>