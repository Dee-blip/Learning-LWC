<template>

    <!-- NEW RECORD-->
    <template if:false={newInline}>
        <template if:false={existingRec}>
            <div class="slds-card slds-var-p-around_medium" style="height: 100%">

                <div class="slds-card__body slds-card__body_inner">
                    
                    <div>
                        <template if:true={loadSpinner}>
                            <div class="slds-spinner_container" style="z-index: 10000 !important;">
                                <lightning-spinner alternative-text="Loading" variant="brand" size="medium">
                                </lightning-spinner>
                            </div>
                        </template>
                    </div>
                
                    <lightning-record-edit-form 
                        object-api-name="Engagement_Request__c"
                        record-type-id={extTeamRecTypeId}
                        record-id={escRecordId}
                        onsuccess={handleSuccess}
                        onsubmit={handleSubmit}
                        onerror={handleError}
                        class="newRecordForm"
                        layout-type="compact">

                        <lightning-messages></lightning-messages>
                        <div>{escRecordId}</div>
                        <div class="slds-grid">    
                            <div class="slds-col slds-size_1-of-4">
                                <lightning-input-field required field-name="ID__c">
                                </lightning-input-field>
                            </div>
                            <div class="slds-col slds-size_1-of-6"></div>
                                
                            <div class="slds-col slds-size_1-of-3">
                                <lightning-input-field value={caseRecId} required field-name="Case__c">
                                    
                                </lightning-input-field>
                            </div>
                        </div>
                            
                        <div class="slds-grid">    
                            <div class="slds-col slds-size_1-of-4">
                                
                                <lightning-combobox
                                    name="System"
                                    label="System"
                                    variant="label-inline"
                                    value={systemVal}
                                    onchange={systemChange}
                                    options={systemOptions}
                                    required
                                ></lightning-combobox>
                            </div>
                            
                            <div class="slds-col slds-size_1-of-6"></div>

                            <div class="slds-col slds-size_1-of-3">
                                <lightning-combobox
                                    name="Area"
                                    label="Area"
                                    variant="label-inline"
                                    value={areaVal}
                                    options={areaValues}
                                    onchange={areaChange}
                                    required
                                ></lightning-combobox>
                            </div>
                        </div>
                        <template if:true={isJIRASystem}>
                            <div class="slds-grid">    
                                <div class="slds-col slds-size_1-of-2">
                                        <lightning-input-field field-name="Prevention__c"></lightning-input-field>
                                </div>
                                
                            </div>
                        </template>
                        <template if:false={isJIRASystem}>
                            
                            <div class="slds-grid">    
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input-field field-name="Subject__c"></lightning-input-field>
                                </div>
                            </div>
                            
                            <div class="slds-grid">    
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input-field field-name="Description__c"></lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-6"></div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input-field field-name="Escalation_Created_By__c"></lightning-input-field>
                                </div>
                            </div>
                            
                            <div class="slds-grid">    
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input-field field-name="Request_Status__c"></lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-6"></div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input-field field-name="Escalation_Created_Date__c"></lightning-input-field>
                                </div>
                            </div>
                            
                            <div class="slds-grid">    
                                <div class="slds-col slds-size_1-of-4">
                                    <lightning-input-field field-name="Accepted_Date__c"></lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-6"></div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input-field field-name="Escalation_Closed_Date__c"></lightning-input-field>
                                </div>
                            </div>

                            <div class="slds-grid">    
                                <div class="slds-col slds-size_1-of-4">
                                        <lightning-input-field field-name="URL__c"></lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-6"></div>
                                <div class="slds-col slds-size_1-of-3">
                                    <lightning-input-field field-name="ER_Severity__c"></lightning-input-field>
                                </div>
                            </div>
                            <template if:true={isOtherSystem}>
                                <div class="slds-grid">    
                                    <div class="slds-col slds-size_1-of-4">
                                            <lightning-input-field field-name="Prevention__c"></lightning-input-field>
                                    </div>
                                    <div class="slds-col slds-size_1-of-6"></div>
                                    <div class="slds-col slds-size_1-of-3"></div>
                                </div>
                            </template>
                        </template>
                    
                    <footer class="slds-card__footer" style="text-align: center">
                        <button class="slds-button slds-button_neutral" onclick={handleCancelNew} title="Cancel">Cancel</button>
                        <button class="slds-button slds-button_brand" type="submit"  name="Save" title="Save">Save</button>
                    </footer>
                </lightning-record-edit-form>
                </div>
            </div>
        </template>
    </template>

    <!-- NEW RECORD INLINE ON S2ET DASHBOARD-->
    <template if:true={newInline}>
        <div class="slds-card" style="height: 100%">

            <div class="slds-card__body slds-card__body_inner">
                
                <div>
                    <template if:true={loadSpinner}>
                        <div class="slds-spinner_container" style="z-index: 10000 !important;">
                            <lightning-spinner alternative-text="Loading" variant="brand" size="medium">
                            </lightning-spinner>
                        </div>
                    </template>
                </div>

                <lightning-record-edit-form 
                    record-type-id={extTeamRecTypeId}
                    object-api-name="Engagement_Request__c"
                    record-id={escRecordId}
                    onsuccess={handleSuccess}
                    onsubmit={handleSubmit}
                    class="newRecordForm"
                    onerror={handleError}
                    layout-type="compact">

                    <lightning-messages></lightning-messages>
                    <div>
                        <div class="slds-grid">    
                            <div class="slds-col slds-size_1-of-2">
                                <lightning-input-field required field-name="ID__c">
                                </lightning-input-field>
                            </div>
                                
                            <div class="slds-col slds-size_1-of-2">
                                <lightning-input-field value={caseRecId} required field-name="Case__c"></lightning-input-field>
                            </div>
                        </div>
                                
                        
                    </div>
                    <footer class="slds-modal__footer" style="text-align: center">
                        <button class="slds-button slds-button_brand" type="submit" name="Save!"
                            title="Save">Save</button>
                    </footer>
                </lightning-record-edit-form>
            </div>
        </div>
    </template>
    
    <!-- UPDATE ON EXISTING RECORD -->
    <template if:true={existingRec}>
        <lightning-record-edit-form 
            record-id={escRecordId}
            record-type-id={extTeamRecTypeId}
            object-api-name="Engagement_Request__c"
            onsuccess={handleSuccess}
            onsubmit={handleSubmit}
            class="newRecordForm"
            onerror={handleError}>
            
            <lightning-messages ></lightning-messages>
            <div class="slds-card">
                

                <div class="slds-card__body slds-card__body_inner">
                    
                    <div class="slds-grid">
                        <div class="slds-col">
                            <lightning-input-field required field-name="ID__c"> 
                            </lightning-input-field>
                        </div>
                        <div class="slds-col">
                            <lightning-input-field field-name="Case__c">
                            </lightning-input-field>
                        </div>
                    </div>

                    <div class="slds-grid">    
                        
                        <div class="slds-col">
                            <lightning-combobox
                                name="System"
                                label="System"
                                value={systemVal}
                                onchange={systemChange}
                                options={systemOptions}
                                required
                            ></lightning-combobox>
                        </div>


                        <div class="slds-col">
                            <lightning-combobox
                                name="Area"
                                label="Area"
                                value={areaVal}
                                onchange={areaChange}
                                options={areaOptions}
                                required
                            ></lightning-combobox>
                        </div>

                    </div>
                   
                    <template if:true={isJIRASystem}>
                        <div class="slds-grid">    
                            <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field field-name="Prevention__c"></lightning-input-field>
                            </div>
                            
                        </div>
                    </template>
                    
                    <div>
                        <template if:true={loadSpinner}>
                            <div class="slds-spinner_container" style="z-index: 10000 !important;">
                                <lightning-spinner alternative-text="Loading" variant="brand" size="large">
                                </lightning-spinner>
                            </div>
                        </template>
                    </div>
                    <template if:false={isJIRASystem}>
                        <div class="slds-grid">    
                            <div class="slds-col">
                                <lightning-input-field field-name="Subject__c" ></lightning-input-field>
                            </div>
                        </div>
                        
                        <div class="slds-grid">    
                            <div class="slds-col">
                                <lightning-input-field field-name="Description__c" ></lightning-input-field>
                            </div>
                            <div class="slds-col">
                                <lightning-input-field field-name="ER_Severity__c"></lightning-input-field>
                            </div>
                        </div>
                        
                        <div class="slds-grid">    
                            <div class="slds-col slds-size_1-of-2">
                                <lightning-input-field field-name="Escalation_Created_By__c" ></lightning-input-field>
                            </div>
                            <div class="slds-col slds-size_1-of-2">
                                <lightning-input-field field-name="Request_Status__c" ></lightning-input-field>
                            </div>
                        </div>
                        
                        <div class="slds-grid">    
                            <div class="slds-col slds-size_1-of-2">
                                <lightning-input-field field-name="Escalation_Created_Date__c" ></lightning-input-field>
                            </div>
                        </div>
                        
                        <div class="slds-grid">
                            <div class="slds-col slds-size_1-of-2">
                                <lightning-input-field field-name="Accepted_Date__c" ></lightning-input-field>
                            </div>
                        </div>
                        
                        <div class="slds-grid">    
                            <div class="slds-col slds-size_1-of-2">
                                <lightning-input-field field-name="Escalation_Closed_Date__c" ></lightning-input-field>
                            </div>
                        </div>

                        <div class="slds-grid">    
                            <div class="slds-col ">
                                <lightning-input-field field-name="URL__c" ></lightning-input-field>
                            </div>
                        </div>
                        <template if:true={isOtherSystem}>
                            <div class="slds-grid">    
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field field-name="Prevention__c" ></lightning-input-field>
                                </div>
                            </div>
                        </template>
                        
                    </template>
                    
                    <footer class="slds-card__footer">
                        <lightning-button variant="brand" type="submit" label="Save">
                        </lightning-button>
                    </footer>
                </div>
            </div>
            
            <template if:true={loading}>
                <lightning-spinner alternative-text="Loading"></lightning-spinner>
            </template>
            
        </lightning-record-edit-form>
    </template>
</template>