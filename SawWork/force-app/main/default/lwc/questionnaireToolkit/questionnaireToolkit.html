<template>
    <div class="sidebar">
        <article class="slds-card question-card">
            <div class="slds-page-header slds-p-left_large question-header">
                <div class="slds-grid slds-wrap">

                    <!--Start of Questionnaire Setting Card-->
                    <div class="slds-col slds-size_12-of-12 slds-p-top_xx-small slds-p-bottom_xx-small slds-p-left_medium slds-p-right_medium">
                        <article class="slds-card questionnaire-settings-card">
                            <div class="slds-col slds-size_12-of-12 slds-p-top_x-small slds-p-bottom_x-small slds-p-left_medium slds-p-right_medium">
                                <div class="slds-grid slds-wrap">
                                    <div class="slds-col slds-align_absolute-center slds-size_1-of-4 slds-p-top_x-small">
                                        <lightning-icon icon-name="standard:settings" alternative-text="Approved" title="Approved"></lightning-icon>
                                    </div>
                                    <div class="question-properties-header slds-text-heading_small slds-col slds-size_3-of-4 slds-p-top_medium">
                                        Questionnaire Settings
                                    </div>
                                </div>
                            </div>
                            <div class="slds-col slds-size_12-of-12 slds-align_absolute-center slds-p-top_xx-small slds-p-bottom_xx-small slds-p-left_medium slds-p-right_medium">
                                <lightning-button 
                                    variant="brand-outline" 
                                    label="Publish Questionnaire" 
                                    title="Publish Questionnaire"
                                    icon-name="utility:broadcast"
                                    icon-position="left"
                                    onclick={handlePublishClick}>
                                </lightning-button>
                            </div>
                            <template if:true={showNotes}>
                              <div style="
                              padding-left: 7px;
                              padding-right: 7px;
                              ">
                                <lightning-textarea name="textarea" required label="Notes" placeholder="Notes" value={notesvalue} onchange={handleNotesChange} maxlength="100" data-field="Notes"></lightning-textarea>
                              </div>
                              <lightning-button variant="brand" label="Publish" onclick={handlePublish} class="slds-m-left_x-small"></lightning-button>
                              <lightning-button label="Cancel"  onclick={handleCancel} class="slds-m-left_x-small"></lightning-button>
                            </template>
                            <div class="slds-col slds-size_12-of-12 slds-align_absolute-center slds-p-top_x-small slds-p-bottom_medium slds-p-left_medium slds-p-right_medium">
                                <!--lightning-button 
                                    variant="brand-outline" 
                                    label="Preview Questionnaire" 
                                    title="Preview Questionnaire"
                                    icon-name="utility:preview"
                                    icon-position="left"
                                    onclick={handlePreview}>
                                </lightning-button-->
                            </div>
                        </article>
                    </div>
                    <!--End of Questionnaire Setting Card-->
                    
                    <!--Start of Add Components Card-->
                    <div class="slds-col slds-size_12-of-12 slds-p-top_small slds-p-bottom_small slds-p-left_medium slds-p-right_medium">
                        <article class="slds-card questionnaire-settings-card">
                            <div class="slds-col slds-size_12-of-12 slds-p-top_xx-small slds-p-bottom_xx-small slds-p-left_medium slds-p-right_medium">
                                <div class="slds-grid slds-wrap">
                                    <div class="slds-col slds-align_absolute-center slds-size_1-of-4 slds-p-top_x-small">
                                        <lightning-icon icon-name="standard:entity" alternative-text="Approved" title="Approved"></lightning-icon>
                                    </div>
                                    <div class="question-properties-header slds-text-heading_small slds-col slds-size_3-of-4 slds-p-top_small">
                                        Add components
                                    </div>
                                </div>
                            </div>
                            <div class="slds-col slds-size_12-of-12  slds-p-top_small slds-p-left_large slds-p-right_medium">
                                <lightning-button 
                                    variant="brand-outline" 
                                    label="Add Section" 
                                    title="Add Section"
                                    icon-name="utility:snippet"
                                    icon-position="left"
                                    onclick={handleAddSection}>
                                </lightning-button>
                                <template if:true={addSection}>
                                    <div class="slds-col slds-size_12-of-12 slds-p-bottom_x-small slds-p-left_medium slds-p-right_medium">
                                        <ul class="slds-timeline">
                                            <li>
                                              <div class={questionTimelineClasses}>
                                                <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                                                </svg>
                                                <span class="slds-assistive-text">task</span>
                                                <div class="slds-media">
                                                  <div class="slds-media__figure">
                                                    <button class="slds-button slds-button_icon" title="Select Question Type" aria-controls="section-item-expanded" aria-expanded="true">
                                                      <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                                                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                                                      </svg>
                                                      <span class="slds-assistive-text">Section Creation</span>
                                                    </button>
                                                    <div class="slds-icon_container slds-icon-standard-task slds-timeline__icon" title="task">
                                                      <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                                        <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#task"></use>
                                                      </svg>
                                                    </div>
                                                  </div>
                                                  <div class="slds-media__body">
                                                    <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                                                      <div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space">
                                                        <h3 class="slds-truncate" title="Select Question Type">
                                                          <a href="#">
                                                            <strong>Section Creation</strong>
                                                          </a>
                                                        </h3>
                                                      </div>
                                                    </div>
                                                    <article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small slds-p-around_medium" id="section-item-expanded" aria-hidden="false">
                                                        
                                                        <div class="slds-grid slds-wrap slds-align_absolute-center">
                                                            <div class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_small slds-p-left_x-small slds-p-right_x-small">
                                                                <lightning-input type="text" label="Enter section name" required onchange={handleNewSectionInput}></lightning-input>
                                                            </div>
                                                            <div class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_xx-small slds-p-left_x-small slds-p-right_x-small">
                                                                <lightning-button 
                                                                    variant="brand" 
                                                                    label="Create" 
                                                                    title="Create"
                                                                    onclick={handleSectionCreation}>
                                                                </lightning-button>
                                                            </div>
                                                            <div class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_xx-small slds-p-left_x-small slds-p-right_x-small">
                                                                <lightning-button 
                                                                    variant="brand-outline" 
                                                                    label="Cancel" 
                                                                    title="Cancel"
                                                                    onclick={handleSectionCancel}>
                                                                </lightning-button>
                                                            </div>
                                                        </div>
                                                    </article>
                                                  </div>
                                                </div>
                                              </div>
                                            </li>
                                          </ul>
                                    </div>
                                </template>
                                <hr class="line-break-section">
                            </div>
                            
                            <div class="slds-col slds-size_12-of-12  slds-p-bottom_medium slds-p-left_large slds-p-right_medium">
                                <lightning-button 
                                    variant="brand-outline" 
                                    label="Add Question" 
                                    title="Add Question"
                                    icon-name="utility:add"
                                    icon-position="left"
                                    onclick={handleAddQuestion}>
                                </lightning-button>
                            </div>
                            <template if:true={addQuestion}>
                                <div class="slds-col slds-size_12-of-12 slds-p-bottom_x-small slds-p-left_medium slds-p-right_medium">
                                    <ul class="slds-timeline">
                                        <li>
                                          <div class={questionTimelineClasses}>
                                            <!--Add vertical line-->
                                            <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                                                <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                                            </svg>
                                            <!--End of vertical line-->
                                            <!--Add square-->
                                            <span class="slds-assistive-text">task</span>
                                            <!--End of add square-->
                                            <div class="slds-media">
                                              <div class="slds-media__figure">
                                                <button class="slds-button slds-button_icon" title="Select Question Type" aria-controls="task-item-expanded" aria-expanded="true">
                                                  <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                                                  </svg>
                                                  <span class="slds-assistive-text">{questionTypeText}</span>
                                                </button>
                                                <div class="slds-icon_container slds-icon-standard-task slds-timeline__icon" title="task">
                                                  <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                                    <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#task"></use>
                                                  </svg>
                                                </div>
                                              </div>
                                              <div class="slds-media__body">
                                                <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                                                  <div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space">
                                                    <h3 class="slds-truncate" title="Select Question Type">
                                                      <a href="#" onclick={handleQuestionTypeReopen}>
                                                        <strong>{questionTypeText}</strong>
                                                      </a>
                                                    </h3>
                                                  </div>
                                                </div>
                                                <article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small slds-p-around_medium" id="task-item-expanded" aria-hidden="false">
                                                    <div class="slds-grid slds-wrap slds-align_absolute-center">
                                                        <div class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_xx-small slds-p-left_x-small slds-p-right_x-small">
                                                            <lightning-button 
                                                                variant="Neutral" 
                                                                label="Mutiple Choice Type" 
                                                                title="Mutiple Choice Type"
                                                                onclick={handleQuestionTypeClick}>
                                                            </lightning-button>
                                                        </div>
                                                        <div class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_xx-small slds-p-left_x-small slds-p-right_x-small">
                                                            <lightning-button 
                                                                variant="Neutral" 
                                                                label="Text Type" 
                                                                title="Text Type"
                                                                onclick={handleQuestionTypeClick}>
                                                            </lightning-button>
                                                        </div>
                                                        <div class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_xx-small slds-p-left_x-small slds-p-right_xxx-small">
                                                            <lightning-button 
                                                                variant="Neutral" 
                                                                label="Checkbox type" 
                                                                title="Checkbox type"
                                                                onclick={handleQuestionTypeClick}>
                                                            </lightning-button>
                                                        </div>
                                                        <div class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_xxx-small slds-p-left_xx-small">
                                                            <lightning-button 
                                                                variant="Neutral" 
                                                                label="Radio button type" 
                                                                title="Radio button type"
                                                                onclick={handleQuestionTypeClick}>
                                                            </lightning-button>
                                                        </div>
                                                    </div>
                                                </article>
                                              </div>
                                            </div>
                                          </div>
                                        </li>
                                        <li>
                                          <div class={setionTimelineClasses}>
                                            <span class="slds-assistive-text">{sectionNameText}</span>
                                            <div class="slds-media">
                                              <div class="slds-media__figure">
                                                <button class="slds-button slds-button_icon" title={sectionNameText} aria-controls="call-item-expanded" aria-expanded="false" onclick={handleSectionReopen}>
                                                  <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                                                  </svg>
                                                  <span class="slds-assistive-text">{sectionNameText}</span>
                                                </button>
                                                <div class="slds-icon_container slds-icon-standard-log-a-call slds-timeline__icon" title="call">
                                                  <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                                    <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#log_a_call"></use>
                                                  </svg>
                                                </div>
                                              </div>
                                              <div class="slds-media__body">
                                                <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                                                  <div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space">
                                                    <h3 class="slds-truncate" title={sectionNameText} >
                                                      <a href="#" onclick={handleSectionReopen}>
                                                        <strong>{sectionNameText} </strong>
                                                      </a>
                                                    </h3>
                                                  </div>
                                                </div>
                                                <article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small" id="call-item-expanded" aria-hidden="true">
                                                    <div class="slds-grid slds-wrap slds-align_absolute-center">
                                                        <template for:each={sections} for:item="section">
                                                            <div key={section} class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_xx-small slds-p-left_x-small slds-p-right_x-small">
                                                                <!--<c-questionnaire-section-component section={mapkey.key} questions={mapkey.value}></c-questionnaire-section-component>-->
                                                                <lightning-button 
                                                                    variant="Neutral" 
                                                                    label={section}
                                                                    title={section}
                                                                    onclick={handleSectionClick}>
                                                                </lightning-button>
                                                            </div>
                                                        </template>
                                                    </div>
                                                </article>
                                              </div>
                                            </div>
                                          </div>
                                        </li>
                                        <li>
                                          <div class={actionTimelineClasses}>
                                            <span class="slds-assistive-text">email</span>
                                            <div class="slds-media">
                                              <div class="slds-media__figure">
                                                <button class="slds-button slds-button_icon" title={actionTypeText} aria-controls="email-item-expanded" aria-expanded="false">
                                                  <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                                                  </svg>
                                                  <span class="slds-assistive-text">{actionTypeText}</span>
                                                </button>
                                                <div class="slds-icon_container slds-icon-standard-email slds-timeline__icon" title="email">
                                                  <svg class="slds-icon slds-icon_small" aria-hidden="true">
                                                    <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#email"></use>
                                                  </svg>
                                                </div>
                                              </div>
                                              <div class="slds-media__body">
                                                <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                                                  <div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space">
                                                    <h3 class="slds-truncate" title="Select action">
                                                      <a href="#">
                                                        <strong>Select action</strong>
                                                      </a>
                                                    </h3>
                                                    <div class="slds-no-flex">
                                                      <span class="slds-icon_container slds-icon-utility-groups" title={actionTypeText}>
                                                        <svg class="slds-icon slds-icon_xx-small slds-icon-text-default slds-m-left_x-small" aria-hidden="true">
                                                          <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#groups"></use>
                                                        </svg>
                                                        <span class="slds-assistive-text">{actionTypeText}</span>
                                                      </span>
                                                      <!--<span class="slds-icon_container slds-icon-utility-attach" title="Has attachments">
                                                        <svg class="slds-icon slds-icon_xx-small slds-icon-text-default slds-m-left_x-small" aria-hidden="true">
                                                          <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#attach"></use>
                                                        </svg>
                                                        <span class="slds-assistive-text">Has attachments</span>
                                                      </span>-->
                                                    </div>
                                                  </div>
                                                </div>
                                                <article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small" id="email-item-expanded" aria-hidden="true">
                                                    <div class="slds-grid slds-wrap slds-align_absolute-center">
                                                        <div class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_xx-small slds-p-left_x-small slds-p-right_x-small">
                                                            <lightning-button 
                                                                variant="brand" 
                                                                label="Create" 
                                                                title="Create"
                                                                onclick={handleQuestionCreation}>
                                                            </lightning-button>
                                                        </div>
                                                        <div class="slds-col slds-size_8-of-8 slds-p-bottom_xx-small slds-p-bottom_xx-small slds-p-left_x-small slds-p-right_x-small">
                                                            <lightning-button 
                                                                variant="brand-outline" 
                                                                label="Cancel" 
                                                                title="Cancel"
                                                                onclick={handleCreationCancel}>
                                                            </lightning-button>
                                                        </div>
                                                    </div>
                                                </article>
                                              </div>
                                            </div>
                                          </div>
                                        </li>
                                      </ul>
                                </div>
                            </template>
                        </article>
                    </div>
                    <!--End of Add Components Card-->

                     <!--Start of Add Components Card-->
                     <div class="slds-col slds-size_12-of-12 slds-p-top_small slds-p-bottom_small slds-p-left_medium slds-p-right_medium">
                        <article class="slds-card questionnaire-settings-card">
                            
                        </article>
                    </div>
                    <!--End of Add Components Card-->
                    
                </div>
            </div>
        </article>
    </div>
</template>