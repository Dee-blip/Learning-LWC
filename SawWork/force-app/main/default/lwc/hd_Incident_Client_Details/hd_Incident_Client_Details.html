<template>
    <div class="slds-panel slds-is-relative">
        <lightning-spinner if:true={isLoading} variant="brand" size="medium" data-id="spinner"></lightning-spinner>
        <lightning-record-view-form density="comfy" record-id={recordId} object-api-name="BMCServiceDesk__Incident__c">
            <div class="bg slds-m-bottom_small ">
                <div class="slds-grid">
                    <div class="slds-col slds-align-middle slds-size_4-of-4 ">
                        <div class="slds-media slds-media_center">
                            <div class="slds-media__figure display-inline"
                                style="margin-left:5%;margin-top: 6.50rem;">

                                <div class="entityPhotoSpecificity avat defaultPhoto slds-avatar slds-avatar_profile-image-medium"
                                    style={backgroundStyle}></div>
                                <!-- <lightning-avatar size="Large" src={photoUrl}  initials ={initials} fallback-icon-name="standard:connected_apps" alternative-text="No Image Found!" class="slds-m-left_medium avat"></lightning-avatar> -->
                            </div>
                            <div class="slds-media__body slds-m-left_medium" style="margin-top: 7.00rem;">
                                <h1 class="slds-truncate">
                                    <span class="slds-text-heading_medium">
                                        <a target="_blank" href="javascript:void(0)" data-id={clientId}
                                            onclick={gotoRecord}>{clientName}</a>
                                    </span>
                                </h1>
                                <h2 class="slds-text-color_weak">{designation}
                                </h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div
                class="slds-card__body slds-card__body_inner slds-m-top_xx-large slds-m-bottom_xxx-small slds-p-horizontal_medium">
                <br /><br /><br />
                <div class="slds-page-header__row slds-theme_shade slds-m-top_x-small slds-m-bottom_x-small"
                    style="border-radius: 10px;">
                    <div class="slds-page-header__col-details">
                        <div class="slds-media slds-media_center">
                            <lightning-button-stateful icon-name-when-off="utility:chevronright"
                                icon-name-when-on="utility:chevrondown" variant="text" selected={showClient}
                                onclick={handleClientChevron}>
                            </lightning-button-stateful>
                            <div class="slds-media__figure slds-p-around_xx-small">
                                <lightning-icon icon-name="action:add_contact" size="x-small"
                                    alternative-text="Info" title="Information">
                                </lightning-icon>
                            </div>
                            <div class="slds-media__body">
                                <div class="slds-page-header__name">
                                    <h2>
                                        <span class="slds-truncate accordionTitle">
                                            Client Information
                                        </span>
                                    </h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <template if:true={showClient}>
                    <lightning-layout multiple-rows
                        class="page-section slds-m-top_xx-small slds-m-bottom_x-small slds-size_12-of-12">
                        <template for:each={showFields} for:item="field">
                            <lightning-layout-item class="slds-p-left_x-small" size="6" key={field.fieldapiname}
                                if:true={field.isvisible}>
                                <lightning-output-field field-name={field.fieldapiname}></lightning-output-field>
                            </lightning-layout-item>
                        </template>
                    </lightning-layout>
                </template>
            </div>
        </lightning-record-view-form>
    </div>
</template>