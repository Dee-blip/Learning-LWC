<template>
    <ul class="slds-timeline">
        <template for:each={dependentQuestionsWithPreviewAttribute} for:item="question">
        <li key={question.Id} data-id={question.Id}>
          <div class="slds-timeline__item_expandable slds-timeline__item_task">
            <!--Draw vertical line-->
            <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
            </svg>
            <span class="slds-assistive-text">task</span>

            <div class="slds-media">
              <!--Start of media figure-->
              <div class="slds-media__figure">
                <button class="slds-button slds-button_icon" title="" aria-controls="task-item-base">
                  <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                  </svg>
                </button>
                <div class="slds-icon_container slds-icon-standard-task slds-timeline__icon" title="task">
                  <svg class="slds-icon slds-icon_small" aria-hidden="true">
                    <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#task"></use>
                  </svg>
                </div>
              </div>
              <!--End of media figure-->

              <!--Start of body-->
              <div class="slds-media__body">
                <div class="slds-grid_align-spread slds-timeline__trigger">
                  <!--Truncated preview for dependent question-->
                  <template if:true={question.TruncatedPreview}>
                    <div class="slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space">
                      <h3 class="slds-truncate" title="1.2.1 Here is the first dependent question...">
                        <a href="#" onclick={showCompletePreview} id={question.Id} value={question.Id}>
                          <strong class="slds-truncate">{question.Section_Serial_Number__c}.{question.Serial_Number__c}.{question.Dependent_Question_Serial__c}   {question.Question_Text__c}</strong>
                        </a>
                      </h3>
                    </div>
                  </template>
                  <!--End of truncated preview-->
                  <!--Show complete preview-->
                  <template if:false={question.TruncatedPreview}>
                    <div class="slds-grid_vertical-align-center slds-no-space">
                      <c-multiple-choice-question-edit-component 
                          question={question} 
                          previewmode={previewmode}
                          showpreview={showPreview}
                          onupdatesectionafterdelete={updateSectionQuestions}
                          onupdateaftermove={updateSectionQuestions}
                          showdependentpreview={showdependentpreview}
                      ></c-multiple-choice-question-edit-component>
                    </div>
                  </template>
                  <!--End of complete preview-->
                </div>
              </div>
              <!--End of body-->
            </div>
          </div>
        </li>
        </template>

        <template if:true={showQuestionTypeSelection}>
            <li>
                <div class="slds-timeline__item_expandable slds-timeline__item_task slds-is-open">
                <!--Add vertical line-->
                <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                </svg>
                <!--End of vertical line-->
                <!--Add square-->
                <span class="slds-assistive-text">task</span>
                <!--End of add square-->
                <div class="slds-media">
                    <div class="slds-media__figure">
                    <button class="slds-button slds-button_icon" title="Select Question Type" aria-controls="task-item-expanded" aria-expanded="true">
                        <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                        </svg>
                        <span class="slds-assistive-text">Select question type</span>
                    </button>
                    <div class="slds-icon_container slds-icon-standard-task slds-timeline__icon" title="task">
                        <svg class="slds-icon slds-icon_small" aria-hidden="true">
                        <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#task"></use>
                        </svg>
                    </div>
                    </div>
                    <div class="slds-media__body">
                    <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                        <div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space">
                        <h3 class="slds-truncate" title="Select Question Type">
                            <a href="#" onclick={handleQuestionTypeReopen}>
                            <strong>Select question type</strong>
                            </a>
                        </h3>
                        </div>
                    </div>
                    <article class="slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small slds-p-around_medium" id="task-item-expanded" aria-hidden="false">
                        <lightning-button 
                            variant="Neutral" 
                            label="Mutiple Choice Type" 
                            title="Mutiple Choice Type"
                            onclick={handleQuestionTypeClick}>
                        </lightning-button>
                        <lightning-button 
                            variant="Neutral" 
                            label="Text Type" 
                            title="Text Type"
                            onclick={handleQuestionTypeClick}>
                        </lightning-button>
                        <lightning-button 
                            variant="Neutral" 
                            label="Checkbox type" 
                            title="Checkbox type"
                            onclick={handleQuestionTypeClick}>
                        </lightning-button>
                        <lightning-button 
                            variant="Neutral" 
                            label="Radio button type" 
                            title="Radio button type"
                            onclick={handleQuestionTypeClick}>
                        </lightning-button>
                    </article>
                    </div>
                </div>
                </div>
            </li>
        </template>

        <template if:true={showEditQuestion}>
            <li>
                <div class="slds-timeline__item_expandable slds-timeline__item_task">
                  <!--Draw vertical line-->
                  <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                      <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                  </svg>
                  <span class="slds-assistive-text">task</span>
      
                  <div class="slds-media">
                    <!--Start of media figure-->
                    <div class="slds-media__figure">
                      <button class="slds-button slds-button_icon" title="" aria-controls="task-item-base">
                        <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                          <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                        </svg>
                      </button>
                      <div class="slds-icon_container slds-icon-standard-task slds-timeline__icon" title="task">
                        <svg class="slds-icon slds-icon_small" aria-hidden="true">
                          <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#task"></use>
                        </svg>
                      </div>
                    </div>
                    <!--End of media figure-->
      
                    <!--Start of body-->
                    <div class="slds-media__body">
                      <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                        <div class="slds-grid slds-grid_vertical-align-center slds-no-space">
                            <c-multiple-choice-question-edit-component 
                                question={createdQuestion} 
                                previewmode={previewmode}
                                onupdatesectionafterdelete={updateSectionQuestions}
                                onupdateaftermove={updateSectionQuestions}
                            ></c-multiple-choice-question-edit-component>
                        </div>
                      </div>
                    </div>
                    <!--End of body-->
                  </div>
                </div>
              </li>
        </template>

        <template if:false={showalldependent}>
          <li>
            <div class="slds-timeline__item_expandable slds-timeline__item_task">
              <!--Draw vertical line-->
              <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                  <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
              </svg>
              <span class="slds-assistive-text">task</span>
  
              <div class="slds-media">
                <!--Start of media figure-->
                <div class="slds-media__figure">
                  <button class="slds-button slds-button_icon" title="" aria-controls="task-item-base">
                    <svg class="slds-button__icon slds-timeline__details-action-icon" aria-hidden="true">
                      <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                    </svg>
                  </button>
                  <div class="slds-icon_container slds-icon-standard-task slds-timeline__icon" title="task">
                    <svg class="slds-icon slds-icon_small" aria-hidden="true">
                      <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#task"></use>
                    </svg>
                  </div>
                </div>
                <!--End of media figure-->
  
                <!--Start of body-->
                <div class="slds-media__body">
                    <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                      <div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space">
                          <button class="slds-button slds-button_outline-brand" onclick={handleNewDependentClick}>Add dependent question</button>
                      </div>
                    </div>
                </div>
                <!--End of body-->
              </div>
            </div>
          </li>
          </template>

      </ul>
</template>