<template>
    <div>
        <!-- ********************************* SPINNER *********************************** -->
       
        <template if:true={loadSpinner}>
            <div class="forceModalSpinner">
                <div class="modal-glass" style="opacity: 0.2;">&nbsp;</div>
                <div class="forceInlineSpinner indicatorContainer" aria-hidden="false" role="alert" data-aura-class="forceInlineSpinner">
                    <div class="forceDotsSpinner" data-aura-class="forceDotsSpinner">
                        <div class="slds-spinner slds-spinner_brand slds-spinner_medium" role="status">
                            <span class="slds-assistive-text">Loading...</span>
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </div><!--render facet: 431:0;p-->
                </div>
            </div>
        </template>
        

        <!-- ********************************* NOTIFICATION CENTER ********************************* -->
        <div class="sidenav">
            <div class="slds-panel__header">
                <a onclick={closeNav}>
                    <lightning-icon icon-name="utility:chevronright" alternative-text="close"
                        title="close" size="x-small">
                    </lightning-icon></a><br />
                <h2 class="slds-panel__header-title slds-text-heading_small" style="color:#005fb2; text-align: center">
                    <b>{notificationCenterHeader}</b>
                </h2>
            </div>

            <div class="slds-panel__body">
                <template for:each={notificationlist} for:item="eachItem">
                    <p class="slds-p-horizontal_small" key={eachItem.akamId}>
                        <button class="slds-button slds-button_outline-brand" value={eachItem.recUrl} onclick={openNewTab}>
                            {eachItem.Body}!
                        </button>
                    </p>
                    <br key={eachItem.akamId} />
                </template>
            </div>
        </div>
        
        <!-- **************************** SUMMARY DASHBOARD **************************** -->
        <div class="slds-card" style="background-color:lightgrey;">
            <div class="slds-grid slds-gutters" style="padding: 2vh;">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">

                    <template if:true={displayFilter}>
                        <lightning-button-icon icon-name="utility:chevrondown" variant="bare"
                            style="padding-right: 6px; padding-left: 14px;" alternative-text="Collapse" title="Collapse"
                            onclick={hideFilter}>
                        </lightning-button-icon>
                    </template>

                    <template if:false={displayFilter}>
                        <lightning-button-icon icon-name="utility:chevronright" variant="bare"
                            style="padding-right: 6px; padding-left: 14px;" alternative-text="Collapse" title="Collapse"
                            onclick={showFilter}>
                        </lightning-button-icon>
                    </template>

                    <div class="slds-media slds-col" style="padding-left: 0px;align-items: center">
                        <lightning-icon icon-name="utility:resource_capacity" alternative-text="Unassigned Cases"
                            variant="inverse" title="Unassigned Cases" size="medium"></lightning-icon>
                        <span title="Unassigned Cases" class="summaryDashboard">White Cases :&nbsp;
                            <button style="color: #006dcc" value="white" title="Click to view Cases Unassigned"
                                onclick={getNavRecords}>
                                {whiteCount}
                            </button>
                        </span>
                    </div>
                    
                    <div class="slds-media slds-col" style="padding-left: 0px;align-items: center">
                        <lightning-icon icon-name="utility:alert" alternative-text="Missed Case Acknowledgement"
                            variant="error" title="Missed Case Acknowledgement" size="medium"></lightning-icon>
                        <span title="Missed Case Acknowledgement" class="summaryDashboard">Red Cases :&nbsp;
                            <button style="color: #006dcc" value="red" title="Click to view Cases with Missed Case Acknowledgement"
                                onclick={getNavRecords}>
                                {redCount}
                            </button>
                        </span>
                    </div>

                    <div class="slds-media slds-col" style="align-items: center">
                        <lightning-icon icon-name="utility:groups" alternative-text="Customer Response Received"
                            variant="warning" title="Customer Response Received" size="medium"></lightning-icon>
                        <span class="summaryDashboard" title="Customer Response Received">Yellow Cases :&nbsp;
                            <button style="color: #006dcc" value="yellow" title="Click to view Cases with Customer Response"
                                onclick={getNavRecords}>
                                {yellowCount}
                            </button>
                        </span>
                    </div>

                    <div class="slds-media slds-col" style="align-items: center">
                        <lightning-icon icon-name="utility:clock" alternative-text="Passed Duedate" variant="error"
                            title="Passed Duedate" size="medium">
                        </lightning-icon>
                        <span class="summaryDashboard" title="Passed Duedate">
                            Overdue Tasks :&nbsp;
                            <button style="color: #006dcc" value="overdue" title="Click to view Overdue Tasks" onclick={getNavRecords}>
                                {overdueCount}
                            </button>
                        </span>
                    </div>

                    <div class="slds-col rightAlign">
                        <lightning-button label="Shift Handover Report" icon-name="utility:email" value="CURRENTSHIFT"
                            onclick={navigateToHandoverReport}> </lightning-button>
                    </div>

                </header>
            </div>
        </div>

        <!-- **************************** FILTERS **************************** -->
        <template if:true={displayFilter}>
            <div class="slds-card filterDiv" style="background: #f3f2f2">
                
                <div class="slds-card" style="background: #f3f2f2">
                    <div class="slds-grid slds-gutters slds-wrap" style="padding: 2vh;">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">

                            <div class="slds-media slds-col slds-size_2-of-16" style="padding-right: 0.5rem; width: 8%;">
                                <lightning-checkbox-group
                                    name="Case Severity"
                                    label="Case Severity"
                                    value={caseSeveritySelected}
                                    options={caseSeverityVal}
                                    onchange={caseSeverityChanged}
                                ></lightning-checkbox-group>
                            </div>
                            <div class="slds-media slds-col slds-size_2-of-16" style="padding-right: 0.25rem; width: 14%;">
                                <lightning-checkbox-group
                                name="Geography"
                                label="Geography"
                                value={GeographiesSelected}
                                options={GeographiesVal}
                                onchange={GeographiesChanged}
                            ></lightning-checkbox-group> 
                            </div>

                            <div class="slds-media slds-col slds-size_2-of-16" style="padding-right: 0.5rem; width: 9%;">
                                    <lightning-checkbox-group
                                        name="Color Category"
                                        label="Color Category"
                                        value={colorCategorySelected}
                                        options={colorCategoryVal}
                                        onchange={colorCategoryChanged}
                                    ></lightning-checkbox-group>
                            </div>

                            <div class="slds-media slds-col slds-size_2-of-16" style="padding-right: 0.25rem; width: 13.8%;">
                                    <lightning-combobox
                                        name="Priority Customer"
                                        label="Priority Customer"
                                        value={priorityCustomerSelected}
                                        options={priorityCustomerSelectedVal}
                                        onchange={priorityCustomerSelectedChanged}
                                    ></lightning-combobox>
                            </div>
                                
                            <div class="slds-media slds-col slds-size_2-of-16" style="padding-right: 0.25rem; width: 13.8%;">
                                <lightning-combobox
                                    name="Fund Type"
                                    label="Fund Type"
                                    value={caseFundTypeSelected}
                                    options={caseFundTypeVal}
                                    onchange={caseFundTypeChanged}
                                ></lightning-combobox>
                            </div>

                            <div class="slds-media slds-col slds-size_2-of-16" style="padding-right: 0.25rem; width: 13.8%;">
                                <lightning-combobox
                                    name="Logo Type"
                                    label="Logo Type"
                                    value={caseLogoTypeSelected}
                                    options={caseLogoTypeVal}
                                    onchange={caseLogoTypeChanged}
                                ></lightning-combobox>
                            </div>

                            <div class="slds-media slds-col slds-size_2-of-16" style="padding-right: 0.25rem; width: 13.8%;">
                                <lightning-combobox
                                    name="Sub-Type"
                                    label="Sub-Type"
                                    value={caseSubTypeSelected}
                                    options={caseSubTypeVal}
                                    onchange={caseSubTypeChanged}
                                ></lightning-combobox>
                            </div>
                            
                           
                            <div class="slds-media slds-col slds-size_2-of-16 statusCls" style="padding-right: 0.25rem; width: 13.8%;">
                                <lightning-combobox
                                    name="Task Status"
                                    label="Task Status"
                                    value={taskStatusSelected}
                                    options={taskStatusVal}
                                    onchange={taskStatusChanged}
                                ></lightning-combobox>
                            </div>

                        </header>
                    </div>
                </div>

                <!-- **************************** SAVE/RESET FILTERS **************************** -->
                <div class="slds-card slds-align--absolute-center" style="background: #f3f2f2">
                    <div class="slds-grid slds-gutters slds-wrap">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media slds-col slds-size_2-of-2" style="padding-top: 0.5rem; padding-bottom: 0.5rem;">
                
                                <lightning-button variant="brand" icon-name="utility:save" label="Save" title="Save"
                                    onclick={saveAndApply} class="slds-button slds-m-left_x-small">
                                </lightning-button>

                                <lightning-button variant="neutral" label="Reset" title="Reset" onclick={reset}
                                    class="slds-button slds-m-left_x-small">
                                </lightning-button>
                                
                            </div>
                        </header>
                    </div>
                </div>
            </div>
        </template>

        <!-- **************************** CASES DASHBOARD **************************** -->
        <c-sc-provisioning-case-dashboard oncaseevent={resetPollerAndRefresh}></c-sc-provisioning-case-dashboard>

        <!-- **************************** TASKS DASHBOARD **************************** -->
        <c-sc-provisioning-task-dashboard ontaskevent={resetPollerAndRefresh}></c-sc-provisioning-task-dashboard>
    </div>
</template>