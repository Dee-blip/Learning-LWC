<template>
    <!--***************** SPINNER *********************-->
    <div>
        <template if:true={loadSpinner}>
            <div class="forceModalSpinner">
                <div class="modal-glass" style="opacity: 0.2;">&nbsp;</div>
                <div class="forceInlineSpinner indicatorContainer" aria-hidden="false" role="alert" data-aura-class="forceInlineSpinner">
                    <div class="forceDotsSpinner" data-aura-class="forceDotsSpinner">
                        <div class="slds-spinner slds-spinner_brand slds-spinner_medium" role="status">
                            <span class="slds-assistive-text">Loading...</span>
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </div><!--render facet: 431:0;p-->
                </div>
            </div>
        </template>
    </div>
    <!--***************** END OF SPINNER *********************-->

    <!--***************** NOTIFICATION CENTER  *********************-->
    <div class="sidenav">
        <div class="slds-panel__header">
            <a onclick={closeNav}>
                <lightning-icon icon-name="utility:chevronright" alternative-text="close"
                    title="close" size="x-small">
                </lightning-icon></a><br />
            <h2 class="slds-panel__header-title slds-text-heading_small" style="color:#005fb2; text-align: center">
                <b>{notificationCenterHeader}</b>
            </h2>
        </div>

        <div class="slds-panel__body">
            <template for:each={notificationlist} for:item="eachItem">
                <p class="slds-p-horizontal_small" key={eachItem.akamId}>
                    <button class="slds-button slds-button_outline-brand" value={eachItem.recUrl} onclick={openNewTab}>
                        {eachItem.Body}!
                    </button>
                </p>
                <br key={eachItem.akamId} />
            </template>
        </div>
    </div>
    <!--***************** END OF NOTIFICATION CENTER  *********************-->

    <!--***************** SUMMARY *********************-->
    <div>
        <div class="slds-grid">
            <div class="slds-col slds-size_12-of-12">
                <div class="slds-card" style="background-color:lightgrey;">
                    <div class="slds-grid slds-gutters slds-wrap summaryDash" style="padding-left:3vh;">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media slds-col" style="padding-left: 0px;align-items: center">
                                <lightning-icon icon-name="utility:resource_capacity" alternative-text="Unassigned Cases"
                                    variant="inverse" title="Unassigned Cases" size="medium"></lightning-icon>
                                <span title="Unassigned Cases" class="summaryDashboard">White Cases :&nbsp;
                                    <button style="color: #006dcc" value="white" title="Click to view Unassigned Cases"
                                        onclick={getNavRecords}>
                                        {whiteCount}
                                    </button>
                                </span>
                            </div>
                            <div class="slds-media slds-col" style="padding-left: 0px;align-items: center">
                                <lightning-icon icon-name="utility:groups" alternative-text="Customer Response Received"
                                    variant="warning" title="Customer Response Received" size="medium"></lightning-icon>
                                <span title="Customer Response Received" class="summaryDashboard">Yellow Cases :&nbsp;
                                    <button style="color: #006dcc" value="yellow" title="Click to view Cases with Customer Response Received"
                                        onclick={getNavRecords}>
                                        {yellowCount}
                                    </button>
                                </span>
                            </div>
                            <div class="slds-media slds-col" style="padding-left: 0px;align-items: center">
                                <lightning-icon icon-name="utility:alert" alternative-text="Pending Initial Response"
                                    variant="error" title="Pending Initial Response" size="medium" class="transition-icon"></lightning-icon>
                                <span title="Pending Initial Response" class="summaryDashboard">Red Cases :&nbsp;
                                    <button style="color: #006dcc" value="red" title="Click to view Cases with Pending Initial Response"
                                        onclick={getNavRecords}>
                                        {redCount}
                                    </button>
                                </span>
                            </div>
                            <div class="slds-media slds-col" style="padding-left: 0px;align-items: center">
                                <lightning-icon icon-name="utility:priority" alternative-text="Cases In Transition"
                                    variant="warning" title="Cases In Transition" size="medium"></lightning-icon>
                                <span title="Cases In Transition" class="summaryDashboard">Cases In Transition :&nbsp;
                                    <button style="color: #006dcc" value="transition" title="Click to view Cases In Transition"
                                        onclick={getNavRecords}>
                                        {transitionCount}
                                    </button>
                                </span>
                            </div>
                            
                        </header>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--***************** END OF SUMMARY *********************-->

    <!--***************** FILTERS & TOGGLE *********************-->
    <div>
        <div class="slds-grid" style="height: auto; margin-top: 10px;max-height: 90vh; zoom:100%;">
            <!--***************** FILTERS *********************-->
            <div class="slds-col slds-size_12-of-12">
                <div class="slds-card" style="background: #f3f2f2; margin-right:0px;height: 10vh;">
                    <div class="slds-grid slds-gutters slds-wrap filterDiv" style="padding-top: 3vh;">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media slds-col slds-size_5-of-12" style="padding-right: 0.25rem;">
                                <lightning-checkbox-group
                                    name="Case Work Type"
                                    label="Case Work Type"
                                    value={caseWorkTypeSelected}
                                    options={caseWorkTypeVal}
                                    onchange={caseWorkTypeChanged}
                                ></lightning-checkbox-group>
                            </div>
                            <div class="slds-media slds-col slds-size_5-of-12" style="padding-right: 0.25rem;">
                                <lightning-checkbox-group
                                    name="Case Severity"
                                    label="Case Severity"
                                    value={caseSeveritySelected}
                                    options={caseSeverityVal}
                                    onchange={caseSeverityChanged}
                                ></lightning-checkbox-group>
                            </div>

                            <!--***************** SAVE & RESET FILTERS *********************-->
                            <div class="slds-media slds-col slds-size_1-of-12" style="padding-right: 0.25rem;">
                                <lightning-button variant="brand" icon-name="utility:save" label="Save" title="Save"
                                    onclick={saveAndApply} class="slds-button slds-m-left_x-small">
                                </lightning-button>
                            </div>
                            <div class="slds-media slds-col slds-size_1-of-12" style="padding-right: 0.25rem;">
                                    <lightning-button variant="neutral" label="Reset" title="Reset" onclick={reset}
                                    class="slds-button slds-m-left_x-small">
                                </lightning-button>
                            </div>
                            <!--***************** END OF SAVE & RESET FILTERS *********************-->
                        </header>
                    </div>
                </div>
            </div>
            <!--***************** END OF FILTERS *********************-->
        </div>
    </div>
    <!--***************** END OF FILTERS & TOGGLE *********************-->
    
    <!--***************** CASE TABLE *********************-->
    <div class="slds-card" style="height: auto; margin-top: 10px;max-height: 70vh; zoom:100%;">
        <div class="slds-grid slds-gutters headerStyle">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure slds-col slds-size_1-of-6" style="margin-right: 20vh;">
                    <ul class="slds-list_horizontal slds-media_center">
                        <li>
                            <lightning-icon icon-name="standard:case" size="small" alternative-text="Cases" title="Cases">
                            </lightning-icon>
                        </li>

                        <li>
                            <span style="font-size:18px;padding-left: 10px;">Cases ({totalCases})</span>
                        </li>
                    </ul>
                </div>

                <!--***************** TOGGLE *********************-->
                <div class="slds-media slds-col slds-size_1-of-6" style="padding-right: 0.25rem;">
                    <lightning-input type="toggle" 
                        label="My Cases" class="myBox"
                        name="my" message-toggle-active="" 
                        data-element="myToggle" 
                        message-toggle-inactive="" 
                        onchange={toggleChecked}>
                    </lightning-input>
                </div>
                <div class="slds-media slds-col slds-size_1-of-6" style="padding-right: 0.25rem;">
                    <lightning-input type="toggle" 
                        label="Unassigned" class="unassignedBox"
                        name="unassigned" message-toggle-active="" 
                        data-element="unassignedToggle" 
                        message-toggle-inactive="" 
                        onchange={toggleChecked}>
                    </lightning-input>
                </div>
                <div class="slds-media slds-col slds-size_1-of-6" style="padding-right: 0.25rem;">
                    <lightning-input type="toggle" 
                        label="Cases in Transition" class="transitionBox"
                        name="transition" message-toggle-active="" 
                        data-element="transitionToggle" 
                        message-toggle-inactive="" 
                        onchange={toggleChecked}>
                    </lightning-input>
                </div>
                <!--***************** END OF TOGGLE *********************-->

                <div class="slds-col slds-size_1-of-6" style="padding: 0px;">
                    <lightning-input value={caseSearchText} placeholder="Search Cases..." type="text"
                    name="Case Search" class="labelHidden" onchange={delayedSearch}>                      
                    </lightning-input>
                </div>
                <div class="slds-col" style="padding-left: 0px;">
                    <button class="slds-button" onclick={clearSearchInput}>
                        <lightning-icon icon-name="utility:clear" alternative-text="Clear" size="x-small"></lightning-icon>
                    </button>
                </div>
                <div class="slds-col">
                    <button class="slds-button" onclick={refreshCaseTable}>
                        <lightning-icon icon-name="action:refresh" alternative-text="Refresh" size="x-small">
                        </lightning-icon>
                    </button>
                </div>
            </header>
        </div>

        <div class="datatableStyle" id="dt" data-id="pCase">
            <div id="divForDatatable" class="panelCase" style="height:70vh;">
                <lightning-datatable 
                    key-field="caseId"
                    data={slicedCaselist}
                    columns={caseColumns}
                    hide-checkbox-column=true
                    wrap-text-max-lines="2" 
                    column-widths-mode="auto" 
                >
                </lightning-datatable>
            </div>
        </div>

        <div class="slds-grid">
            <div class="slds-col slds-size_12-of-12">
                <div class="slds-card" style="background: #f3f2f2">
                    <div class="slds-grid slds-gutters slds-wrap summaryDash">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-theme--default slds-align_absolute-center" style="margin-top:2px;">
                                <lightning-button variant="brand" label={currentpage}></lightning-button>
                                <template for:each={paginationRange} for:item="var1">
                                    <lightning-button variant="brand-outline" data-item={var1} label={var1} key={var1}
                                    onclick={handlePaginationClick}></lightning-button>
                                </template>
                            </div>
                        </header>
                    </div>
                </div>
            </div>    
        </div>
        
       
    </div>
    <!--***************** END OF CASE TABLE *********************-->
</template>