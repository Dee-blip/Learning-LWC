<template>
    <div>
        <!-- 
        <div class="modalSpinner">
            <lightning-spinner alternative-text="Loading" variant="brand" size="medium">
            </lightning-spinner>
        </div>
        -->
        
        <!--<div>
            <template if:true={loadSpinner2}>
                <div class="modal-glass" data-aura-rendered-by="424:0;p">&nbsp;</div>
                    <div style="opacity: 0.7;" class="slds-spinner_container forceModalSpinner">
                        <lightning-spinner alternative-text="Loading" variant="brand" size="medium">
                        </lightning-spinner>
                    </div>
                </div>
            </template>
        </div>-->

        <template if:true={loadSpinner}>
            <div class="forceModalSpinner testModal" style="z-index: 99 !important">
                <div class="modal-glass" style="opacity: 0.2;">&nbsp;</div>
                <div class="forceInlineSpinner indicatorContainer" aria-hidden="false" role="alert" data-aura-class="forceInlineSpinner">
                    <div class="forceDotsSpinner" data-aura-class="forceDotsSpinner">
                        <div class="slds-spinner slds-spinner_brand slds-spinner_medium" role="status">
                            <span class="slds-assistive-text">Loading...</span>
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <!-- ********************************* NOTIFICATION CENTER ********************************* -->
        <div class="sidenav">
            <div class="slds-panel__header">
                <a onclick={closeNav}>
                        <lightning-icon icon-name="utility:chevronright" alternative-text="close"
                        title="close" size="x-small">
                    </lightning-icon></a><br />
                <h2 class="slds-panel__header-title slds-text-heading_small" style="color:#005fb2; text-align: center">
                    <b>{notificationCenterHeader}</b>
                </h2>
            </div>

            <div class="slds-panel__body">
                <template for:each={notificationlist} for:item="eachItem">
                    <p class="slds-p-horizontal_small" key={eachItem.akamId}>
                        <button class="slds-button slds-button_outline-brand" value={eachItem.recUrl} onclick={openNewTab}>
                            {eachItem.Body}!
                        </button>
                    </p>
                    <br key={eachItem.akamId} />
                </template>
            </div>
        </div>

        <!-- **************************** SUMMARY DASHBOARD **************************** -->
        <div>
            <div class="slds-grid">
                <div class="slds-col slds-size_9-of-12">
                    <div class="slds-card" style="background: #f3f2f2">
                        <div class="slds-grid slds-gutters summaryDash">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <!--
                                    <div class="slds-media slds-col slds-size_1-of-5">
                                        <lightning-combobox
                                            name="Summarise"
                                            value={summaryValueSelected}
                                            options={summaryVal}
                                            variant="label-hidden">
                                        </lightning-combobox>
                                    </div>
                                    -->
                                <template if:true={displayFilter}>
                                    <lightning-button-icon icon-name="utility:chevrondown" variant="bare"
                                                           style="padding-right: 6px; padding-left: 14px;" alternative-text="Collapse" title="Collapse"
                                                           onclick={hideFilter}>
                                    </lightning-button-icon>
                                </template>

                        <template if:false={displayFilter}>
                            <lightning-button-icon icon-name="utility:chevronright" variant="bare"
                                style="padding-right: 6px; padding-left: 14px;" alternative-text="Collapse" title="Collapse"
                                onclick={showFilter}>
                            </lightning-button-icon>
                        </template>

                        <div class="slds-media slds-col" style="padding-left: 0px;align-items: center">
                            <lightning-icon icon-name="utility:alert" alternative-text="Missed Case Acknowledgement"
                                variant="error" title="Missed Case Acknowledgement" size="medium"></lightning-icon>
                            <span title="Missed Case Acknowledgement" class="summaryDashboard">Red Cases :&nbsp;
                                <button style="color: #006dcc" value="red" title="Click to view Cases with Missed Case Acknowledgement"
                                    onclick={getNavRecords}>
                                    {redCount}
                                </button>
                            </span>
                            <!-- <lightning-helptext content="Missed Case Acknowledgement"></lightning-helptext> -->
                        </div>

                        <div class="slds-media slds-col" style="align-items: center">
                            <lightning-icon icon-name="utility:groups" alternative-text="Customer Response Received"
                                variant="warning" title="Customer Response Received" size="medium"></lightning-icon>
                            <span class="summaryDashboard" title="Customer Response Received">Yellow Cases :&nbsp;
                                <button style="color: #006dcc" value="yellow" title="Click to view Cases with Customer Response"
                                    onclick={getNavRecords}>
                                    {yellowCount}
                                </button>
                            </span>
                            <!-- <lightning-helptext content="Customer Response Received"></lightning-helptext> -->
                        </div>

                        <div class="slds-media slds-col" style="align-items: center">
                            <lightning-icon icon-name="utility:clock" alternative-text="Passed Duedate" variant="error"
                                title="Passed Duedate" size="medium">
                            </lightning-icon>
                            <span class="summaryDashboard" title="Passed Duedate">
                                Overdue Tasks :&nbsp;
                                <button style="color: #006dcc" value="overdue" title="Click to view Overdue Tasks" onclick={getNavRecords}>
                                    {overdueCount}
                                </button>
                            </span>
                            <!-- <lightning-helptext content="Passed Duedate"></lightning-helptext> -->
                        </div>

                        <div class="slds-col rightAlign">
                            <lightning-button-group>
                                <lightning-button label="Shift Handover Report" icon-name="utility:email" value="CURRENTSHIFT"
                                    onclick={navigateToHandoverReport}>
                                </lightning-button>
                                <lightning-button-menu menu-alignment="right" alternative-text="Show menu" variant="border-filled">
                                    <lightning-menu-item label="Report for Previous Shift" prefix-icon-name="utility:email" 
                                        value="PREVIOUSSHIFT" onclick={navigateToHandoverReport}>
                                    </lightning-menu-item>
                                </lightning-button-menu>
                            </lightning-button-group>
                        </div>
                        <!-- 
                        <div class="slds-col rightAlign">
                            <button class="slds-button"  onclick={populateData}>
                                <lightning-icon icon-name="action:refresh" variant="success" alternative-text="Refresh" size="x-small">
                                </lightning-icon>
                            </button>
                        </div> -->
                    </header>
                </div>
            </div>

                    <!-- **************************** FILTERS **************************** -->
                    <template if:true={displayFilter}>
                        <div class="slds-card filterDiv" style="background: #f3f2f2">
                            <div class="slds-grid slds-gutters" style="padding: 2.18vh;">
                                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                    <div class="slds-media slds-col">
                                        <lightning-checkbox-group name="Case Severity" label="Case Severity"
                                                                  options={caseSeverityVal} value={caseSeveritySelected} onchange={caseSevChange}
                                                                  class="caseSevClass">
                                        </lightning-checkbox-group>
                                    </div>

                            <div class="slds-media slds-col">
                                <lightning-combobox name="Case Priority" label="Case Priority" value={casePrioritySelected}
                                    options={casePriorityVal} onchange={casePriorityChange}></lightning-combobox>
                            </div>

                            <div class="slds-media slds-col">
                                <lightning-combobox name="Task Shift" label="Task Shift" value={taskShiftSelected}
                                    options={taskShiftVal} onchange={taskShiftChange}></lightning-combobox>
                            </div>

                            <div class="slds-media slds-col slds-size_1-of-5">
                                <lightning-combobox name="Task Status" label="Task Status" value={taskStatusSelected}
                                    options={taskStatusVal} onchange={taskStatusChange}></lightning-combobox>
                            </div>

                            <div style="padding-right: 25px;">
                                <lightning-button variant="brand" icon-name="utility:save" label="Save" title="Save"
                                    onclick={saveAndApply} class="slds-button slds-m-left_x-small">
                                </lightning-button>

                                        <lightning-button variant="neutral" label="Reset" title="Reset" onclick={reset}
                                                          class="slds-button slds-m-left_x-small">
                                        </lightning-button>
                                    </div>
                                </header>
                            </div>
                        </div>
                    </template>
                </div>
                <div class="slds-size_3-of-12">
                    <c-sc-s2-e-t-home-screen-special-notes></c-sc-s2-e-t-home-screen-special-notes>
                </div>
            </div>
        </div>

        <!-- **************************** CASES DASHBOARD **************************** -->
        <c-sc-security-services-cases oncaseevent={resetPollerAndRefresh}></c-sc-security-services-cases>

        <!-- **************************** TASKS DASHBOARD **************************** -->
        <c-sc-security-services-tasks ontaskevent={resetPollerAndRefresh}></c-sc-security-services-tasks>
    </div>
</template>