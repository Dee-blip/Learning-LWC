<template>
    <template if:true={isLoading}>
        <c-lwc-incident-record-page-place-holder type="highlightPanel"></c-lwc-incident-record-page-place-holder>
    </template>
    <template if:false={isLoading}>
        <div class="slds-page-header slds-page-header_record-home">
            <div class="slds-page-header__row">
                <div class="slds-page-header__col-title">
                    <div class="slds-media">
                        <div class="slds-media__figure">
                            <lightning-icon icon-name={incidentIcon} alternative-text="Approved" title="Approved">
                            </lightning-icon>
                        </div>
                        <div class="slds-media__body">
                            <div class="slds-page-header__name">
                                <div class="slds-page-header__name-title">
                                    <h1 class="slds-text-title_caps">
                                        <span>{type}</span>
                                        <span class="slds-page-header__title slds-truncate"
                                            title={incidentNumber}>{incidentNumber}</span>
                                    </h1>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="slds-page-header__col-actions">
                    <lightning-button-group>
                        <lightning-button if:true={showNewTask} label="New Task" data-id="NewTask"
                            onclick={onQuickActionClick} icon-name="utility:task">
                        </lightning-button>
                        <template if:true={showValue.showAssignToMe}>
                            <lightning-button label="Assign To Me" data-id="Assign" onclick={onQuickActionClick}
                                icon-name="utility:change_owner">
                            </lightning-button>
                        </template>
                        <template if:true={showValue.showprogressButton}>
                            <lightning-button type="submit" data-id="Resume" label="Resume Ticket"
                                onclick={onProgressState} icon-name="utility:play">
                            </lightning-button>
                        </template>
                        <lightning-button label="Print" data-id="Print" onclick={onQuickActionClick}
                            icon-name="utility:print">
                        </lightning-button>
                        <lightning-button if:true={showClone} data-id="Clone" label="Clone" onclick={onQuickActionClick}
                            icon-name="utility:copy">
                        </lightning-button>
                    </lightning-button-group>
                </div>
            </div>
            <div class="slds-page-header__row slds-page-header__row_gutters">
                <div class="slds-page-header__col-details">
                    <ul class="slds-page-header__detail-row">
                        <template for:each={values} for:item="field">
                            <li class="slds-page-header__detail-block" key={field.key}>
                                <div class="slds-text-title_caps slds-truncate slds-m-bottom_xx-small">
                                    {field.label}</div>
                                <template if:true={field.isURL}>
                                    <div class="slds-media slds-media_center">
                                        <div class="slds-media__figure">
                                            <!-- <lightning-icon icon-name={field.iconName} size="x-small">
                                                </lightning-icon> -->
                                            <lightning-avatar src="" initials="" fallback-icon-name={field.iconName}
                                                size="x-small" variant="circle"></lightning-avatar>
                                        </div>
                                        <div class="slds-media__body slds-m-top_xx-small">
                                            <a class="" target="_blank" href="javascript:void(0)"
                                                data-id={field.linkedId} onclick={gotoParent}>{field.linkedName}</a>
                                        </div>
                                    </div>
                                </template>
                                <template if:true={field.isIcon}>
                                    <lightning-input type="checkbox-button" class="slds-text-align_center" checked
                                        disabled>
                                    </lightning-input>
                                </template>
                                <template if:true={field.isTree}>
                                    <span>{field.key}
                                        <div class={hierarchyDropdownClass} onclick={onHierarchyClick}>
                                            <lightning-button-icon icon-name="utility:hierarchy"
                                                class="slds-m-left_xx-small" variant="bare" onblur={onHierarchyClick}>
                                            </lightning-button-icon>
                                            <div class="slds-dropdown slds-dropdown_left slds-dropdown_medium">
                                                <lightning-tree items={field.items}></lightning-tree>
                                            </div>
                                        </div>
                                    </span>
                                </template>
                                <template if:true={field.showProgress}>
                                    <span style="display: flex;">
                                        <div class="slds-is-relative">
                                            <lightning-progress-ring value={field.progress} size="large">
                                            </lightning-progress-ring>
                                            <div class="slds-is-absolute"
                                                style="top:0.8em;left:0.4em;font-size:smaller">
                                                {field.progress}%</div>
                                        </div>
                                        <div class="slds-m-top_x-small slds-m-left_xx-small">
                                            {field.key} Complete
                                        </div>
                                    </span>
                                </template>
                                <template if:true={field.isMultiItems}>
                                    <lightning-button-menu variant="bare" icon-name={field.iconName}
                                        class="slds-align_absolute-center" icon-size="large"
                                        onselect={onMenuItemSelected}>
                                        <template for:each={field.items} for:item="item">
                                            <lightning-menu-item value={item} label={item.label} key={item.value}
                                                data-id={item.value} prefix-icon-name={item.icon}>
                                            </lightning-menu-item>
                                        </template>
                                    </lightning-button-menu>
                                </template>
                                <template if:true={field.isText}>
                                    <lightning-layout>
                                        <lightning-layout-item>
                                            <div class={field.class} title={field.toolTip}>
                                                <lightning-formatted-text value={field.key}></lightning-formatted-text>
                                            </div>
                                        </lightning-layout-item>
                                        <lightning-layout-item>
                                            <template if:true={field.showAdditionalInfo}>
                                                <c-hd_-status_-progress_-indicator record-id={recordId}
                                                    current-status={status}>
                                                </c-hd_-status_-progress_-indicator>
                                            </template>
                                        </lightning-layout-item>
                                    </lightning-layout>
                                </template>
                            </li>
                        </template>
                    </ul>
                </div>
            </div>
        </div>
    </template>
</template>