<template>
    <lightning-radio-group name="radioGroup" class="slds-text-align_center slds-m-bottom_small" onchange={onViewChanged}
        options={options} value={selectedView} type="button">
    </lightning-radio-group>
    <lightning-card if:true={isCompactView} title={selectedStep.displayName}>
        <div if:true={selectedStep.isPending} slot="actions">
            <lightning-button-group if:true={selectedStep.enableApproveForCurrentUser}>
                <lightning-button label="Approve" data-id={selectedStep.processWorkItemId}
                    onclick={onApproveRejectClicked}>
                </lightning-button>
                <lightning-button label="Reject" data-id={selectedStep.processWorkItemId}
                    onclick={onApproveRejectClicked}>
                </lightning-button>
            </lightning-button-group>
        </div>
        <div if:true={selectedStep.isApproved} slot="actions">
            <lightning-icon icon-name="action:approval" size="x-small" class="slds-m-right_x-small"
                alternative-text="Approved By">
            </lightning-icon>
            {selectedStep.approverName}
        </div>
        <div if:true={selectedStep.isRejected} slot="actions">
            <lightning-icon icon-name="action:close" size="x-small" class="slds-m-right_x-small"
                alternative-text="Rejected By">
            </lightning-icon>
            {selectedStep.approverName}
        </div>
        <div class="slds-form slds-m-around_small" role="list">
            <div class="slds-form__row">
                <div class="slds-form__item" role="listitem">
                    <div
                        class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">Approver Name</span>
                        <div class="slds-form-element__control">{selectedStep.approverName}
                        </div>
                    </div>
                </div>
                <div class="slds-form__item" role="listitem">
                    <div
                        class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">Approval Status</span>
                        <div class="slds-form-element__control">{selectedStep.status}
                        </div>
                    </div>
                </div>
                <div class="slds-form__item" role="listitem">
                    <div
                        class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">Approval Date</span>
                        <div if:false={selectedStep.isPending} class="slds-form-element__control">
                            {selectedStep.approvalDate}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </lightning-card>
    <lightning-accordion if:false={isCompactView} allow-multiple-sections-open active-section-name="Section A">
        <lightning-accordion-section class=" slds-border_top slds-border_left slds-border_right slds-border_bottom"
            label="Approval Steps Detailed Information" name="Section A">
            <table aria-multiselectable="true"
                class="slds-table slds-no-row-hover slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols slds-m-vertical_small slds-border_right slds-border_left"
                role="grid">
                <thead>
                    <tr class="slds-line-height_reset">
                        <th aria-label="Name" aria-sort="none" class="slds-is-resizable slds-is-sortable" scope="col">
                            <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="-1">
                                <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                    <span class="slds-truncate" title="Name">Approval Name</span>
                                </div>
                            </a>
                            <div class="slds-resizable">
                                <input type="range" aria-label="Name column width"
                                    class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-69"
                                    max="1000" min="20" tabindex="-1" />
                                <span class="slds-resizable__handle">
                                    <span class="slds-resizable__divider"></span>
                                </span>
                            </div>
                        </th>
                        <th aria-label="Name" aria-sort="none" class="slds-is-resizable slds-is-sortable" scope="col">
                            <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="-1">
                                <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                    <span class="slds-truncate" title="Name">Approver Name</span>
                                </div>
                            </a>
                            <div class="slds-resizable">
                                <input type="range" aria-label="Name column width"
                                    class="slds-resizable__input slds-assistive-text" max="1000" min="20"
                                    tabindex="-1" />
                                <span class="slds-resizable__handle">
                                    <span class="slds-resizable__divider"></span>
                                </span>
                            </div>
                        </th>
                        <th aria-label="Product Code" aria-sort="none" class="slds-is-resizable slds-is-sortable"
                            scope="col">
                            <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="-1">
                                <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                    <span class="slds-truncate" title="Product Code">Approval Status</span>
                                </div>
                            </a>
                            <div class="slds-resizable">
                                <input type="range" aria-label="Product Code column width"
                                    class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-70"
                                    max="1000" min="20" tabindex="-1" />
                                <span class="slds-resizable__handle">
                                    <span class="slds-resizable__divider"></span>
                                </span>
                            </div>
                        </th>
                        <th aria-label="List Price" aria-sort="none" class="slds-is-resizable slds-is-sortable"
                            scope="col">
                            <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="-1">
                                <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                                    <span class="slds-truncate" title="List Price">Approval Date</span>
                                </div>
                            </a>
                            <div class="slds-resizable">
                                <input type="range" aria-label="List Price column width"
                                    class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-71"
                                    max="1000" min="20" tabindex="-1" />
                                <span class="slds-resizable__handle">
                                    <span class="slds-resizable__divider"></span>
                                </span>
                            </div>
                        </th>
                        <th class="" scope="col" style="width:10rem"></th>
                    </tr>
                </thead>
                <tbody>
                    <template for:each={approvalDetails} for:item="approvalStep">
                        <tr key={approvalStep.displayName} class="slds-hint-parent" style="height: 2.7rem;">
                            <th scope="row">
                                <div class="slds-truncate">{approvalStep.displayName}</div>
                            </th>
                            <td scope="row">
                                <div class="slds-truncate">{approvalStep.approverName}</div>
                            </td>
                            <td role="gridcell">
                                <div if:true={approvalStep.isApproved}>
                                    <lightning-icon icon-name="action:approval" size="x-small"
                                        class="slds-m-right_x-small" alternative-text="Approved By">
                                    </lightning-icon>
                                    {approvalStep.status}
                                </div>
                                <div if:true={approvalStep.isRejected}>
                                    <lightning-icon icon-name="action:close" size="x-small" class="slds-m-right_x-small"
                                        alternative-text="Rejected By">
                                    </lightning-icon>
                                    {approvalStep.status}
                                </div>
                                <div if:true={approvalStep.isPending}>
                                    <lightning-icon icon-name="action:defer" size="x-small"
                                        class="slds-m-right_x-small">
                                    </lightning-icon>
                                    {approvalStep.status}
                                </div>
                            </td>
                            <td role="gridcell">
                                <div if:false={approvalStep.isPending} class="slds-form-element__control">
                                    {approvalStep.approvalDate}
                                </div>
                            </td>
                            <td role="gridcell">
                                <div if:true={approvalStep.isPending}>
                                    <div class="slds-align_absolute-center"
                                        if:true={approvalStep.enableApproveForCurrentUser}>
                                        <lightning-button-icon alternative-text="Approve"
                                            class="slds-m-right_small approveButton slds-align_absolute-center"
                                            size="medium" variant="bare-inverse" icon-name="action:approval"
                                            data-id={approvalStep.processWorkItemId} onclick={onApproveRejectClicked}>
                                        </lightning-button-icon>
                                        <lightning-button-icon alternative-text="Reject" size="medium"
                                            variant="bare-inverse" class="rejectButton slds-align_absolute-center"
                                            data-id={approvalStep.processWorkItemId} onclick={onApproveRejectClicked}
                                            icon-name="action:reject">
                                        </lightning-button-icon>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </lightning-accordion-section>
    </lightning-accordion>
</template>