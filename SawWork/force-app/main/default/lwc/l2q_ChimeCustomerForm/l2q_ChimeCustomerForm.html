<template>
    <template if:true={hasChimeAccess}>
        <template if:true={showSuccessCriteriaPopUp}>
            <c-success-criteria-component record-id={chimeId} onclose={handleCloseSuccessCriteria}></c-success-criteria-component>
        </template>
        <template if:true={chimedata}>
            <div style="border:1px solid #DEDEDE;background-color:whitesmoke;border-radius: 5px;padding: 10px;">
                <div class="slds-text-heading_small" style="margin-bottom: 8px;">{chimeName}</div>
                <div class="slds-grid" style="border:1px solid #DDDBDA;border-radius:5px;padding:10px">
                    <div class="slds-col">
                        <div class="slds-text-title slds-truncate" title="Success Criteria">Business Goals</div>
                        <div class="slds-truncate" title="Hyperlink">
                            <a onclick={handleOpenSuccessCriteria} href="#">Click to view</a>
                        </div>
                    </div>
                    <div class="slds-col">
                        <label class="slds-text-title">Account Owner</label><br>
                        <p>{chimedata.Account__r.Owner.Name}</p>
                    </div>
                    <div class="slds-col">
                        <label class="slds-text-title">Created By</label><br>
                        <p>{chimedata.CreatedBy.Name}</p>
                    </div>
                </div>
                <div class="slds-grid" style="margin-top:10px;border:1px solid #DDDBDA;border-radius:5px;min-height:300px">
                    <div class="slds-col slds-size_3-of-12">
                        <template if:true={selectedProducts}>
                            <template for:each={selectedProducts} for:item="product">
                                <div key={product.Id} style="height: 45px;">
                                    <div onclick={onProductSelect} class={product.Id} key={product.Id} id={product.Id}
                                        style="width: 100%;float:left;padding-left:5px;padding-right:5px;padding-top:8px;padding-bottom:8px;cursor:pointer">
                                        {product.CHIME_Product__r.Product_Name__c}
                                    </div>
                                </div>
                            </template>
                        </template>
                    </div>
                    <div class="slds-col slds-size_9-of-12"
                        style="border-left:1px solid #DDDBDA;padding:10px;background-color:white">
                        <div style={disableQuestionnaireCSS}>
                            <template if:true={selectedAssociation}>
                                <template if:true={chimedata}>
                                    <c-chime-questionnaire class="questionnaire"
                                        productid={selectedAssociation.CHIME_Product__c} chimeid={chimeId} iscustomerfacing="true"
                                        stage="Gating,Scoping" oncheckchimestage={checkOnStageChange}
                                        chime-stage={chimedata.Stage__c} chime-status={chimedata.Status__c} 
                                        ispoc={ispoc}>
                                    </c-chime-questionnaire>
                                </template>
                            </template>
                        </div>
                        <div style="border-left:1px hidden #DDDBDA;padding:10px;background-color:white">
                            <lightning-card title="Sign Off">
                                <lightning-input style="border-left:1px hidden #DDDBDA;padding:10px;background-color:white" data-id="signOff" label="Please confirm the above requirements are accurate, as this will help Akamai team proceed with the correct configuration set-up." type="checkbox" checked={chimedata.Sign_Off__c}  onchange={saveSignOff}></lightning-input>   
                            </lightning-card>
                        </div>
                    </div>
                </div>
            </div>
        </template>
    </template>
    <template if:false={hasChimeAccess}>
        <div style="color:red;text-align:center">{noAccessMessage}</div>
    </template>
</template>