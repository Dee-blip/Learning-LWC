<!--
  @description       : 
  @author            : apyati
  @team              : GSM
  @last modified on  : 09-29-2021
  @last modified by  : apyati
  Modifications Log
  Ver   Date         Author   Modification
  1.0   08-17-2021   apyati   Initial Version
-->
<template>

    <div class="slds-panel__section slds-show">
        <template if:true={showSpinner}>
            <div>
                <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
            </div>
        </template>
<template if:true={loadform}> 
        <lightning-record-edit-form record-id={recordId12} object-api-name="Opportunity" onload={handleLoad}
            onsubmit={handleSubmit} onerror={handleError} onsuccess={handleSuccess}>

            <template if:true={areDetailsVisible}>
                <template for:each={fieldsArray} for:item="section">
                    <lightning-layout multiple-rows="0" title={section.sectionName} size="12" key={section.sectionName}>
                        <div
                            style=" width: 100%;height: 29px;vertical-align: middle;background-color: rgb(243, 242, 242);">
                            <h3 class="slds-text-heading_x_small slds-var-m-bottom_medium" style="padding: 6px;
                            vertical-align: middle;">{section.sectionName}</h3>
                        </div>

                        <div style="width:100%;height:10px ;
                        overflow-x: auto;
                        display: block;"></div>
                        <template for:each={section.fields} for:item="fieldDetail">

                            <template if:true={fieldDetail.mode}>
                                <div style="width:35%" key={fieldDetail.fieldName} class="slds-form-element"
                                    horizontal-align="spread">
                                    <lightning-layout-item key={fieldDetail.fieldName} size="3">
                                        <div
                                            class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right">
                                            <lightning-output-field field-name={fieldDetail.fieldName}
                                                onmouseover={handleShowPopover} onmouseout={hideIcon}>
                                            </lightning-output-field>
                                            <lightning-button-icon icon-name="utility:lock" size="small"
                                                alternative-text="lock"
                                                class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_small slds-input__icon slds-input__icon_right"
                                                style="display:none" tab-index="0" title='edit'
                                                data-id={fieldDetail.fieldName} variant="bare"></lightning-button-icon>
                                        </div>
                                    </lightning-layout-item>
                                </div>
                                <div style="width:15%" key={fieldDetail.fieldName}></div>
                            </template>

                            <template if:false={fieldDetail.mode}>
                                <div style="width:35%" key={fieldDetail.fieldName}>
                                    <lightning-layout-item key={fieldDetail.fieldName} size="3">

                                        <template if:false={isEdit}>
                                            <div
                                                class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right">
                                                <lightning-output-field field-name={fieldDetail.fieldName}
                                                    onmouseover={handleShowPopover} onmouseout={hideIcon}
                                                    onclick={editHandler}>
                                                </lightning-output-field>
                                                <lightning-button-icon icon-name="utility:edit" size="small"
                                                    alternative-text="edit" onclick={editHandler}
                                                    class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_small slds-input__icon slds-input__icon_right"
                                                    style="display:none" tab-index="0" title='edit'
                                                    data-id={fieldDetail.fieldName} variant="bare">
                                                </lightning-button-icon>
                                            </div>
                                        </template>

                                        <template if:true={isEdit}>
                                            <lightning-input-field field-name={fieldDetail.fieldName}
                                                name={fieldDetail.fieldName} onchange={onchangeHandler}
                                                class={inputStyle} data-id={fieldDetail.fieldName}>
                                            </lightning-input-field>
                                        </template>
                                    </lightning-layout-item>
                                </div>
                                <div style="width:15%" key={fieldDetail.fieldName}></div>
                            </template>

                        </template>
                        <div style="width:100%;height:10px ;overflow-x: auto;display: block;"></div>
                    </lightning-layout>
                </template>
            </template>

        </lightning-record-edit-form>
    </template>
    </div>
    <lightning-input type="text" value={recordId12} style="display:none"></lightning-input>
</template>