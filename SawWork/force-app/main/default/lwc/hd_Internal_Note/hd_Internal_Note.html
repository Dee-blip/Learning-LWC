<template>
    <lightning-card title="INTERNAL NOTE" variant="Narrow" icon-name="standard:note" style="width: 100%;" if:true={hasAccess.data}>
        <lightning-spinner if:true={displaySpinner} variant="brand" size="medium" data-id="spinner"></lightning-spinner>
        <lightning-layout>
            <lightning-layout-item padding="horizontal-medium" flexibility="auto">
                <div class="slds-form-element" style="width: 100%">
                    <label for="textarea-id-01">
                        <abbr class="slds-required" title="required"></abbr>
                    </label>
                    <span class="slds-form-element__control" >
                        <textarea id="textarea-id-01" style="height: 100px;" data-id="txtNote" class="slds-textarea" placeholder="Add Internal Note not visible to customer" maxlength="2000" minlength="3" onkeyup={countnotechar}></textarea>
                        <div class="slds-text-color_weak slds-float_right">{remainingChars} characters left</div>
                    </span>
                </div>
            </lightning-layout-item>
        </lightning-layout>
        
        <div slot="footer">
            <lightning-layout pull-to-boundary="small" vertical-align="center" horizontal-align="end">
                <lightning-layout-item>
                    <div class="slds-text-title"><b>Time Spent (In minutes):</b></div>
                </lightning-layout-item>
                <lightning-layout-item padding="horizontal-small">
                    <div class="slds-form-element">
                        <div class="slds-form-element__control">
                            <button class="slds-button slds-button_icon slds-button_icon-small slds-input__button_decrement slds-button_icon-border-filled" title="Decrement counter" onclick={decrementMinute}>
                                <lightning-icon icon-name="utility:ban" alternative-text="Decrement" size="x-small" title="Decrement"></lightning-icon>
                            </button>
                            <input type="number" id="state-required" value={timeSpent} placeholder="0" min="1" max="60" onkeyup={changeTimeSpent} data-id="timeMin" class="slds-input slds-input_counter" style="font-weight: bold;"/>
                            <button class="slds-button slds-button_icon slds-button_icon-small slds-input__button_increment slds-button_icon-border-filled" title="Increment counter" onclick={incrementMinute}>
                                <lightning-icon icon-name="utility:new" alternative-text="Increment" size="x-small" title="Increment"></lightning-icon>
                            </button>
                        </div>
                    </div>
                </lightning-layout-item>
                <lightning-layout-item padding="horizontal-small">
                    <lightning-button label="Save" variant="brand" class="slds-m-around_small" disabled={isButtonDisabled} onclick={saveNote}></lightning-button>
                </lightning-layout-item>
            </lightning-layout>
        </div>
    </lightning-card>
</template>