<template>
    <template if:true={showWarningModal}>
        <section role="dialog" tabindex="-1" aria-label="Meaningful description of the modal content" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
              <header class="slds-modal__header">
                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title={labels.CLOSE_ALTTEXT} onclick={closeWarningModal}>
                  <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
                  </svg>
                  <span class="slds-assistive-text">{labels.CLOSE_ALTTEXT}</span>
                </button>
                <h2 id="modal-heading-03" class="slds-modal__title slds-hyphenate">{labels.MODAL_ERROR_HEADER}</h2>
              </header>
              <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-3">
                <lightning-formatted-rich-text value = {warningMessage}>
                </lightning-formatted-rich-text>
              </div>
              <footer class="slds-modal__footer">
                <button class="slds-button slds-button_neutral" onclick={closeWarningModal}>{labels.BUTTON_CANCEL}</button>
                <button class="slds-button slds-button_brand" onclick={callCaseCreateMethod}>{labels.BUTTON_CONFIRM}</button>
              </footer>
            </div>
          </section>
          <div class="slds-backdrop slds-backdrop_open"></div>
    
    </template>

    <template if:true={showArticleModal}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1"
            class="slds-modal slds-fade-in-open slds-modal_medium">
            <div class="slds-modal__container">
                <header class="slds-modal__header" style="padding: 0">
                    <div class="slds-page-header slds-page-header_record-home" style="background-color: #F4F5F4">
                        <div class="slds-page-header__row">
                          <div class="slds-page-header__col-title">
                            <div class="slds-media">
                              <div class="slds-media__body">
                                <div >
                                  <div class="slds-page-header__name-title">
                                    <h1 class="left-align">
                                      <span >{clickedArticle.AKAM_Article_Number__c}</span>
                                      <span class="slds-page-header__title slds-truncate" title={clickedArticle.Title}>{clickedArticle.Title}</span>
                                    </h1>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                      
                        </div>
                        <div class="slds-page-header__row slds-page-header__row_gutters">
                          <div class="slds-page-header__col-details">
                            <ul class="slds-page-header__detail-row">
                              <li class="slds-page-header__detail-block" >
                                <div class="slds-text-title slds-truncate left-align" title={labels.ARTICLE_NUMBER}>{labels.ARTICLE_NUMBER}</div>
                                <div class="slds-truncate left-align" title={clickedArticle.AKAM_Article_Number__c}>{clickedArticle.AKAM_Article_Number__c}</div>
                              </li>
                              <li class="slds-page-header__detail-block">
                                <div class="slds-text-title slds-truncate left-align" title={labels.ARTICLE_TYPE}>{labels.ARTICLE_TYPE}</div>
                                <div class="slds-truncate left-align" title={clickedArticle.Article_Record_Type__c}>{clickedArticle.Article_Record_Type__c}</div>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>

                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title={labels.CLOSE_ALTTEXT} onclick={closeArticleModal}>
                        <lightning-icon icon-name="utility:close" alternative-text={labels.CLOSE_ALTTEXT} variant="inverse" size="small">
                        </lightning-icon>
                    </button>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">


                        <div class="slds-form-element">
                            <span class="slds-form-element__label">{labels.ARTICLE_SUMMARY}</span>
                            <div class="slds-form-element__control slds-border_bottom slds-p-bottom_medium">
                                <div class="slds-form-element__static">
                                    <p>{clickedArticle.Summary}
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <template if:true={showDescription}>
                            <div  class="slds-form-element">
                                <span class="slds-form-element__label">{labels.ARTICLE_DESCRIPTION}</span>
                                <div class="slds-form-element__control slds-border_bottom slds-p-bottom_medium">
                                    <div class="slds-form-element__static">
                                        <lightning-formatted-rich-text value = {clickedArticle.Description__c}>
                                        </lightning-formatted-rich-text>
                                    </div>
                                </div>
                            </div>
                        </template>
                        
                        <template if:true={howToArticle}>                        
                            <div  class="slds-form-element">
                                <span class="slds-form-element__label">{labels.ARTICLE_PROCEDURE}</span>
                                <div class="slds-form-element__control slds-border_bottom slds-p-bottom_medium">
                                    <div class="slds-form-element__static">
                                        <lightning-formatted-rich-text value = {clickedArticle.How_To_Procedure__c}>
                                        </lightning-formatted-rich-text>

                                    </div>
                                </div>
                            </div>
                        </template>
                        
                        <template if:true={procedureArticle}>
                            <div class="slds-form-element">
                                <span class="slds-form-element__label">{labels.ARTICLE_SYMPTOMS}</span>
                                <div class="slds-form-element__control slds-border_bottom slds-p-bottom_medium">
                                    <div class="slds-form-element__static">
                                        <lightning-formatted-rich-text value = {clickedArticle.Symptoms__c}>
                                        </lightning-formatted-rich-text>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="slds-form-element">
                                <span class="slds-form-element__label">{labels.ARTICLE_CAUSE}</span>
                                <div class="slds-form-element__control slds-border_bottom slds-p-bottom_medium" >
                                    <div class="slds-form-element__static">
                                        <lightning-formatted-rich-text value = {clickedArticle.Explanation__c}>
                                        </lightning-formatted-rich-text>                                        
                                    </div>
                                </div>
                            </div>
                            
                            <div  class="slds-form-element">
                                <span class="slds-form-element__label">{labels.ARTICLE_SOLUTION}</span>
                                <div class="slds-form-element__control slds-border_bottom slds-p-bottom_medium">
                                    <div class="slds-form-element__static">
                                        <lightning-formatted-rich-text value = {clickedArticle.Solution__c}>
                                        </lightning-formatted-rich-text>                                        

                                    </div>
                                </div>
                            </div>
                        </template>    
                    <div >
                        <span class="slds-form-element__label">{labels.ARTICLE_HELPFUL}</span>
                        <div class="slds-p-around_small lgc-bg">
                            <lightning-button-icon-stateful icon-name="utility:like" selected={likeState} onclick={handleLikeButtonClick} alternative-text={labels.BUTTON_LIKE_ALTTEXT}></lightning-button-icon-stateful>
                            <lightning-button-icon-stateful icon-name="utility:dislike" selected={dislikeState} onclick={handleDislikeButtonClick} alternative-text={labels.BUTTON_DISLIKE_ALTTEXT} class="slds-m-left_xx-small"></lightning-button-icon-stateful>
                        </div>
                    </div>    
                
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <template if:false={recordId}>
        <div>
            <template if:true={loadSpinner}>
                <div style="opacity: 0.7;" class="slds-spinner_container">
                    <lightning-spinner alternative-text={labels.LOADING_ALTTEXT} variant="brand" size="medium">
                    </lightning-spinner>
                </div>
            </template>
        </div>

        <lightning-layout>
                <lightning-layout-item size={articleSize} class="slds-p-right_medium">

                    <lightning-card title={labels.CARD_HEADING} class="createCaseFormCard">
                        <lightning-button label={labels.BUTTON_EXPAND} class="slds-p-right_small" data-id="Expand:Case" slot="actions" onclick={expandCollapse}></lightning-button>
                        <lightning-button label={labels.BUTTON_COLLPASE} slot="actions" class="slds-p-right_small" data-id="Collapse:Case" onclick={expandCollapse}></lightning-button>
                        <lightning-button
                        label={suggestionButtonLabel}
                        onclick={flipSuggestion}
                        slot="actions">
                        </lightning-button>
                
    
                
                        <lightning-record-edit-form record-id={cloneid} object-api-name="Case" onsubmit={submitHandler} novalidate>
                        
                                <lightning-accordion allow-multiple-sections-open
                                active-section-name={activeSections} class="createPageAccordion">
    
                                    <lightning-accordion-section name={labels.SECTION_ACCOUNT} class="applyBoxStyle" label={labels.SECTION_ACCOUNT}>
                                     
                                        
                                        <lightning-layout class="slds-p-right_medium">
                                            <lightning-layout-item size="5"> 
                                                <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required">*</abbr> 
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_ACCOUNT}</label> 
                                                <lightning-helptext content={labels.CASE_ACCOUNTHELP}></lightning-helptext>
                                                <c-sc-combo-box options={filteredAccountList} defaultoptionsjarvis={filteredAccountList} props={accComboProps} placeholder={labels.CASE_ACCOUNT_PLACEHOLDER} onchange={handleAccSearch}
                                                value={selectedAccount} data-inpid="Account" onselect={onAccountChange} variant="label-hidden" label="Account"
                                                no-results-msg={accNoResultsMsg}  disabled={noAccount}>
                                                </c-sc-combo-box>
    
                                            </lightning-layout-item>    
    
                                            <lightning-layout-item size="2"> 
                                            </lightning-layout-item>   
                        
                                            <lightning-layout-item size="5"> 
                                                    <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required">*</abbr> 
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_CATEGORY}</label> 
                                                <!-- <lightning-helptext content={labels.CASE_CATEGORYHELP}></lightning-helptext> -->
                                                <lightning-combobox
                                                variant="label-hidden"
                                                value={selectedCategory}
                                                placeholder={labels.CASE_CATEGORY}
                                                options={categories}
                                                onchange={onCategoryChange} class="requiredField" disabled={noCategory} data-field="Category__c"></lightning-combobox>                
                                                
                                            </lightning-layout-item>    

                                            
    
                                        </lightning-layout>

                                        <template if:true={displayParentAccount}>
                                            <lightning-layout class="slds-p-right_medium">
                                                <lightning-layout-item size="5"> 
                                                    <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required">*</abbr> 
                                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_PARENT_ACCOUNT}</label> 
                                                    <lightning-helptext content={labels.CASE_PARENTACCOUNTHELP}></lightning-helptext>
                                                    <c-sc-combo-box options={parentAccounts} defaultoptionsjarvis={parentAccounts} props={accComboProps} placeholder={labels.CASE_ACCOUNT_PLACEHOLDER} onchange={handleAccSearch}
                                                    value={selectedParentAccount} data-inpid="ParentAccount" onselect={onParentAccountChange} variant="label-hidden" label="Parent Account"
                                                    no-results-msg={accNoResultsMsg}  class="requiredField" disabled={oneParentAccount} >
                                                    </c-sc-combo-box>

                                                </lightning-layout-item> 
                                            </lightning-layout>
                                        </template>

                                        <template if:true={soccCase}>
    
                                            <lightning-layout class="slds-p-right_medium">
                                                <lightning-layout-item size="5"> 
                                                    <template if:false={noPolicyDomain}>
                                                        <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required">*</abbr> 
                                                    </template>                                                
                                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_POLICY_DOMAIN}</label>     
                                                    <lightning-helptext content={labels.CASE_PDHELP}></lightning-helptext>
                                                    <lightning-combobox
                                                    variant="label-hidden"
                                                    value={selectedPolicyDomain}
                                                    placeholder={labels.CASE_POLICY_DOMAIN}
                                                    options={pds}
                                                    onchange={onPdChange} class="selectableField" disabled={noPolicyDomain} data-field="Policy_Domain__c"></lightning-combobox>                
                                                                
                                                </lightning-layout-item>    
                                            </lightning-layout>
                                        </template>
                                    </lightning-accordion-section>
    
                                    <lightning-accordion-section name={labels.SECTION_PRODUCT} class="applyBoxStyle" label={labels.SECTION_PRODUCT}>
                                        
                                        <lightning-layout class="slds-p-right_medium">
                                            <lightning-layout-item size="5"> 
                                                <template if:false={noProduct}>
                                                    <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required">*</abbr> 
                                                </template>                                                
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{areaProductLabel}</label>                                                 
                                                <template if:true={areaProductHelp}>
                                                    <lightning-helptext content={areaProductHelp} ></lightning-helptext>
                                                </template>
                                                
                                                <lightning-combobox
                                                variant="label-hidden"
                                                value={selectedCaseProduct}
                                                placeholder={areaProductLabel}
                                                options={caseProducts}
                                                onchange={onCaseProductChange} class="requiredField" data-field="Area__c" disabled={noProduct}></lightning-combobox>                
                                    
                                            </lightning-layout-item>    
    
                                            <lightning-layout-item size="2"> 
                                            </lightning-layout-item>   
                        
                                            <lightning-layout-item size="5"> 
                                                <template if:false={noProblem}>
                                                    <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required">*</abbr> 
                                                </template>                                                
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{serviceProblemLabel}</label>     
                                                <template if:true={serviceProblemHelp}>
                                                    <lightning-helptext content={serviceProblemHelp}></lightning-helptext>
                                                </template>
                                                
                                                
                                                <lightning-combobox
                                                variant="label-hidden"
                                                value={selectedProblem}
                                                placeholder={serviceProblemLabel}
                                                options={problems}
                                                onchange={onProblemChange} class="requiredField" data-field="Service__c" disabled={noProblem}></lightning-combobox>                
                                    
                                            </lightning-layout-item>    
    
                                        </lightning-layout>
        
                                
                                    </lightning-accordion-section>

                                    <lightning-accordion-section name={labels.SECTION_INFO} class="applyBoxStyle" label={labels.SECTION_INFO}>
                                        
                                        <lightning-layout class="slds-p-right_medium">
                                            <lightning-layout-item size="12"> 
                                                <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required">*</abbr> 
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_SUBJECT}</label> 
        
                                                <lightning-input-field variant="label-hidden" class="requiredField" field-name="Subject" data-field="Subject" onchange={onFieldChange}>
                                                </lightning-input-field>
                                                    
                                            </lightning-layout-item>    
                                        </lightning-layout>
    
                                        <lightning-layout class="slds-p-right_medium">
                                            <lightning-layout-item size="12"> 
                                                <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required">*</abbr> 
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ARTICLE_DESCRIPTION}</label> 
        
                                                <lightning-input-field variant="label-hidden" class="requiredField inputDescriptionClass" field-name="Description" data-field="Description" onchange={onFieldChange}>                                
                                                </lightning-input-field>
                                                    
                                            </lightning-layout-item>    
    
                                        </lightning-layout>
                                        
                                        
                                        <lightning-layout class="slds-p-right_medium" >
                                            <lightning-layout-item size="5"> 
                                                
                                                <template if:false={noSeverity}>
                                                    <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required">*</abbr> 
                                                </template>                                                
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_SEVERITY}</label>     
                                                <lightning-helptext content={labels.CASE_SEVERITYHELP}></lightning-helptext>
                                                <lightning-combobox
                                                variant="label-hidden"
                                                value={selectedSeverity}
                                                placeholder={labels.CASE_SEVERITY}
                                                options={severities}
                                                class="requiredField" data-field="Severity__c" disabled={noSeverity} onchange={onFieldChange}></lightning-combobox>                
                                    
                                            </lightning-layout-item> 
        
                                            <lightning-layout-item size="2"> 
                                            </lightning-layout-item>   

                                            
                                            
                                        </lightning-layout>

                                        <lightning-layout class="slds-p-right_medium">
                                            <lightning-layout-item>
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_ATTACHMENTS}</label>
                                                <lightning-helptext content={labels.CASE_ATTACHMENTHELP}></lightning-helptext>
                                                <div class="fileUpload">
                                                    <lightning-file-upload accept={acceptedFormats}
                                                        file-field-name="customvisibility_fileupload__c" file-field-value="scJarvisCaseCreate"
                                                        onuploadfinished={handleUploadFinished} multiple>
                                                    </lightning-file-upload>
                                                </div>
                                                <template if:true={showUploadedFilesPills}>
                                                    <br/>
                                                    <lightning-layout>
                                                        <lightning-layout-item flexibility="no-flex">
                                                            <label class="slds-form-element__label slds-no-flex labelstyle">{uploadedFilesLabel}</label>
                                                        </lightning-layout-item>
                                                        <lightning-layout-item>
                                                            <lightning-pill-container items={uploadedFilesPills} onitemremove={handleFilePillRemove}>
                                                            </lightning-pill-container>
                                                        </lightning-layout-item>
                                                    </lightning-layout>
                                                </template>
                                            </lightning-layout-item>
                                        </lightning-layout>

                                        <lightning-layout class="slds-p-right_medium" >
                                            <template if:true={isReseller}>
                                                <lightning-layout-item size="5"> 
                                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_PARTNER}</label> 
                                                    <lightning-helptext content={labels.CASE_PARTNERHELP}></lightning-helptext>    
                                                    <lightning-input-field variant="label-hidden" field-name="Partner_Ticket__c" data-field="Partner_Ticket__c" >                                
                                                    </lightning-input-field>
                                                        
                                                </lightning-layout-item>  
                                                
                                                <lightning-layout-item size="2"> 
                                                </lightning-layout-item>   

                                                <lightning-layout-item size="5"> 
                                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_CUSTOMER}</label> 
                                                    <lightning-helptext content={labels.CASE_CUSTOMERHELP}></lightning-helptext>    
                                                    <lightning-input-field variant="label-hidden" field-name="CustomerTracking__c" data-field="CustomerTracking__c" >                                
                                                    </lightning-input-field>
                                                        
                                                </lightning-layout-item>    
                                            </template>
        
                                        </lightning-layout>
                                </lightning-accordion-section>
                                
        
                                    
        
        
                                <template if:true={questionsExist}>
                                    <lightning-accordion-section name={labels.SECTION_QUESTIONS} class="applyBoxStyle" label={labels.SECTION_QUESTIONS}>
                                        <ul class="slds-m-bottom_small slds-p-right_medium">
                                            <template for:each={questions} for:item="question" for:index="index"> 
                                                <li key={questions.Id} class="slds-p-bottom_medium" >
                                                    <lightning-layout>
                                                        
                                                        <template if:true={question.required}>
                                                            <lightning-layout-item>
                                                                <abbr title={labels.REQUIRED_ALTTEXT} class="slds-required" style="cursor:none">*</abbr> 
                                                            </lightning-layout-item>
                                                            
                                                        </template>  
                                                        <lightning-layout-item>
                                                            <label class="slds-form-element__label slds-no-flex labelstyle">{question.question}
                                                                <template if:true={question.helpText}>
                                                                        <lightning-helptext content={question.helpText}></lightning-helptext>                                                                     
                                                                </template>
        
                                                            </label>
                                                        </lightning-layout-item>                                              
                                                        

                                                    </lightning-layout>
                                                    <template if:true={question.options}>
                                                        <lightning-combobox
                                                        value={question.response}
                                                        options={question.options}
                                                        onchange={responseChange} class="selectableField"
                                                        variant="label-hidden" data-id={question.recordId} data-index={index} data-type="picklist"></lightning-combobox>                                                 
                                                    </template>                                                   
                                                    <template if:true={question.textArea}>
                                                        <lightning-textarea name={questions.Id} value={question.response} 
                                                        variant="label-hidden" onchange={responseChange} maxlength="300" data-id={question.recordId} data-index={index} data-type="text"></lightning-textarea>
                                                    </template>   
                                                    <template if:true={question.urlType}>
                                                        <lightning-input data-id={question.recordId} data-index={index} type="text" 
                                                        variant="label-hidden" onchange={responseChange} value={question.response} data-type={question.questionType} placeholder={question.placeHolder}></lightning-input>                                                        
                                                    </template>                                             
                                                    <template if:true={question.nonText}>
                                                        <lightning-input data-id={question.recordId} data-index={index} type={question.questionType} 
                                                        variant="label-hidden" onchange={responseChange} value={question.response} data-type={question.questionType} ></lightning-input>
                                                    </template>                                                   
                        
                                                </li>
                                            </template>
    
                                        </ul>
                                    </lightning-accordion-section>
                                </template>
    
                                    <lightning-accordion-section name={labels.SECTION_CONTACT} class="applyBoxStyle" label={labels.SECTION_CONTACT}>
                                        <lightning-record-view-form record-id={loggedInContact} object-api-name="Contact" >
                                            <div class="slds-grid slds-p-right_medium">
                                                <div class="slds-col slds-size_5-of-12">
                                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CONTACT_NAME}</label>     
                                                    <lightning-output-field variant="label-hidden" field-name="Name" data-field="Contact_Name__c" >
                                                    </lightning-output-field>
                                                </div>
                                                <div class="slds-col slds-size_2-of-12">                                        
                                                </div>
                                                
                                                <div class="slds-col slds-size_5-of-12">
                                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CONTACT_EMAIL}</label>     
                                                    <lightning-output-field variant="label-hidden" field-name="Email" data-field="Subject" >
                                                    </lightning-output-field>
                                                </div>
    
                                            </div>    
                                            <div class="slds-grid slds-p-right_medium">
                                                <div class="slds-col slds-size_5-of-12">
                                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CONTACT_PHONE}</label>     
                                                    <lightning-output-field variant="label-hidden" field-name="Phone" data-field="Contact_Phone__c" >                                
                                                    </lightning-output-field>
                                                </div> 
    
                                                <div class="slds-col slds-size_2-of-12">                                        
                                                </div>
                                                <div class="slds-col slds-size_5-of-12">
                                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CONTACT_COMPANY}</label>     
                                                    <lightning-output-field variant="label-hidden" field-name="Company__c" data-field="Company__c" >                                
                                                    </lightning-output-field>
                                                </div>   
                                            </div>    
            
            
                                        </lightning-record-view-form>
                                        <lightning-layout class="slds-p-right_medium">
                                            <lightning-layout-item size="5"> 
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALTERNATE_CONTACT_NAME}</label>     
                                                <lightning-input-field variant="label-hidden" field-name="Alternate_Contact_Name__c" data-field="Alternate_Contact_Name__c" >                                
                                                </lightning-input-field>
                                                    
                                            </lightning-layout-item>    
                                           
                                            <lightning-layout-item size="2"> 
                                            </lightning-layout-item>   
                                            <lightning-layout-item size="5"> 
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALTERNATE_CONTACT_EMAIL}</label>    
                                                <lightning-helptext content={labels.CASE_EMAILHELP}></lightning-helptext>     
                                                <lightning-input-field variant="label-hidden" field-name="Alternate_Contact_Email__c" class="Alternate_Contact_Email__c" data-field="Alternate_Contact_Email__c" onchange={onFieldChange}>
                                                </lightning-input-field>
                                                <template if:true={showAlternateValidation}>
                                                    <div aria-live="assertive" class="slds-form-element__help redColor">
                                                        {alternateEmail}
                                                    </div>    
                                                </template>
                                                    
                                            </lightning-layout-item>    
        
                                        </lightning-layout>
        
                                        <lightning-layout class="slds-p-right_medium">
                                            <lightning-layout-item size="5"> 
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALTERNATE_CONTACT_PHONE}</label>     
                                                <lightning-input-field variant="label-hidden" field-name="Alternate_Contact_Phone__c" data-field="Alternate_Contact_Phone__c" >
                                                </lightning-input-field>
                                                    
                                            </lightning-layout-item>    
                                            <lightning-layout-item size="2"> 
                                            </lightning-layout-item>   
        
                                            <lightning-layout-item size="5"> 
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALTERNATE_CONTACT_COMPANY}</label>     
                                                <lightning-input-field variant="label-hidden" field-name="Alternate_Contact_Company__c" data-field="Alternate_Contact_Company__c">                                
                                                </lightning-input-field>
                                                    
                                            </lightning-layout-item>    
                                        </lightning-layout>
                                        
                                        <lightning-layout class="slds-p-right_medium">
                                            <lightning-layout-item size="12"> 
                                                <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALSO_NOTIFY}</label> 
                                                <lightning-helptext content={labels.ALSO_NOTIFY_TEXT}></lightning-helptext>
                                                <lightning-input-field variant="label-hidden" class="Jarvis_Also_Notify__c" data-id="Jarvis_Also_Notify__c" field-name="Jarvis_Also_Notify__c" data-field="Jarvis_Also_Notify__c" onchange={onFieldChange}>                                
                                                </lightning-input-field>
                                                <template if:true={showValidation}>
                                                    <div aria-live="assertive" class="slds-form-element__help redColor">
                                                        {validEmailMessage}
                                                    </div>    
                                                </template>
                                                        
                                            </lightning-layout-item>    
    
                                        </lightning-layout>
   
                                    </lightning-accordion-section>
                                </lightning-accordion>                                                
    
                        
    
    
                        
    
    
                    <input type="submit" class="hidden"/>
                </lightning-record-edit-form>                  
    
    
    
                
            <p slot="footer">
                <lightning-button
                class="slds-m-top_small slds-m-right_small"
                variant="default"
                type="submit"
                name="cancel"
                label={labels.BUTTON_CANCEL}
                onclick={closeModal}>
                
                </lightning-button>    
    
                <lightning-button
                class="slds-m-top_small slds-m-right_small createBtn"
                variant="brand"
                type="submit"
                name="Create"
                label={labels.BUTTON_CREATE}
                onclick={validateForm}>>
                </lightning-button>    
    
    
            </p>
    
            </lightning-card>
        </lightning-layout-item>
                

    <template if:true={showSuggestionSection}>        
        <lightning-layout-item size="4">
            
            <article class="slds-card" style="border:none">
                <article class="slds-card" style="border:none">
                    <div class="slds-card__header slds-grid" style="padding-left: 1.75%">
                      <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__body">
                          <h2 class="slds-card__header-title">
                              <span>{labels.ARTICLE_SUGGESTION}</span>
                          </h2>
                        </div>
                      </header>
                    </div>
                  </article>
                  <lightning-card title="" class="suggestedSectionCreatePage">
                    <template if:true={articlesDiscussionsExist}>
                        <div class={scrollNeeded} >
                            <ul class="slds-has-dividers_top-space">
                                <template for:each={kbArticles} for:item="article">
                                    <li class="slds-item" key={article.akamId}>
                                        <lightning-tile label={article.title} data-id={article.recordId} onclick={onArticleClick} href="javascript:void(0);">
                                            <!-- <p >{article.summary}</p> -->
                                            <div class="slds-page-header__name-meta">
                                                {labels.KNOWLEDGE_LABEL} •&nbsp;
                                                <lightning-icon icon-name="utility:preview" alternative-text={labels.PREVIEW_ALTTEXT} title={labels.PREVIEW_ALTTEXT} size="xx-small"></lightning-icon> {article.viewCount}
                                            </div>
                        
                                        </lightning-tile>
                                    </li>
                                </template>
                                <template for:each={communityDiscussions} for:item="discussion">
                                    <li class="slds-item" key={discussion.recordId}>
                                        <lightning-tile label={discussion.title} data-id={discussion.recordId} onclick={onDiscussionClick} href="javascript:void(0);">
                                            <div class="slds-page-header__name-meta" style="pointer-events:none !important">
                                                {labels.DISCUSSION_LABEL} •&nbsp;
                                                <template if:true={discussion.isAnswered}>
                                                <lightning-icon icon-name="utility:answer" variant="success" alternative-text="" title="" size="xx-small"></lightning-icon> <span class="slds-text-color_success"> Answered •&nbsp;</span>
                                                </template>
                                                <lightning-icon icon-name="utility:comments" alternative-text="" title="" size="xx-small"></lightning-icon> {discussion.commentCount}
                                            </div>
                                                                
                                        </lightning-tile>
                                    </li>
                                </template>
                            </ul>    
                            <div class="slds-align_absolute-center slds-text-link viewDashboardLink" onclick={goToSearchPage}>
                                <a>{labels.BUTTON_SEARCH}</a>
                            </div>        
                        </div>
    
                    </template>
                    <template if:false={articlesDiscussionsExist}>
                        <div class="slds-text-align_center slds-p-around_small" role="alert">
                              <h2 style="color:#848684;"> {labels.NO_RESULTS}</h2>
                        </div>
                    </template>
               
                </lightning-card>    
    
            </article>




    
        </lightning-layout-item>    
    </template>    
</lightning-layout>
    </template>

    <template if:true={recordId}>

        <template if:true={showCaseupdateModal}>
            <c-sc-jarvis-update-case onclosecreateevent={closeCaseUpdateModal} caserecordid={recordId}></c-sc-jarvis-update-case>
        </template>

        
        <article class="slds-card">
            <div class="slds-card__body slds-card__body_inner">
                <lightning-record-view-form record-id={recordId} object-api-name="Case" >

                    <lightning-accordion allow-multiple-sections-open
                active-section-name={detailSections} class="detailPageAccordion">
                        <lightning-accordion-section name={labels.SECTION_CASE_INFORMATION} label={labels.SECTION_CASE_INFORMATION} class="applyBoxStyle">
                            <div class="slds-grid">
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_ID}</label>
                                    <lightning-output-field variant="label-hidden" field-name="AKAM_Case_ID__c" data-field="AKAM_Case_ID__c" >
                                    </lightning-output-field>
                                </div>
                                <div class="slds-col slds-size_2-of-12">                                        
                                </div>
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_STATUS}</label>     
                                    <div class="slds-form-element__static slds-grow">{statusValue}</div>                                                                    
                                </div>   

                            </div>    
                            <div class="slds-grid">
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom" >
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CaseLabel_Created_Date}</label>
                                    <div class="slds-form-element__static slds-grow">{caseCreatedDate}</div>
                                </div>
                                <div class="slds-col slds-size_2-of-12">                                        
                                </div>

                                <!--<div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_OWNER}</label>     
                                    <div class="slds-form-element__static slds-grow">{caseOwner}</div>                                
                                </div>-->
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle" >{labels.CASE_SEVERITY}</label>
                                    <div class="slds-form-element__static slds-grow">{severity}</div>                                                                
                                </div>

                            </div>    
                            
                            <div class="slds-grid">
                                <div class="slds-col slds-size_12-of-12 slds-border_bottom" >
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_ACCOUNT}</label>
                                    <lightning-output-field variant="label-hidden" field-name="Case_Account_Name__c" data-field="Case_Account_Name__c" >
                                    </lightning-output-field>
                                </div>
                                <!--<div class="slds-col slds-size_2-of-12">                                        
                                </div>
                                
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle" >{labels.CASE_SEVERITY}</label>
                                    <div class="slds-form-element__static slds-grow">{severity}</div>                                                                
                                </div>-->

                            </div> 
                            
                            <template if:true={displayParentAccountfield}>
                                <div class="slds-grid">                                
                                    <div class="slds-col slds-size_12-of-12 slds-border_bottom">
                                        <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_PARENT_ACCOUNT}</label>     
                                        <div class="slds-form-element__static slds-grow">{selectedParentAccountName}</div>                                
                                    </div>
                                </div>    
                            </template>

                            <div class="slds-grid">
                                <div class="slds-col slds-size_12-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_CATEGORY}</label>
                                    <div class="slds-form-element__static slds-grow">{selectedCategoryLabel}</div>
                                </div>       
                            </div>

                            <div class="slds-grid">
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{areaProductLabel}</label>
                                    <div class="slds-form-element__static slds-grow">{selectedCaseProduct}</div>                        
                                </div>
                                <div class="slds-col slds-size_2-of-12">                                        
                                </div>
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{serviceProblemLabel}</label>
                                    <div class="slds-form-element__static slds-grow">{selectedProblem}</div>                                
                                </div>   
                            </div>    
                            
                            <div class="slds-grid">                            
                                <div class="slds-col slds-size_12-of-12">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_SUBJECT}</label>                               
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_12-of-12 slds-border_bottom">
                                    <lightning-output-field variant="label-hidden" field-name="Subject" data-field="Subject" >
                                    </lightning-output-field>
                                </div>
                            </div>

                            <template if:true={soccCase}>
                                <div class="slds-grid">                                
                                    <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                        <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_POLICY_DOMAIN}</label>
                                        <div class="slds-form-element__static slds-grow">{selectedPolicyDomain}</div>                        
                                    </div>   
                                </div>    
                            </template>

                            <template if:true={psCase}>
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                        <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_SERVICE_CONTRACT}</label>   
                                        <lightning-output-field variant="label-hidden" field-name="CustomerTracking__c" data-field="Service_Contract_Id__c" >                                
                                        </lightning-output-field>
                                    </div>   
                                </div>                                    
                            </template>

                            <template if:true={createdByAccount}>
                                <div class="slds-grid">                                
                                    <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                        <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_CREATED_BY_ACCOUNT}</label>     
                                        <div class="slds-form-element__static slds-grow">{createdByAccount}</div>                                
                                    </div>
                                </div>    
                            </template>



                            <template if:true={isReseller}>
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                        <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_PARTNER}</label>     
                                        <lightning-output-field variant="label-hidden" field-name="Partner_Ticket__c" data-field="Partner_Ticket__c" >
                                        </lightning-output-field>
                                    </div>
                                    <div class="slds-col slds-size_2-of-12">                                        
                                    </div>
                                    <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                        <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CASE_CUSTOMER}</label>   
                                        <lightning-output-field variant="label-hidden" field-name="CustomerTracking__c" data-field="CustomerTracking__c" >                                
                                        </lightning-output-field>
                                    </div>   

                                </div>

                            </template>
                            

                        </lightning-accordion-section>

                        <lightning-accordion-section name={labels.ARTICLE_DESCRIPTION} label={labels.ARTICLE_DESCRIPTION} class="applyBoxStyle">
                            
                            <div class="slds-grid">
                                <div class="slds-col slds-size_12-of-12 slds-border_bottom">
                                    <lightning-output-field variant="label-hidden" field-name="Description" data-field="Description" >                                
                                    </lightning-output-field>
                                </div>   
                            </div>
                            
                        </lightning-accordion-section>

                        <lightning-accordion-section name={labels.SECTION_CONTACT} label={labels.SECTION_CONTACT} class="applyBoxStyle">
                            <div class="slds-grid">
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CONTACT_NAME}</label>
                                    <div class="slds-form-element__static slds-grow">{contactInfo.Name}</div>                                                        
                                </div>  
                                <div class="slds-col slds-size_2-of-12">                                        
                                </div>
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CONTACT_EMAIL}</label>
                                    <div class="slds-form-element__static slds-grow">{contactInfo.Email}</div>                                                        
                                </div>

                            </div>    
                            <div class="slds-grid">
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CONTACT_PHONE}</label>
                                    <div class="slds-form-element__static slds-grow">{contactInfo.Phone}</div>                                                        
                                </div>
                                <div class="slds-col slds-size_2-of-12">                                        
                                </div>
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.CONTACT_COMPANY}</label>
                                    <div class="slds-form-element__static slds-grow">{contactInfo.Company}</div>                                                        
                                </div>   
                            </div>    

                            <div class="slds-grid">
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALTERNATE_CONTACT_NAME}</label>
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_10-of-12">
                                            <lightning-output-field variant="label-hidden" field-name="Alternate_Contact_Name__c" data-field="Alternate_Contact_Name__c" >                                
                                            </lightning-output-field>
                                        </div>
                                        <template if:true={hasEditAccess}>
                                            <div class="slds-col slds-size_2-of-12" style="text-align: right">
                                                <lightning-button-icon icon-name="action:edit"   variant="bare" alternative-text={labels.EDIT_ALTTEXT} class="slds-m-left_xx-small" title={labels.EDIT_ALTTEXT} onclick={openUpdateModal}></lightning-button-icon>
                                            </div>
                                        </template>
                                    </div>
                                </div>  
                                <div class="slds-col slds-size_2-of-12">                                        
                                </div>
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALTERNATE_CONTACT_EMAIL}</label>
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_10-of-12">
                                            <lightning-output-field variant="label-hidden" field-name="Alternate_Contact_Email__c" data-field="Alternate_Contact_Email__c" >
                                            </lightning-output-field>
        
                                        </div>
                                        <template if:true={hasEditAccess}>
                                            <div class="slds-col slds-size_2-of-12" style="text-align: right">
                                                <lightning-button-icon icon-name="action:edit"   variant="bare" alternative-text={labels.EDIT_ALTTEXT} class="slds-m-left_xx-small" title={labels.EDIT_ALTTEXT} onclick={openUpdateModal}></lightning-button-icon>
                                            </div>
                                        </template>
                                    </div>

                                    
                                </div>

                            </div>    
                            <div class="slds-grid">
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALTERNATE_CONTACT_PHONE}</label>                                    
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_10-of-12">
                                            <lightning-output-field variant="label-hidden" field-name="Alternate_Contact_Phone__c" data-field="Alternate_Contact_Phone__c" >
                                            </lightning-output-field>
        
                                        </div>
                                        <template if:true={hasEditAccess}>
                                            <div class="slds-col slds-size_2-of-12" style="text-align: right">
                                                <lightning-button-icon icon-name="action:edit"   variant="bare" alternative-text={labels.EDIT_ALTTEXT} class="slds-m-left_xx-small" title={labels.EDIT_ALTTEXT} onclick={openUpdateModal}></lightning-button-icon>
                                            </div>
                                        </template>
                                    </div>

                                    
                                </div>
                                <div class="slds-col slds-size_2-of-12">                                        
                                </div>
                                <div class="slds-col slds-size_5-of-12 slds-border_bottom">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALTERNATE_CONTACT_COMPANY}</label>

                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_10-of-12">
                                            <lightning-output-field variant="label-hidden" field-name="Alternate_Contact_Company__c" data-field="Alternate_Contact_Company__c" >                                
                                            </lightning-output-field>
        
                                        </div>
                                        <template if:true={hasEditAccess}>
                                            <div class="slds-col slds-size_2-of-12" style="text-align: right">
                                                <lightning-button-icon icon-name="action:edit"   variant="bare" alternative-text={labels.EDIT_ALTTEXT} class="slds-m-left_xx-small" title={labels.EDIT_ALTTEXT} onclick={openUpdateModal}></lightning-button-icon>
                                            </div>
                                        </template>
                                    </div>

                                </div>   
                            </div>  
                            
                            <div class="slds-grid">
                                <div class="slds-col slds-size_12-of-12">
                                    <label class="slds-form-element__label slds-no-flex labelstyle">{labels.ALSO_NOTIFY}</label>
                                </div>    
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_12-of-12 slds-border_bottom">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_10-of-12">
                                            <lightning-output-field variant="label-hidden" field-name="Jarvis_Also_Notify__c" data-field="Jarvis_Also_Notify__c" >                                
                                            </lightning-output-field>
        
                                        </div>
                                        <template if:true={hasEditAccess}>
                                            <div class="slds-col slds-size_2-of-12" style="text-align: right">
                                                <lightning-button-icon icon-name="action:edit"   variant="bare" alternative-text={labels.EDIT_ALTTEXT} class="slds-m-left_xx-small" title={labels.EDIT_ALTTEXT} onclick={openUpdateModal}></lightning-button-icon>
                                            </div>
                                        </template>
                                    </div>

                                </div>   
                            </div>
                            
                        </lightning-accordion-section>
                        
                    </lightning-accordion>
                </lightning-record-view-form>                    
            </div>
        </article>
    </template>
</template>