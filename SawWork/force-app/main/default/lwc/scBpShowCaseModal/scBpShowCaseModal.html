<template>
    <template if:true={caseSpinner}>
        <!--<div class="forceModalSpinner testModal" style="z-index: 99 !important;opacity: 0.7 !important;">
            <div class="modal-glass" style="opacity: 0.2;">&nbsp;</div>
            <div class="forceInlineSpinner indicatorContainer" aria-hidden="false" role="alert" data-aura-class="forceInlineSpinner">
                <div class="forceDotsSpinner" data-aura-class="forceDotsSpinner">
                    <div class="slds-spinner slds-spinner_brand slds-spinner_medium" role="status">
                        <span class="slds-assistive-text">Loading...</span>
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div>
                </div>
        </div>
        </div>-->
        <div style="opacity: 0.7;" class="slds-spinner_container">
            <lightning-spinner alternative-text="Loading" variant="brand" size="medium"> </lightning-spinner>
        </div>
    </template>
    <template if:true={showFilters}>
    <div class="slds-card filterDiv" style="background: #f3f2f2">
        <div class="slds-grid slds-gutters" style="padding: 2.18vh;">
            <header class="slds-media slds-media_center slds-has-flexi-truncate"> 
                <div class="slds-media slds-col"><!--class="slds-media slds-col"-->
                    <lightning-checkbox-group name="Case Severity" label="Case Severity"
                                                options={caseSeverityVal} value={caseSeveritySelected} onchange={caseSevChange}
                                                class="caseSevClass">
                    </lightning-checkbox-group>
                </div>

                <div class="slds-media slds-col">
                    <lightning-combobox name="Case Problem" label="Case Problem" 
                                        options={caseProblemVal} value={caseProblemSelected} onchange={caseProblemChange}></lightning-combobox>
                </div>

                <div style="padding-right: 25px;">
                    <lightning-button variant="brand" icon-name="utility:save" label="Apply" title="Apply"
                                        onclick={applyFilter} class="slds-button slds-m-left_x-small">
                    </lightning-button>

                    <lightning-button variant="neutral" label="Reset" title="Reset" onclick={reset}
                                        class="slds-button slds-m-left_x-small">
                    </lightning-button>
                </div>
            </header>
        </div>
    </div>
    </template>
    &nbsp;
    &nbsp;
    &nbsp;
    <lightning-card>
        <div style="background-color: rgb(243, 242, 242); margin-top: -1rem; padding-bottom: 2rem;">
            <header slot="title" class="slds-page-header slds-page-header_record-home" style="background-color: rgb(243, 242, 242); height: 1rem;">
                <template if:true={showHeaderFooter}>
                    <div style="float: left;margin-top: 6px;">
                        Size:
                    </div>
                    <div style="float: left; width:8%; margin-left: 10px">
                        <select style="width:35%;" class="slds-select" id="recordsPerPage" onchange={handleRecordsPerPage}>
                            <template for:each={pageSizeOptions} for:item="option">
                                <option key={option} value={option}>{option}</option>
                            </template>
                        </select>
                    </div>
                    <div style="float: right; margin-top: 7px; margin-right: 10px;">
                        <button class="slds-button" onclick={clearSearchInput}>
                            <lightning-icon icon-name="utility:clear" alternative-text="Clear" size="x-small"></lightning-icon>
                        </button>
                    </div>
                    <div style="float: right; margin-top: -16px; margin-right: 5px; width: 18%;">
                        <lightning-input value={caseSearchText} placeholder="Search..." type="text" name="Case Search" class="labelHidden" onchange={delayedSearch}> </lightning-input>
                    </div>
                </template>
            </header>
        </div>
        &nbsp; &nbsp;
        <!--<template if:true={caseSpinner}>
            <div style="opacity: 0.7;" class="slds-spinner_container">
                <lightning-spinner alternative-text="Loading" variant="brand" size="medium"> </lightning-spinner>
            </div>
        </template>-->
        <!-- onrowselection={caseSelected}
        show-row-number-column -->
        <template if:true={showTable}>
            <lightning-datatable
                class="slds-table_bordered"
                key-field="akamCaseId"
                data={SlicedDatalist}
                columns={columns}
                sorted-by={sortBy}
                sorted-direction={sortDirection}
                onsort={updateColumnSorting}                
                selected-rows={selectedRows}
                hide-checkbox-column=true
                onrowaction={associateCaseToIncident}               
            >
            </lightning-datatable>
        </template>
        <template if:false={showTable}>
            &nbsp;
            &nbsp;
            <h1 style="text-align: center; color: red; font-size: x-large;">{message}</h1>
            &nbsp;
            &nbsp;
        </template>
        &nbsp; &nbsp;
        <template if:true={showHeaderFooter}>
            <footer class="slds-card__footer" style="margin-top: -1px; background-color: #f3f2f2;">
                <div class="slds-align_absolute-center">               
                        <div slot="actions">
                            <lightning-button variant="neutral" title="first" label="First" class="slds-float_left" icon-name="utility:chevronleft" icon-position="left" onclick={handleClick}></lightning-button>
                            &nbsp;
                            <lightning-button variant="neutral" title="previous" class="slds-float_left" label="Previous" icon-name="utility:chevronleft" icon-position="left" onclick={handleClick}></lightning-button>
                            &nbsp;
                            <lightning-button variant="brand" label={currentpage}></lightning-button>
                            &nbsp;
                            <lightning-button variant="neutral" title="last" class="slds-float_right" label="Last" icon-name="utility:chevronright" icon-position="right" onclick={handleClick}></lightning-button>
                            &nbsp;
                            <lightning-button variant="neutral" title="next" class="slds-float_right" label="Next" icon-name="utility:chevronright" icon-position="right" onclick={handleClick}></lightning-button>
                        </div>                
                </div>
            </footer>
        </template>
        <template if:false={showHeaderFooter}>
            <footer class="slds-card__footer" style="margin-top: -1px; background-color: #f3f2f2;padding-bottom: 2rem;">
                <div class="slds-align_absolute-center"> 

                </div>
            </footer>
        </template>
    </lightning-card>
</template>