<template>
    <template if:true = {showModal}>
        <section role="dialog" class="slds-modal slds-fade-in-open slds-modal_medium modalRadius" aria-modal="true">
            <div class="slds-modal__container">
                <header class="slds-modal__header slds-modal__header_empty">
                    <lightning-button-icon icon-name="utility:close" alternative-text="Close" variant="bare-inverse" onclick={closeModal} class="slds-modal__close" size="large">
                    </lightning-button-icon>
                </header>
                <div class="slds-modal__content" id="modal-content-id-1">
                    <lightning-layout horizontal-align="spread" style="height:auto;">
                        <lightning-layout-item size="4" class="bg slds-p-around_medium" style="position:relative; height:610px"> 
                            <div style="text-align:center;">
                                <div class="announcementTitle slds-p-top_large">{announcement.Name}</div>
                                <div class="slds-p-around_medium" style="font-size:16px">
                                   {announcement.Summary__c}
                                </div>
                            </div>
                            <div class="announcementDetail">
                                <input type="checkbox" onchange={toggleShowAgain}/>  I acknowledge, don't show again
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item if:true={showFeatureList} size="8" class="slds-p-vertical_medium slds-p-horizontal_small" style="background-color:whitesmoke; height:610px;">
                            <template for:each={features} for:item="feature">
                                <section class="slds-card" key={feature.Id} style="height:auto;">
                                    <div class="slds-card__body slds-card__body_inner slds-card_boundary slds-p-around_x-small cardShadow" style={adjustHeight}>
                                        <lightning-layout horizontal-align="spread">
                                            <lightning-layout-item class="slds-p-left_xx-small">
                                                <p class="slds-text-heading_medium">{feature.Name}</p>
                                                <p class="slds-m-vertical_xx-small">{feature.Short_Description__c}</p>
                                            </lightning-layout-item>
                                            <lightning-layout-item if:true={feature.Details__c} size="1" style="position:relative;">
                                                <button  data-id={feature.Id} class="slds-button slds-button_neutral slds-p-around_xx-small" style="position:absolute; right:0px;" onclick={showDetails}>
                                                    <lightning-icon icon-name="utility:chevronright" size="x-small" alternative-text="Show more details" title="Show more details"></lightning-icon>
                                                </button>
                                            </lightning-layout-item>
                                        </lightning-layout>
                                    </div>
                                </section>      
                            </template>
                        </lightning-layout-item>
                        <lightning-layout-item if:false={showFeatureList} size="8" style="height:610px;">
                            <button class="slds-button slds-button_neutral slds-p-around_xx-small slds-m-around_small" onclick={hideDetails}>
                                <lightning-icon icon-name="utility:chevronleft" size="x-small" alternative-text="Go back to feature list" title="Go back to feature list"></lightning-icon>
                            </button>
                            <div class="slds-p-horizontal_small slds-scrollable" style="height:560px">
                                <div class="slds-text-heading_large">{selectedFeature.Name}</div><br/>
                                <lightning-formatted-rich-text value={selectedFeature.Details__c}></lightning-formatted-rich-text>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>