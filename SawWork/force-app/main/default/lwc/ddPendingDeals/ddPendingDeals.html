<template>
    <div style="min-height:300px;">
        <header class="cust-tab-header">
            <div>Pending Deals ({pendingDeals.length})</div>
        </header>
        <div class="deal-list">
            <template for:each={pendingDeals} for:item="deal">
                <div class="slds-docked-composer__lead deal-record" key={deal.Id} data-id={deal.Id}
                    onclick={openDealPage}>
                    <div class="slds-media">
                        <div class="slds-media__figure">
                            <lightning-icon icon-name="action:fallback" variant="inverse" size="small"
                                class={deal.Deal_Zone__c}>
                            </lightning-icon>
                        </div>
                        <div class="slds-media__body ">
                            <p class="slds-text-heading_medium slds-p-bottom_x-small">{deal.Name}</p>
                            <ul class="slds-list_horizontal slds-has-dividers_right slds-text-body_medium">
                                <li class="slds-item">{deal.Account__r.Name}</li>
                                <li class="slds-item ">{deal.GSS_Product__r.Product_Combination__c}</li>
                                <!-- <li class="slds-item ">{deal.Deal_Zone__c}</li> -->
                                <!-- <li class="slds-item ">Pending with {deal.Approval_Stage__c}</li> -->
                            </ul>
                        </div>
                    </div>
                    <div class="slds-col_bump-left slds-col_bump-left">
                        <div class="slds-p-bottom_x-small">
                            <span class="small-text slds-p-horizontal_xx-small">EPS:</span>
                            <lightning-formatted-number class="slds-text-heading_small"
                                value={deal.Expected_Profitability_Score__c} maximum-fraction-digits="2">
                            </lightning-formatted-number>
                        </div>
                        <div>
                            <span class="small-text slds-p-horizontal_xx-small">ESR:</span>
                            <lightning-formatted-number class="slds-text-heading_small"
                                value={deal.Computed_ESR_Local__c} maximum-fraction-digits="2">
                            </lightning-formatted-number>
                        </div>
                        <!-- <div>
                    <span class="small-text slds-p-horizontal_xx-small">EPS:</span>
                    <lightning-formatted-number class="slds-text-heading_small"
                        value={deal.Expected_Profitability_Score__c} maximum-fraction-digits="2">
                    </lightning-formatted-number>
                </div> -->
                        <!-- <div>
                    <span class="small-text slds-p-horizontal_xx-small">ESR:</span>
                    <lightning-formatted-number class="slds-text-heading_small" value={deal.Computed_ESR_Local__c}
                        maximum-fraction-digits="2">
                    </lightning-formatted-number>
                </div> -->
                    </div>
                </div>
            </template>

            <div if:false={pendingDeals.length} class="error-msg">
                No pending deals to display
            </div>
        </div>
    </div>
</template>