<template>    
    <!-- ********************************** SPINNER ********************************** -->

    <div class="FullTableClass" style="zoom: 90%">
        
        <div class="slds-grid slds-gutters">
            
            <div class="slds-col caseTableDiv slds-size_5-of-5">
                <div>
                    <template if:true={showSpinner}>
                        <div style="opacity: 0.7; " class="slds-spinner_container">
                            <lightning-spinner alternative-text="Loading" variant="brand" size="medium">
                            </lightning-spinner>
                        </div>
                    </template>
                </div>

                <div>
                    <template if:true={showSidePaneSpinner}>
                        <div style="opacity: 0.7; " class="slds-spinner_container">
                            <lightning-spinner alternative-text="Loading" variant="brand" size="medium">
                            </lightning-spinner>
                        </div>
                    </template>
                </div>
                
            
                <div class="slds-card slds-page-header slds-p-around_medium">

                    <!-- ********************************** HEADER (TSC) ********************************** -->
                    <template if:true={tscView}>
                        <div class="slds-grid slds-gutters">

                                <!-- ****************** LABEL ****************** -->
                                <div class="slds-media__figure slds-col slds-size_1-of-6 headerLabel">
                                    <ul class="slds-list_horizontal slds-media_center">
                                        <li>
                                            <template if:true={displayCase}>
                                                <lightning-button-icon icon-name="utility:chevrondown" variant="bare"
                                                    style="padding-right: 6px; padding-left: 2px;" alternative-text="Collapse"
                                                    title="Collapse" onclick={hidemyopencasesTable}>
                                                </lightning-button-icon>
                                            </template>

                                            <template if:false={displayCase}>
                                                <lightning-button-icon icon-name="utility:chevronright" variant="bare"
                                                    style="padding-right: 6px; padding-left: 2px;" alternative-text="Collapse"
                                                    title="Collapse" onclick={showmyopencasesTable}>
                                                </lightning-button-icon>
                                            </template>
                                        </li>

                                        <li style="margin-right: 5px;">
                                            <lightning-icon icon-name="standard:case" size="medium" alternative-text="cases"
                                                title="cases">
                                            </lightning-icon>
                                        </li>

                                        <template if:false={globalSearchEnabled}>
                                            <li>
                                                <div class="slds-media__body">
                                                    <div class="slds-media__body">
                                                        <div class="slds-page-header__name">
                                                            <div class="slds-page-header__name-title">
                                                                <h2>
                                                                    <span style="font-size: 15px" class="slds-text-heading_small slds-truncate"><b>Daily Case Update ({casesCount})</b></span>
                                                                </h2>
                                                            </div>
                                                        </div>
                                                        <p class="slds-page-header__name-meta">Updated <lightning-relative-date-time
                                                                value={lastUpdated}></lightning-relative-date-time>
                                                        </p>
                                                    </div>
                                                </div>
                                            </li>
                                        </template>

                                        <template if:true={globalSearchEnabled}>
                                            <li>
                                                <div class="slds-media__body">
                                                    <div class="slds-page-header__name">
                                                        <div class="slds-page-header__name-title">
                                                            <h2><span class="slds-text-heading_small slds-truncate"><b>Global Search Result</b></span></h2>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                        </template>
                                    </ul>
                                </div>

                            
                                <!-- ****************** NEW CASE ****************** -->
                                <div class="slds-col slds-size_1-of-2 buttonLeftRightPadding newCaseButtonRef">
                                    <lightning-button 
                                    variant="brand" 
                                    label="New Case" 
                                    onclick={newPSCase} >
                                    </lightning-button>
                                </div>

                                <!-- ****************** SEARCH ****************** -->

                                <div class="slds-col slds-size_1-of-9">
                                    <lightning-input label="Search" type="toggle" title="Search locally in the table or toggle to Global Search" class="globalSearchButton"
                                    onchange={globalSearchToggle} 
                                    message-toggle-inactive="Local" message-toggle-active="Global" >
                                    </lightning-input>

                                    <!--<lightning-button-stateful
                                        label-when-off="Click to Global Search"
                                        label-when-on="Global Search enabled"
                                        label-when-hover="Click to Global Search"
                                        icon-name-when-off="utility:search"
                                        icon-name-when-on="utility:search"
                                        icon-name-when-hover="utility:search"
                                        class="globalSearchButton"
                                        selected={isSelected}
                                        variant="neutral"
                                        onclick={globalSearchToggle}>
                                    </lightning-button-stateful>-->
                                </div>

                                <template if:false={globalSearchEnabled}>
                                    <div class="slds-col slds-size_1-of-9"  style="padding-right: 0;padding-left: 0;">
                                        <lightning-button-menu  
                                            icon-name="utility:search"
                                            icon-size="medium"
                                            alternative-text=""
                                            title="Search on fields" variant="border-filled" nubbin>

                                            <div class="slds-panel__body" style="padding-bottom: 0">
                                                    
                                                <div class="slds-media__body" style="width: max-content">
                                                    <h3><b>Fields</b></h3>
            
                                                    <div class="slds-p-around--x-small">
                                                        <lightning-checkbox-group
                                                        name="Search Columns"
                                                        value={searchColVal}
                                                        options={searchCols}
                                                        onchange={searchColChange} 
                                                        variant="label-hidden">
                                                        </lightning-checkbox-group>
                                                    </div>
                                                </div>
                                            </div>
                                        </lightning-button-menu>
                                    </div>
                                </template>

                                <div class="slds-col slds-size_1-of-6 searchInputDiv" style="padding-left: 0">
                                    <div>
                                        <lightning-input variant="label-hidden" 
                                        type="search" 
                                        class="searchInput"
                                        onchange={delayedSearch}
                                        placeholder={searchPlaceholderString}>
                                        </lightning-input>
                                    </div>
                                </div>

                                <template if:true={globalSearchEnabled}>
                                    <lightning-button-icon icon-name="utility:search"      
                                    variant="brand" 
                                    onclick={globalSearchCaseMethod}
                                    alternative-text="Search" title="Click to search"></lightning-button-icon>
                                </template>

                                <!-- ****************** REFRESH ****************** -->

                                
                                <div class="slds-col" style="text-align: right">
                                    <button class="slds-button" onclick={refresh}>
                                        <lightning-icon icon-name="action:refresh" title="Click to refresh" alternative-text="Refresh Dashboard" size="x-small">
                                        </lightning-icon>
                                    </button>
                                </div>
                        </div>
                    </template>
                    <!-- ********************************** HEADER (GS2) ********************************** -->

                    <template if:false={tscView}>
                        <div class="slds-grid slds-gutters">
                                <!-- ****************** LABEL ****************** -->
                                <div class="slds-media__figure slds-col slds-size_2-of-12 headerLabel">
                                    <ul class="slds-list_horizontal slds-media_center">
                                        <li>
                                            <template if:true={displayCase}>
                                                <lightning-button-icon icon-name="utility:chevrondown" variant="bare"
                                                    style="padding-right: 6px; padding-left: 2px;" alternative-text="Collapse"
                                                    title="Collapse" onclick={hidemyopencasesTable}>
                                                </lightning-button-icon>
                                            </template>

                                            <template if:false={displayCase}>
                                                <lightning-button-icon icon-name="utility:chevronright" variant="bare"
                                                    style="padding-right: 6px; padding-left: 2px;" alternative-text="Collapse"
                                                    title="Collapse" onclick={showmyopencasesTable}>
                                                </lightning-button-icon>
                                            </template>
                                        </li>

                                        <li style="margin-right: 5px;">
                                            <lightning-icon icon-name="standard:case" size="medium" alternative-text="cases"
                                                title="cases">
                                            </lightning-icon>
                                        </li>

                                        <template if:false={globalSearchEnabled}>
                                            <li>
                                                <div class="slds-media__body">
                                                    <div class="slds-media__body">
                                                        <div class="slds-page-header__name">
                                                            <div class="slds-page-header__name-title">
                                                                <h2>
                                                                    <span style="font-size: 15px"  class="slds-text-heading_small slds-truncate"><b>{headingLabel} ({casesCount})</b></span>
                                                                </h2>
                                                            </div>
                                                        </div>
                                                        <p class="slds-page-header__name-meta">Updated <lightning-relative-date-time
                                                                value={lastUpdated}></lightning-relative-date-time>
                                                        </p>
                                                    </div>
                                                </div>
                                            </li>
                                        </template>

                                        <template if:true={globalSearchEnabled}>
                                            <li>
                                                <div class="slds-media__body">
                                                    <div class="slds-page-header__name">
                                                        <div class="slds-page-header__name-title">
                                                            <h2><span class="slds-text-heading_small slds-truncate"><b>Global Search Result</b></span></h2>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                        </template>
                                    </ul>
                                </div>
                            
                                <!-- ****************** VIEWS ****************** -->
                                <div class="slds-col slds-size_6-of-12 slds-large-size_6-of-12 slds-medium-size_4-of-12  display-horizontal">
                                        <lightning-combobox
                                            required
                                            name="Case View"
                                            value={myCasesViewVal}
                                            options={myCasesViewOptions}
                                            onchange={viewChange} 
                                            variant="label-hidden">
                                    </lightning-combobox>
                                    <!-- ****************** NEW CASE ****************** -->
                                    <div class="newCaseButtonRef slds-m-left_x-small">
                                        <lightning-button
                                                variant="brand"
                                                label="New Case"
                                                onclick={newPSCase} >
                                        </lightning-button>
                                    </div>
                                    <!-- ****************** BULK CLOSE ****************** -->
                                    <div class="closeMultiCaseButtonDiv slds-m-left_x-small">
                                        <lightning-button class="closeMultiCaseButton" name="closeMultiCaseButton" variant="brand" label="Close Multiple Cases" onclick={handleBulkCloseCase} disabled>
                                        </lightning-button>
                                    </div>
                                </div>

                                <!-- ****************** SEARCH ****************** -->

                                <div class="slds-col slds-size_3-of-12 slds-medium-size_5-of-12 slds-large-size_3-of-12 display-horizontal">
                                    <lightning-input
                                    label="Search" 
                                    type="toggle" 
                                    title="Search locally in the table or toggle to Global Search"
                                    class="globalSearchButton slds-p-right_x-small"
                                    onchange={globalSearchToggle} 
                                    message-toggle-inactive="Local" message-toggle-active="Global" >
                                    </lightning-input>

                                    <!--<lightning-button-stateful
                                        label-when-off="Click to Global Search"
                                        label-when-on="Global Search enabled"
                                        label-when-hover="Click to Global Search"
                                        icon-name-when-off="utility:search"
                                        icon-name-when-on="utility:search"
                                        icon-name-when-hover="utility:search"
                                        class="globalSearchButton"
                                        selected={isSelected}
                                        variant="neutral"
                                        onclick={globalSearchToggle}>
                                    </lightning-button-stateful>-->
                                    <template if:false={globalSearchEnabled}>
                                        <lightning-button-menu
                                                    icon-name="utility:search"
                                                    icon-size="medium"
                                                    alternative-text=""
                                                    title="Search on fields" variant="border-filled" nubbin>

                                                <div class="slds-panel__body" style="padding-bottom: 0">

                                                    <div class="slds-media__body" style="width: max-content">
                                                        <h3><b>Fields</b></h3>

                                                        <div class="slds-p-around--x-small">
                                                            <lightning-checkbox-group
                                                                    name="Search Columns"
                                                                    value={searchColVal}
                                                                    options={searchCols}
                                                                    onchange={searchColChange}
                                                                    variant="label-hidden">
                                                            </lightning-checkbox-group>
                                                        </div>
                                                    </div>
                                                </div>
                                            </lightning-button-menu>
                                    </template>
                                    <div class="searchInputDiv">
                                        <lightning-input variant="label-hidden"
                                                         type="search"
                                                         class="searchInput"
                                                         onchange={delayedSearch}
                                                         placeholder={searchPlaceholderString}>
                                        </lightning-input>
                                    </div>
                                    <template if:true={globalSearchEnabled}>
                                        <lightning-button-icon class="slds-p-left_x-small" icon-name="utility:search"
                                                               variant="brand"
                                                               size="medium"
                                                               onclick={globalSearchCaseMethod}
                                                               alternative-text="Search" title="Click to search"></lightning-button-icon>
                                    </template>
                                    <!-- ****************** FILTER ****************** -->
                                    <template if:false={globalSearchEnabled}>
                                        <div class="slds-m-left_small">
                                            <!--<lightning-button icon-name="utility:filterList" variant="neutral" label="Filter" onclick={OpenFilters}></lightning-button>-->
                                            <lightning-button-menu
                                                    class="caseFilterMenu"
                                                    icon-name="utility:filterList"
                                                    alternative-text="Show Filters"
                                                    menu-alignment="right"
                                                    title="Show Filters">
                                                <!--<lightning-menu-item class="filterStyle" value="" label=""></lightning-menu-item>-->

                                                <div class="slds-panel__body" style="padding-bottom: 0;width:max-content">

                                                    <div class="slds-media__body">
                                                        <div>
                                                            <h3><b>Severity</b></h3>
                                                        </div>
                                                        <div>
                                                            <lightning-checkbox-group name="sevValue"
                                                                                      options={sevOptions}
                                                                                      value={sevValue}
                                                                                      class="inlinecheckbox"
                                                                                      onchange={filterChange}></lightning-checkbox-group>
                                                        </div>
                                                    </div>

                                                    <div class="slds-has-divider_top-space" role="separator"></div>

                                                    <div class="slds-media__body">
                                                        <div>
                                                            <h3><b>Utilized Hours</b></h3>
                                                        </div>

                                                        <div class="slds-grid" style="padding-left: 0">
                                                            <div class="slds-col noPadding">
                                                                <lightning-input onchange={utilHourChange} class="allChecked" checked={allChecked} type="checkbox" variant="label-hidden" name="all"></lightning-input>
                                                            </div>
                                                            <div class="slds-col noPadding"><span>All</span></div>
                                                            <div class="slds-col trimRightPadding">
                                                                <lightning-input onchange={utilHourChange} class="redChecked" checked={redChecked}  type="checkbox" variant="label-hidden" name="red"></lightning-input>
                                                            </div>
                                                            <div  title="Overdone LOE" class="slds-col noPadding">
                                                                <span class="slds-icon_container slds-icon-action-close slds-icon_container_circle"></span>
                                                                <!--<div class="hoursBubble redHoursBubble" title="Overdone LOE">red</div>-->
                                                            </div>
                                                            <div class="slds-col trimRightPadding">
                                                                <lightning-input onchange={utilHourChange} class="yellowChecked" checked={yellowChecked} type="checkbox" variant="label-hidden" name="yellow"></lightning-input>
                                                            </div>
                                                            <div title="Nearing LOE" class="slds-col noPadding">
                                                                <span class="slds-icon_container slds-icon-action-new-case slds-icon_container_circle"></span>
                                                                <!--<div class="hoursBubble yellowHoursBubble" title="Nearing LOE">yel</div>-->
                                                            </div>
                                                            <!--<lightning-checkbox-group name="utilizedHoursValue"
                                                            class="inlinecheckbox"
                                                            options={utilizedHoursOptions}
                                                            value={utilizedHoursValue}
                                                            onchange={filterChange}>
                                                            </lightning-checkbox-group> -->
                                                        </div>
                                                    </div>

                                                    <div class="slds-has-divider_top-space" role="separator"></div>

                                                    <div class="slds-media__body">
                                                        <div>
                                                            <h3><b>Requested Completion Date</b></h3>
                                                        </div>

                                                        <div>
                                                            <lightning-input checked={reqCompDateVal}
                                                                             name="reqCompDateVal" class="reqCompDateVal"
                                                                             onchange={reqCompDateChange} type="checkbox" label="Due in 48 hours">
                                                            </lightning-input>
                                                        </div>
                                                    </div>

                                                    <div class="slds-has-divider_top-space" role="separator"></div>

                                                    <div class="slds-media__body">
                                                        <div>
                                                            <h3><b>Next Planned Activity Date</b></h3>
                                                        </div>

                                                        <div>
                                                            <lightning-input
                                                                    checked={nextActDateVal} name="nextActDateVal" class="nextActDateVal"
                                                                    onchange={nextActDateChange} type="checkbox" label="Overdue">
                                                            </lightning-input>
                                                        </div>
                                                    </div>

                                                    <div class="slds-has-divider_top-space" role="separator"></div>

                                                    <div class="slds-modal__footer" style="padding: 5px; text-align: center;border: none; background-color: white;box-shadow: none;">
                                                        <button type="button" class="slds-button slds-button_neutral" onclick={resetFilter}>Reset</button>
                                                        <button type="button" class="slds-button slds-button_brand" onclick={applyFilter}>Apply</button>
                                                    </div>
                                                </div>

                                            </lightning-button-menu>
                                            <!--
                                            <lightning-button-icon-stateful name="filterButton" class="filterButtonClass" icon-name="utility:filterList" variant="border-filled" selected={likeStateFilled} onclick={openFilters} alternative-text="Open Filters">Open</lightning-button-icon-stateful>
                                            -->

                                        </div>

                                        <!-- ****************** CUSTOMISE COLUMNS ****************** -->
                                        <div class="customiseColumnsButton" style="padding-left: 0px;padding-right: 0px; ">
                                            <lightning-button-menu icon-name="utility:settings" variant="border-filled"
                                                                   title="Customise Columns"
                                                                   menu-alignment="right" nubbin>
                                                <div class="slds-panel__body" style="padding-bottom: 0">

                                                    <div class="slds-media__body" style="width: max-content">
                                                        <h3><b>Columns to display</b></h3>

                                                        <div class="slds-p-around--x-small">
                                                            <lightning-checkbox-group
                                                                    class="myCasesColumnsVal"
                                                                    options={myCasesColumnsValOptions}
                                                                    value={myCasesColumnsVal}
                                                                    onchange={handleMyCasesColChange}>
                                                            </lightning-checkbox-group>
                                                        </div>
                                                    </div>
                                                </div>
                                            </lightning-button-menu>
                                        </div>
                                    </template>
                                </div>


                                <!-- ****************** REFRESH ****************** -->
                                <div class="slds-col slds-size_1-of-12" style="text-align: right; padding-right: 1.2rem">
                                    <button class="slds-button" onclick={refresh}>
                                        <lightning-icon icon-name="action:refresh" title="Click to refresh" alternative-text="Refresh Dashboard" size="x-small">
                                        </lightning-icon>
                                    </button>
                                </div>
                        </div>
                    </template>
                </div>

                <!-- ********************************** CASES DATATABLE ********************************** -->
            
                <div class="datatableStyle" style="padding-top: 0px;border-radius: 4px;">

                    <div id="divForDatatable" class="panelmyOpenCases" style="height: 70vh;">
                        
                        <template if:false={globalSearchEnabled}>
                            <c-sc-u-c-d-hours-custom-datatype
                                data={data} 
                                columns={columns} 
                                onrowaction={handleRowAction} 
                                key-field="caseRecId"
                                wrap-text-max-lines="2"
                                data-id="caseDatatable"
                                default-sort-direction={defaultSortDirection}
                                sorted-by={sortedBy} 
                                sorted-direction={sortDirection}
                                onsort={onHandleSort} 
                                onrowselection={casesSelected} 
                                selected-rows={selectedRows}
                                max-row-selection={maxRowSelVal}
                                enable-infinite-loading
                                onloadmore={loadMoreData}
                                class="casesDatatableCustom">
                            </c-sc-u-c-d-hours-custom-datatype>
                        </template>

                    <!-- **********************************GLOBAL SEARCH CASES DATATABLE ********************************** -->
                        
                        <template if:true={globalSearchEnabled}>
                            <div style="height: 20vh;">
                                <c-sc-u-c-d-hours-custom-datatype
                                    data={globalSearchCase} 
                                    columns={globalSearchColumns} 
                                    onrowaction={handleRowAction} 
                                    key-field="caseRecId"
                                    wrap-text-max-lines="2"
                                    data-id="globalSearchDatatable"
                                    hide-checkbox-column
                                    class="globalSearchDatatable">
                                </c-sc-u-c-d-hours-custom-datatype>
                            </div>

                            <template if:true={globalSearchEnabled}>

                                <div class="slds-card slds-page-header" style="margin-top: 0.5rem">
                                    <div class="slds-grid slds-gutters">
                                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                
                                            <!-- ****************** LABEL ****************** -->
                                            <div class="slds-media__figure slds-col slds-size_1-of-6 headerLabel">
                                                <ul class="slds-list_horizontal slds-media_center">
                                
                                                    <li style="margin-right: 5px;">
                                                        <lightning-icon icon-name="standard:recent" size="medium" alternative-text="cases"
                                                            title="cases">
                                                        </lightning-icon>
                                                    </li>
                                
                                                    <li>
                                                        <div class="slds-media__body">
                                                            <div class="slds-media__body">
                                                                <div class="slds-page-header__name">
                                                                    <div class="slds-page-header__name-title">
                                                                        <h2>
                                                                            <span class="slds-text-heading_small slds-truncate"><b>Recently Searched Cases</b></span>
                                                                        </h2>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </header>
                                    </div>
                                </div>

                                <div style="height: 40vh;">
                                    <c-sc-u-c-d-hours-custom-datatype
                                        data={recentlySearchedList} 
                                        columns={globalSearchColumns} 
                                        column-widths-mode="auto"
                                        onrowaction={handleRowAction} 
                                        key-field="caseRecId"
                                        wrap-text-max-lines="2"
                                        data-id="recentlySearched"
                                        onsort={onHandleSort} 
                                        hide-checkbox-column
                                        class="recentCasesDatatable">
                                    </c-sc-u-c-d-hours-custom-datatype>
                                </div>
                            </template>
                        </template>
                    </div>
                </div>
            </div>

             <!-- ************************ UPDATE CASE AND TIMECARD SIDEPANE *************************** -->
            <div class="slds-col caseUpdateDiv slds-hide slds-size_1-of-5">
                
                <div class="caseUpdateNav">
                    <div class="slds-panel__header" style="padding: 0.75rem; justify-content: center">
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideCloneCaseModal}>
                            <lightning-icon icon-name="utility:close"
                                alternative-text="close"
                                variant="inverse"
                                size="small" ></lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                        </button>
                        <h1 class="slds-text-heading_medium" style="font-size: 17px;text-align: center">Update Case and Timecard<br/>{akamCaseId}</h1>
                    </div>

                    <div class="slds-panel__body caseUpdateBodyDiv" style="height: 50vh">
                        <div>
                            <div>
                                <lightning-input 
                                label="Log work for" 
                                type="toggle" 
                                name="caseLogWorkFor"
                                class="caseLogWorkFor"
                                onchange={logWorkTodayChange}
                                message-toggle-inactive="Today"  
                                message-toggle-active="Yesterday" >
                                </lightning-input>
                            </div>
                        </div>

                        <div>
                            <div>
                                <div class="slds-grid slds-timeline__trigger">
                                    <div class="slds-grid" style="width: 100%">
                                        <div class="slds-col" style="padding: 0;">
                                        <h3>Project</h3></div>
                                        <div class="slds-col" style="padding-right: 0;text-align: right">
                                            <lightning-input 
                                            label="Account Projects" 
                                            title="Click to view only Active Projects under the Account"
                                            class="projToShow"
                                            onchange={projToShowChange}
                                            type="checkbox">
                                            </lightning-input>
                                        </div>
                                    </div>
                                </div>
                              
                                <div class="slds-m-bottom_x-small">
                                    <!-- GENERIC PROJECT LOOKUP -->
                                    <template if:false={onlyAccountProj}>
                                        <lightning-record-edit-form 
                                            object-api-name="pse__Timecard_Header__c"
                                            >
                                            <lightning-input-field variant="label-hidden" 
                                            field-name="pse__Project__c" 
                                            value={caseProject} 
                                            class="caseProject sideNavFields"
                                            required
                                            onchange={caseProjChange}>
                                            </lightning-input-field>
                                        </lightning-record-edit-form>
                                    </template>

                                    <!-- ACCOUNT SPECIFIC PROJECT DROPDOWN -->
                                    <template if:true={onlyAccountProj}>
                                        <lightning-combobox
                                        required
                                        name="Account Project"
                                        value={selectedAccProj}
                                        class="selectedAccProj sideNavFields"
                                        placeholder="Select Project"
                                        options={accProjOptions}
                                        onchange={accProjChange} 
                                        variant="label-hidden">
                                        </lightning-combobox>
                                    </template>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div>
                                <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                                    <div class="slds-grid slds-grid_vertical-align-center slds-no-space">
                                        <h3>Milestone</h3>
                                    </div>
                                </div>
                            
                                <div class="slds-m-bottom_x-small">
                                    <lightning-combobox
                                        required
                                        name="Milestone"
                                        value={selectedMilestone}
                                        class="selectedMilestone sideNavFields"
                                        placeholder="Select Milestone"
                                        options={milestoneOptions}
                                        onchange={milestoneChange} 
                                        variant="label-hidden">
                                    </lightning-combobox>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div>
                                <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                                    <div class="slds-grid slds-grid_vertical-align-center slds-no-space">
                                        <h3>Product</h3>
                                    </div>
                                </div>
                            
                                <div class="slds-m-bottom_x-small">
                                        <lightning-combobox
                                        required
                                        name="Product"
                                        value={selectedProduct}
                                        class="selectedProduct sideNavFields"
                                        placeholder="Select Product"
                                        options={productOptions}
                                        onchange={productChange} 
                                        variant="label-hidden">
                                    </lightning-combobox>
                                </div>
                            </div>
                        </div>


                        <div>
                            <div>
                                <div class="slds-grid slds-grid_align-spread slds-timeline__trigger slds-m-top_medium">
                                    <div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space">
                                        <h3>What work was done?</h3>
                                    </div>
                                </div>
                            
                                <div class="slds-m-bottom_x-small">
                                    <!--
                                    <lightning-input 
                                    name="caseWhatWork"
                                    value={caseWhatWorkVal} 
                                    id="caseWhatWork" 
                                    class="caseWhatWork textInputStyle sideNavFields" 
                                    type="text" 
                                    onchange={livingSummaryFieldChange} 
                                    required variant="label-hidden"></lightning-input>-->
                                    <lightning-textarea 
                                        name="caseWhatWork"
                                        value={caseWhatWorkVal} 
                                        id="caseWhatWork" 
                                        class="caseWhatWork textInputStyle sideNavFields" 
                                        type="text" 
                                        onchange={livingSummaryFieldChange} 
                                        required variant="label-hidden">
                                    </lightning-textarea>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div>
                                <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                                    <div class="slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space">
                                        <h3>How long did it take? (hours)</h3>
                                    </div>
                                </div>
                            
                                <div class="slds-m-bottom_x-small slds-grid">
                                    <div class="slds-col slds-size_1-of-3" style="padding-left: 0">
                                        <lightning-input 
                                            type="number" 
                                            message-when-bad-input="Please enter a valid LOE" step=".01" 
                                            name="caseHowLong" onchange={livingSummaryFieldChange} max="24" 
                                            message-when-range-overflow="Hours cannot exceed 24" min="-24" 
                                            message-when-range-underflow="Hours cannot exceed -24" 
                                            class="caseHowLong textInputStyle sideNavFields" id="caseHowLong" 
                                            required variant="label-hidden"
                                            value={caseHowLongVal}>
                                        </lightning-input>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div>
                                <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                                    <div class="slds-grid slds-grid_vertical-align-center slds-no-space">
                                        <h3 title="Enter remaining effort required on the Case">Best guess of remaining LOE? (hours)</h3><lightning-helptext title="Enter the best guess of LOE (in hours) needed to complete the remaining scope of work"></lightning-helptext>
                                    </div>
                                </div>
                            
                                <div class="slds-m-bottom_x-small slds-grid">
                                    <div class="slds-col slds-size_1-of-3" style="padding-left: 0">
                                        <lightning-input 
                                            onchange={livingSummaryFieldChange} 
                                            type="number" class="caseRemLOE textInputStyle sideNavFields" 
                                            id="caseRemLOE" 
                                            value={caseRemLOEVal}
                                            name="caseRemLOE" step=".01" 
                                            required variant="label-hidden">
                                        </lightning-input>
                                    </div>
                                    <!--
                                    <div class="slds-col remLOECalcVal" style="
                                    vertical-align: middle;padding-top: 3px;padding-left: 10px;border-left: 3px black solid;line-height: 30px;">
                                        Remaining LOE : {loeRemaining}
                                    </div>-->
                                </div>
                            </div>
                        </div>

                        <div>
                            <div>
                                <div class="slds-grid slds-grid_align-spread slds-timeline__trigger">
                                    <div class="slds-grid slds-grid_vertical-align-center slds-no-space">
                                        <h3>Next Planned Activity Date</h3>
                                    </div>
                                </div>
                            
                                <div class="slds-m-bottom_x-small">
                                    <lightning-input type="date" 
                                    id="caseNextActDate" name="caseNextActDate" 
                                    required onchange={livingSummaryFieldChange} 
                                    class="caseNextActDate textInputStyle sideNavFields" 
                                    variant="label-hidden"
                                    date-style="short" 
                                    value={activityDate}></lightning-input>
                                </div>
                            </div>
                        </div>

                        <footer class="slds-modal__footer" style="text-align: center; border: none; background-color: white;box-shadow: none;">
                            <button class="slds-button slds-button_neutral" onclick={closeCaseSidenav}>Cancel</button>
                            <button class="slds-button slds-button_brand" onclick={saveCaseAndTimecard}>Save</button>
                        </footer>
                    </div>
                </div>
            </div>
        </div>

        <!-- ****************************** SHOW LIVING SUMMARY *************************************-->
        <c-modal data-id="livingSummaryConcat" class='slds-hide' variant="x-small">
            <div slot="header" style="font-size: 20px">
                Living Summary for {akamCaseId}
                <div class="slds-has-divider_top-space" role="separator"></div>
            </div>
            
            <div class="slds-p-around_small" style="text-align: left">
                <lightning-formatted-rich-text class="slds-form-element__static" 
                value={livingSummaryToShow} linkify></lightning-formatted-rich-text>
            </div>
        </c-modal>

        <!-- ****************************** EDIT CASE LOE *************************************-->
        <template if:true={showLOEModal}>
            <!-- Modal/Popup Box LWC starts here -->
            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                <div>
                    <div>
                        <template if:true={caseLOESpinner}>
                            <lightning-spinner size="medium" variant="brand"></lightning-spinner>
                        </template>
                        <!-- OTHER MODAL MARK-UP HERE -->
                    </div>
                </div>
                <div class="slds-modal__container caseLoeModal">
                    <!-- Modal/Popup Box LWC header here -->
                    <header class="slds-modal__header " >
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeLOEModal}>
                            <lightning-icon icon-name="utility:close"
                                alternative-text="close"
                                variant="inverse"
                                size="small" ></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <h2 class="slds-text-heading_medium" style="font-size: 17px">Change LOE on {akamCaseId}</h2>
                    </header>
                    <!-- Modal/Popup Box LWC body starts here -->
                    <div class="slds-modal__content slds-p-around_medium">

                        <div class="slds-p-around--x-small">
                            <div class="slds-col slds-size_1-of-7">
                                <lightning-input 
                                    label="LOE" placeholder="New LOE..." value={caseLOEVal}
                                    message-when-step-mismatch="Please enter LOE without decimal values"
                                    type="number" variant="label-hidden" onchange={loeValChange}
                                    class="newLOE">
                                </lightning-input>
                            </div>
                        </div>

                        <div>
                            <div class="slds-col slds-size_3-of-5 slds-p-around--x-small">
                                <lightning-combobox
                                    id="fieldid"
                                    name="loeReason" class="reasonLOE"
                                    label="Change reason..."
                                    required variant="label-hidden"
                                    placeholder="Select Reason"
                                    options={loeChangeOptions}
                                    onchange={loeReasonChange}>
                                </lightning-combobox>
                            </div>

                            <template if:true={showChangeReason}>
                                <div class="slds-col slds-size_4-of-5 slds-p-around--x-small">
                                    <lightning-textarea
                                        label="LOE change reason" 
                                        placeholder="Provide LOE change reason along with date" value={loeComments}
                                        variant="label-hidden" onchange={loeCommentsChange}
                                        class="commentsLOE">
                                    </lightning-textarea>
                                </div>
                            </template>

                        </div>
                    </div>
                    <!-- Modal/Popup Box LWC footer starts here -->
                    <footer class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" onclick={closeLOEModal} title="Cancel">Cancel</button>
                        <button class="slds-button slds-button_brand" onclick={saveLOE} title="Save">Save</button>
                    </footer>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>

        <!-- ************************ CASE CLOSE MODAL ***************************************** -->

        <template if:true={showCloseCaseModal}>
            <lightning-record-edit-form 
            record-id={caseRecId} 
            object-api-name="Case"
            record-type-id={recordTypeId} 
            onsubmit={handleSubmitCloseCase} 
            onload={handleLoadCloseCase}
            onsuccess={handleSuccessCloseCase}
            onerror={handleErrorCloseCase}>

                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                    aria-describedby="modal-content-id-1" class="slds-modal slds-modal_small slds-fade-in-open closeCaseModal modalZIndex">
                    <div class="slds-modal__container">
                        <!-- Modal/Popup Box LWC header here -->
                        <header class="slds-modal__header">
                            <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideCloseCaseModal}>
                                <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small"></lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                            </button>

                            <h2 class="slds-text-heading_medium" style="font-size: 17px">
                                Close {akamCaseId}</h2>
                        </header>

                        <div class="slds-modal__content slds-p-around_medium">
                            <div>
                                <div>
                                    <template if:true={loadCloseCaseSpinner}>
                                        <lightning-spinner size="medium" variant="brand"></lightning-spinner>
                                    </template>
                                    <!-- OTHER MODAL MARK-UP HERE -->
                                </div>
                            </div>

                            
                            <lightning-messages></lightning-messages>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Status" disabled value="Closed">
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Service__c" required>
                                    </lightning-input-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Close_Code__c" required>
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Request_Type__c" required>
                                    </lightning-input-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Solution_Summary__c">
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="pse_Project__c">
                                    </lightning-input-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Streaming_Format__c">
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Case_Product__c">
                                    </lightning-input-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="PS_Root_Cause__c">
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Product__c">
                                    </lightning-input-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="PS_Alert_Mitigation_Owner__c">
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                </div>
                            </div>
                                
                        </div>

                        <footer class="slds-modal__footer" style="text-align: center">
                            <!--<button class="slds-button slds-button_neutral" onclick={hideCloseCaseModal}
                                title="Cancel">Cancel</button>-->
                            <button class="slds-button slds-button_brand" name="Save" type="submit" title="Save">Save</button>
                        </footer>
                        <!-- Modal/Popup Box LWC footer starts here -->
                    </div>
                </section>

                <div class="slds-backdrop slds-backdrop_open"></div>
            </lightning-record-edit-form>
        </template>

        <!-- ************************ BULK CASE CLOSE MODAL ***************************************** -->

        <template if:true={showBulkCloseCaseModal}>

            <section style="zoom:90%" role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                aria-describedby="modal-content-id-1" class="slds-modal slds-modal_large slds-fade-in-open modalZIndex">
                <div class="slds-modal__container" style="min-width: 98%;max-width: fit-content">
                    <!-- Modal/Popup Box LWC header here -->
                    <header class="slds-modal__header">
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" 
                        title="Close" 
                        onclick={hideBulkCloseCaseModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>

                        <h2 class="slds-text-heading_medium" style="font-size: 17px">
                            Close Multiple Cases</h2>
                    </header>

                    <div class="slds-modal__content slds-p-around_medium bulkCloseCaseModal" style="height: fit-content;height: 70vh;">
                        <div>
                            <div>
                                <template if:true={loadBulkCloseCaseSpinner}>
                                    <lightning-spinner size="medium" variant="brand"></lightning-spinner>
                                </template>
                                <!-- OTHER MODAL MARK-UP HERE -->
                            </div>
                        </div>

                        <table class="bulkCloseCaseTable">
                            <thead>
                                <th style="width:6%">AKAM Case Id</th>
                                <th style="width:4%">Severity</th>
                                <th style="width:12%">Account</th>
                                <th style="width:15%">Subject</th>
                                <th style="width:4%">LOE</th>
                                <th style="width:9%">Utilized Hours</th>
                                <th style="width:15%">Service</th>
                                <th style="width:10%">Request Type</th>    
                                <th style="width:7%">Close Code</th>
                                <th style="width:16%">Solution Summary</th>
                            </thead>
                        </table>

                        <template for:each={bulkCloseCases} for:item='item'>
                            <lightning-record-edit-form 
                                record-id={item.caseRecId} 
                                record-type-id={recordTypeId} 
                                object-api-name="Case" 
                                key={item.caseRecId}
                                onload={handleBulkCloseModalLoad}
                                class="bulkCaseRecordEditForm"
                            >
                                <table>
                                    <tr>
                                        <td style="width:6%">
                                            <lightning-output-field field-name="AKAM_Case_ID__c" variant="label-hidden" 
                                            data-id={item} value={item.akamCaseId} >
                                            </lightning-output-field>   
                                        </td>

                                        <td style="width:4%">
                                            <lightning-output-field field-name="Severity__c" value={item.severity} variant="label-hidden" data-id={item}>
                                            </lightning-output-field>
                                        </td>

                                        <td style="width:12%">
                                            <lightning-output-field field-name="AccountId" variant="label-hidden"
                                            data-id={item}>
                                            </lightning-output-field>
                                        </td>
                                        
                                        <td style="width:15%">
                                            <lightning-output-field 
                                            field-name="Subject" value={item.subject} variant="label-hidden" data-id={item}>
                                            </lightning-output-field>
                                        </td>
                                        <td style="width:4%">
                                            <lightning-output-field field-name="LOE_Hours__c" value={item.caseloe} variant="label-hidden" 
                                            data-id={item}>
                                            </lightning-output-field>
                                        </td>
                                        <td style="width:9%">
                                                <c-sc-ucd-case-util-hours-bubbles 
                                                utilized-hours={item.utilizedHours}
                                                billable-hours={item.billableHours}
                                                nonbillable-hours={item.nonbillableHours}
                                                internal-hours={item.internalHours}
                                                billable-hours-class={item.billableHoursClass}
                                            >
                                            </c-sc-ucd-case-util-hours-bubbles>
                                        </td>    
                                        <td style="width:15%">
                                            <lightning-input-field field-name="Service__c" value={item.Service} disabled variant="label-hidden" 
                                            data-id={item}>
                                            </lightning-input-field>
                                        </td>
                                        <td style="width:10%">
                                            <lightning-input-field disabled field-name="Request_Type__c" variant="label-hidden" value={item.ReqType} data-id={item}>
                                            </lightning-input-field>
                                        </td>   

                                        <td style="width:7%">
                                            <lightning-input-field 
                                            class="closeCodeClass"
                                            field-name="Close_Code__c" 
                                            required variant="label-hidden" data-id={item}>
                                            </lightning-input-field>
                                        </td>

                                        <td style="width:16%">
                                            <lightning-input-field field-name="Solution_Summary__c" variant="label-hidden" data-id={item}>
                                            </lightning-input-field>
                                        </td>     
                                    </tr>
                                </table>
                                <lightning-messages></lightning-messages>
                            </lightning-record-edit-form>                    
                        </template>

                    <!-- Modal/Popup Box LWC footer starts here -->
                    </div>
                    <footer class="slds-modal__footer" style="text-align: center">
                        <button class="slds-button slds-button_neutral" onclick={hideBulkCloseCaseModal}
                            title="Click to close">Cancel</button>
                        <button class="slds-button slds-button_brand" 
                        onclick={handleBulkCloseCaseSave} 
                        name="Save"
                        title="Save">Save</button>
                    </footer>
                </div>
            </section>

            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>


        <!-- **************** CLONE SINGLE CASE ***************** -->
        <template if:true={showCloneCaseModal}>
            <!-- Modal/Popup Box LWC starts here -->
            <section role="dialog" tabindex="-1" aria-modal="true" class="slds-modal slds-fade-in-open">
                <div>
                    <div>
                        <template if:true={loadCloneCaseSpinner}>
                            <lightning-spinner size="medium" variant="brand"></lightning-spinner>
                        </template>
                        <!-- OTHER MODAL MARK-UP HERE -->
                    </div>
                </div>
                <div class="slds-modal__container cloneCaseModal">
                    <!-- Modal/Popup Box LWC header here -->
                    <header class="slds-modal__header " >
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideCloneCaseModal}>
                            <lightning-icon icon-name="utility:close"
                                alternative-text="close"
                                variant="inverse"
                                size="small" ></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <h2 class="slds-text-heading_medium" style="font-size: 17px">Clone {akamCaseId}</h2>
                    </header>
                    <!-- Modal/Popup Box LWC body starts here -->
                    <div class="slds-modal__content slds-p-around_medium">
                    <h2>Are you sure you want to clone this Case?</h2>
                    </div>
                    <!-- Modal/Popup Box LWC footer starts here -->
                    <footer class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" onclick={hideCloneCaseModal} title="Click to close">Cancel</button>
                        <button class="slds-button slds-button_brand" onclick={cloneSingleCaseMethod} title="Yes, clone this case">Yes</button>
                    </footer>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>

        <!-- **************** ACKNOWLEDGE CASE ***************** -->
        <template if:true={showAckCaseModal}>
                <!-- Modal/Popup Box LWC starts here -->
            <section role="dialog" tabindex="-1" aria-modal="true" class="slds-modal slds-fade-in-open">
                <div>
                    <div>
                        <template if:true={loadAckCaseSpinner}>
                            <lightning-spinner size="medium" variant="brand"></lightning-spinner>
                        </template>
                        <!-- OTHER MODAL MARK-UP HERE -->
                    </div>
                </div>
                <div class="slds-modal__container ackCaseModal">
                    <!-- Modal/Popup Box LWC header here -->
                    <header class="slds-modal__header " >
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideAckCaseModal}>
                            <lightning-icon icon-name="utility:close"
                                alternative-text="close"
                                variant="inverse"
                                size="small" ></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <h1 class="slds-text-heading_medium" style="font-size: 17px;text-align: center">
                            Acknowledge {akamCaseId}
                        </h1>
                        <!--<h2 class="slds-text-heading_medium slds-hyphenate slds-text-title_caps" style="font-size: 20px"></h2>-->
                    </header>
                    <!-- Modal/Popup Box LWC body starts here -->
                    <div class="slds-modal__content slds-p-around_medium">
                    <h2>Are you sure you want to acknowledge this Case?</h2>
                    </div>
                    <!-- Modal/Popup Box LWC footer starts here -->
                    <footer class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" onclick={hideAckCaseModal} title="Click to close">Cancel</button>
                        <button class="slds-button slds-button_brand" onclick={ackCaseMethod} title="Yes, acknowledge this case">Yes</button>
                    </footer>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>

        
        <!-- ************************ CASE EDIT MODAL ***************************************** -->

        <template if:true={showEditCaseModal}>
            <lightning-record-edit-form 
            record-id={caseRecId} 
            object-api-name="Case"
            density="comfy"
            record-type-id={recordTypeId} 
            onload={handleLoadEditCase}
            onsubmit={handleSubmitEditCase} 
            onsuccess={handleSuccessEditCase}
            onerror={handleErrorEditCase}>

                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                    aria-describedby="modal-content-id-1" class="slds-modal slds-modal_medium slds-fade-in-open editCaseModal modalZIndex">
                    <div class="slds-modal__container">
                        <!-- Modal/Popup Box LWC header here -->
                        <header class="slds-modal__header">
                            <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideEditCaseModal}>
                                <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small"></lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                            </button>

                            <h2 class="slds-text-heading_medium" style="font-size: 17px">
                                Edit {akamCaseId}</h2>
                        </header>

                        <div class="slds-modal__content slds-p-around_medium">
                            <div>
                                <div>
                                    <template if:true={loadEditCaseSpinner}>
                                        <lightning-spinner size="medium" variant="brand"></lightning-spinner>
                                    </template>
                                    <!-- OTHER MODAL MARK-UP HERE -->
                                </div>
                            </div>

                            
                            <lightning-messages></lightning-messages>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" 
                                    required
                                    field-name="Status">
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-output-field variant="label-inline" field-name="OwnerId" required>
                                    </lightning-output-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Subject" required>
                                    </lightning-input-field>
                                </div>
                            </div>

                            <div class="slds-grid">
                                <div class="slds-col slds-size_2-of-2">
                                    <lightning-input-field variant="label-stacked" field-name="Description" required>
                                    </lightning-input-field>
                                </div>
                            </div>

                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Severity__c" required>
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Case_Assignment_Using_Active_Rules__c">
                                    </lightning-input-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="pse_Project__c">
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="pse_Milestone__c">
                                    </lightning-input-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="Case_Product__c">
                                    </lightning-input-field>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field variant="label-inline" field-name="LOE_Hours__c">
                                    </lightning-input-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-input-field 
                                    variant="label-inline" 
                                    date-style="short" field-name="Requested_Completion_Date_UTC__c">
                                    </lightning-input-field>
                                </div>
                            </div>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_2-of-2">
                                    <lightning-input-field variant="label-stacked"
                                    field-name="Living_Summary_Next_Steps__c">
                                    </lightning-input-field>
                                </div>
                            </div>
                                
                        </div>

                        <footer class="slds-modal__footer" style="text-align: center">
                            <!--<button class="slds-button slds-button_neutral" onclick={hideCloseCaseModal}
                                title="Cancel">Cancel</button>-->
                            <button class="slds-button slds-button_brand" name="Save" type="submit" title="Save">Save</button>
                        </footer>
                        <!-- Modal/Popup Box LWC footer starts here -->
                    </div>
                </section>

                <div class="slds-backdrop slds-backdrop_open"></div>
            </lightning-record-edit-form>
        </template>
    
        <!-- ************************ CLONE MULTIPLE CASE ***************************************** -->

        <template if:true={showMultiCloneCaseModal}>
            <!-- Modal/Popup Box LWC starts here -->
            <section role="dialog" tabindex="-1" aria-modal="true" class="slds-modal slds-fade-in-open">
                <div>
                    <div>
                        <template if:true={loadMultiCloneCaseSpinner}>
                            <lightning-spinner size="medium" variant="brand"></lightning-spinner>
                        </template>
                        <!-- OTHER MODAL MARK-UP HERE -->
                    </div>
                </div>
                <div class="slds-modal__container multicloneCaseModal">
                    <!-- Modal/Popup Box LWC header here -->
                    <header class="slds-modal__header " >
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideMultiCloneCaseModal}>
                            <lightning-icon icon-name="utility:close"
                                alternative-text="close"
                                variant="inverse"
                                size="small" ></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <h2 class="slds-text-heading_medium" style="font-size: 17px">Clone  {akamCaseId} on Multiple Accounts</h2>
                    </header>
                    <!-- Modal/Popup Box LWC body starts here -->
                    <div class="slds-modal__content slds-p-around_medium">
                    
                        <lightning-record-edit-form   
                            record-id={caseRecId} 
                            object-api-name="Case"
                            record-type-id={recordTypeId} 
                            onload={handleLoadMultiCloneCase}
                            onsubmit={addAccountToList} 
                            class="multicloneCaseAcc"
                        >
                
                            <lightning-layout>
                                <lightning-layout-item padding="around-small">
                                    <div style="padding-top:7px; font-size:14px" class="custom-box">Account : </div>
                                </lightning-layout-item>
                                <lightning-layout-item size="8" padding="around-small">   
                                    <lightning-input-field variant="label-hidden" 
                                    value=""
                                    field-name="AccountId">
                                    </lightning-input-field>
                                </lightning-layout-item>
                                <lightning-layout-item padding="around-small">
                                        <button class="slds-button slds-button_brand" 
                                        type="submit" title="Add Account to Selected Accounts">Add</button>
                                </lightning-layout-item>
                            </lightning-layout>
                        </lightning-record-edit-form>
                        
                        <div class="slds-m-around_xx-large">
                            <lightning-dual-listbox 
                                class="accountsToClone"
                                name="AccountNames"
                                source-label="Available Accounts"
                                selected-label="Selected Accounts"
                                options={accountList}
                                onchange={handleAccountChange}
                                value={selectedAccounts}
                                min={min}
                                max={max}
                            >
                            </lightning-dual-listbox>
                        </div>

                    </div>
                    <!-- Modal/Popup Box LWC footer starts here -->
                    <footer class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" onclick={hideMultiCloneCaseModal} title="Click to close">Cancel</button>
                        <button class="slds-button slds-button_brand" onclick={cloneMultiCaseMethod} title="Yes, clone this case">Clone</button>
                    </footer>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>

         <!-- ************************ EDIT CASE RCD MODAL ***************************************** -->

         <template if:true={showRCDModal}>
            <lightning-record-edit-form 
                record-id={caseRecId} 
                object-api-name="Case"
                density="comfy"
                record-type-id={recordTypeId} 
                onload={handleLoadRCDCase}
                onsubmit={handleSubmitRCDCase} 
                onsuccess={handleSuccessRCDCase}
                onerror={handleErrorRCDCase}>

                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                    aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open editCaseModal modalZIndex">
                    <div class="slds-modal__container">
                        <!-- Modal/Popup Box LWC header here -->
                        <header class="slds-modal__header">
                            <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideRCDCaseModal}>
                                <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small"></lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                            </button>

                            <h2 class="slds-text-heading_medium" style="font-size: 17px">
                                Edit Request Completion Date for Case {akamCaseId}</h2>
                        </header>

                        <div class="slds-modal__content slds-p-around_medium">
                            <div>
                                <div>
                                    <template if:true={showRCDSpinner}>
                                        <lightning-spinner size="medium" variant="brand"></lightning-spinner>
                                    </template>
                                    <!-- OTHER MODAL MARK-UP HERE -->
                                </div>
                            </div>

                            
                            <lightning-messages></lightning-messages>
                            
                                <div>
                                    <lightning-input-field 
                                    variant="label-inline" 
                                    field-name="Requested_Completion_Date_UTC__c">
                                    </lightning-input-field>
                                </div>
                                
                        </div>

                        <footer class="slds-modal__footer" style="text-align: center">
                            <!--<button class="slds-button slds-button_neutral" onclick={hideCloseCaseModal}
                                title="Cancel">Cancel</button>-->
                            <button class="slds-button slds-button_brand" name="Save" type="submit" title="Save">Save</button>
                        </footer>
                        <!-- Modal/Popup Box LWC footer starts here -->
                    </div>
                </section>

                <div class="slds-backdrop slds-backdrop_open"></div>
            </lightning-record-edit-form>
        </template>
    
    </div>

</template>