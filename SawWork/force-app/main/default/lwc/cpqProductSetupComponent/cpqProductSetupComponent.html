<template>
    <lightning-card title="Product Setup">
        <div class="slds-form slds-form_stacked slds-var-m-around_xx-large">
            <lightning-card>
    
                <!--Choose Launch-->
                <div class="slds-grid slds-wrap">
                    <div
                        class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right slds-col slds-size_1-of-2 slds-large-size_1-of-2 slds-small-size_1-of-1 ">
                        
                        <c-cpq-custom-lookup-component obj-name="PLU__c" search-placeholder="Choose Launch" icon-name="standard:account" onlookupselected={handleSelection}> </c-cpq-custom-lookup-component>
                    </div>
    
                </div>
                <!--Choose Launch-->
                
                <!--Product  Accordion Section Start-->
                
                <div class="slds-grid slds-wrap">
                <template if:true={state.showUsageAndBillingDetails}>
                    <template for:each={state.sectionData} for:item="mapKey">
    
                        <div key={mapKey.key} class="slds-col slds-size_1-of-1">
                            <div class="slds-box slds-theme_default">
                                <lightning-accordion class="example-accordion"
                                                    
                                                    allow-multiple-sections-open key={mapKey.key}>
                                                    
                                                        
                                    <lightning-accordion-section name={mapKey.key} label={mapKey.key}>
                                        <div slot="actions">
                                            <template if:false={mapKey.available}>
                                                <template if:true={state.removeRequired}>
                                                <b class="slds-text-color_error">REQUIRED SECTION</b>
                                                </template>
                                                </template>
                                        </div>
    
                                            <div class="slds-p-around_medium">
                                                <p><b>{mapKey.productName}</b></p>
                                                <br/>
                                            </div>
                                        <template if:true={state.showUsageAndBillingDetails}>
                                            <div class="slds-p-around_medium"> 
                                                
                                                <lightning-checkbox-group data-name={mapKey.billingModelValue} name={mapKey.key}  label="Additional Billing Models"
                                                    options={billingModelOptions} value={mapKey.billingModelValue} onchange={handleBillingModelChange}>
                                                </lightning-checkbox-group>
                                            </div>
                                            
        
                                            <br/>
                                            
                                            <div class="slds-p-around_medium" id={mapKey.key}>
                                              <p class="slds-text-color_error">Please select the usage section from below:</p>
                                              
                                                
    
                                                <lightning-datatable key-field="id" data={mapKey.value} name={mapKey.key} columns={sectionColumns}
                                                    max-row-selection=1 onrowselection={getSelectedSectionId}  resize-column-disabled
                                                    selected-rows={mapKey.preselect}>
                                                </lightning-datatable>
                                            </div>   
                                        </template>
                                    </lightning-accordion-section>
                                </lightning-accordion> 
                            </div> 
                            <br> 
                            
                        
                        </div>
                        
                    </template>
                </template>
                </div>
                <!--Product  Accordion Section End-->
                
                <template if:false={state.showUsageAndBillingDetails}>
                    <template for:each={state.sectionData} for:item="mapKey">
                        <div key={mapKey.key}>
                            <div class="slds-border_bottom slds-border_top slds-border_right slds-border_left">
                                <lightning-layout class="slds-p-left_small slds-p-top_small">
                                    <lightning-layout-item class="slds-p-top_x-small">
                                        <div class="slds-text-heading_small slds-text-title_bold">{mapKey.key}</div>
                                    </lightning-layout-item>
                                </lightning-layout>
                                <lightning-layout class="slds-p-left_small slds-p-bottom_small">
                                    <lightning-layout-item class="slds-p-top_x-small">
                                        <div class="slds-text-title">{mapKey.productName}</div>
                                    </lightning-layout-item>
                                </lightning-layout>
                            </div>
                            </br>
                        </div>
                    </template>
                </template>
    
                <!--Handle Product Creation start-->
                <div class="slds-p-around_medium">
                    <lightning-button variant="brand" label={state.label} title="Create Product"
                        onclick={handleCreateProduct} disabled={state.createButtonDisable}  class="slds-m-left_x-small">
                    </lightning-button>
                </div>
                <!--Handle Product Creation End-->
            </lightning-card>
            
        </div>
        
    
    </lightning-card>
    
    
    
    
    </template>