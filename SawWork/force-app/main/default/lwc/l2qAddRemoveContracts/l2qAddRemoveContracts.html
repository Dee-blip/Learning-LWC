<!-- sldsValidatorIgnore -->
<!--
  @description       : 
  @author            : apyati
  @group             : 
  @last modified on  : 08-09-2021
  @last modified by  : apyati
  Modifications Log 
  Ver   Date         Author   Modification
  1.0   07-11-2021   apyati   Initial Version
-->
<template>

    <template if:true={isSpinner}>
        <div>
            <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
        </div>
    </template>


    <header class="slds-modal__header">
        <button class="slds-button slds-button_icon slds-modal__close " title="Close" onclick={handleClose}>
            <lightning-icon icon-name="utility:close" alternative-text="close" size="small">
            </lightning-icon>
            <span class="slds-assistive-text">Close</span>
        </button>
        <h2 id="modal-heading" class="slds-modal__title slds-hyphenate">Add/Remove Contract Products</h2>
    </header>


    <div class="slds-card slds-var-p-around_medium">
        <template if:true={error}>
            <div class="slds-modal__content slds-var-p-around_medium" style="overflow: initial;">
                {error}
            </div>
        </template>
        <div class="slds-modal__content slds-var-p-around_medium">
            <lightning-accordion active-section-name={activesections} allow-multiple-sections-open>
                <lightning-accordion-section name="available" label="Available Contracts">
                    <lightning-layout horizontal-align="spread">
                        <template if:true={noDataAvailable}>
                            <div class=" slds-align_absolute-center" style=" width:100%;">
                                {noDataAvailable}
                            </div>
                        </template>
                        <template if:false={noDataAvailable}>
                            <div class="slds-var-p-around_medium " style="height:200px; width:100%;">
                                <lightning-tree-grid class="wrapped-header-datatable" columns={gridColumns}
                                    data={gridDataAvailable} key-field="Id" hide-checkbox-column
                                    onrowaction={handleRowAction}>
                                </lightning-tree-grid>
                            </div>
                        </template>

                    </lightning-layout>
                </lightning-accordion-section>
                <lightning-accordion-section name="selected" label="Selected Contracts">
                    <lightning-layout horizontal-align="spread">
                        <template if:true={noDataSelected}>
                            <div class="slds-align_absolute-center" style=" width:100%;">
                                {noDataSelected}
                            </div>
                        </template>
                        <template if:false={noDataSelected}>
                            <div class="slds-var-p-around_medium " style="height:200px; width:100%;">
                                <lightning-tree-grid class="wrapped-header-datatable" columns={gridColumns}
                                    data={gridDataSelected} key-field="Id" hide-checkbox-column
                                    onrowaction={handleRowAction}>
                                </lightning-tree-grid>
                            </div>
                        </template>
                    </lightning-layout>
                </lightning-accordion-section>
            </lightning-accordion>
        </div>
        <footer class="slds-modal__footer">
            <lightning-button variant="neutral" label="Cancel" onclick={handleClose}>
            </lightning-button>
            <lightning-button variant="brand" label="Confirm" onclick={handleSave}>
            </lightning-button>
        </footer>
    </div>

    <template if:true={isModalOpen}>
        <!-- Modal/Popup Box LWC starts here -->
        <div role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1"
            class=" lds-modal slds-fade-in-open slds-modal_small slds-backdrop slds-backdrop_open">
            <div class="slds-modal__container slds-var-p-around_medium previewModal ">
                <c-l-2q-contract-preview record-id={contractId} onclosepreview={handleClosePreview}>
                </c-l-2q-contract-preview>
            </div>
        </div>
    </template>

</template>