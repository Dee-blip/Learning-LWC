<html>
	<head>
		<title>DV4 Tool v2</title>
    
		<link rel="stylesheet" type="text/css" href="css/styles.css">
        <script type="text/javascript" src="js/ajax_funcs.js"></script>
		<script type="text/javascript" src="js/swfobject.js"></script>        
		<script src="js/jquery-min.js"></script>

	</head>
	<body bgcolor="#CCCCCC" topmargin="0" leftmargin="0" bottommargin="0" rightmargin="0">
		<div id="header"class="header">
			<div id="langselect">
				<span class="languageText">Language:</span>
				<select name="country" class="dropdownselect" id="chooseLanguage" >  
					<option value="English" data-lang ="enus"selected="selected">English</option>
					<option value="German" data-lang ="ende">German</option>
					<option value="German" data-lang ="enes">Spanish</option>
					<option value="French" data-lang ="enfr">French</option>
					<option value="Japan" data-lang ="enjp">Japanese</option>
					<option value="Koria" data-lang ="enkr">Korean</option>
					<option value="China" data-lang ="enzs">Chinese</option>
				</select>
			</div>
		</div>
		<div class="swfcontainer">
			<div id="flashcontent">
				<!-- alternative code starts here--->
				<!-- you can replace following code with Alternative image or text, which will be shown if user will not have required flash player version -->
				<table width="300" height="300" border="0" cellspacing="0" cellpadding="0">
					<tr>
					    <td align="center" valign="middle" >
						  This Flash movie requires a newer version of the Flash plugin. Please click "Start Upgrade" to upgrade your Flash plugin
							<br /><a href="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash">Start Upgrade</a>
						</td>
					</tr>
				</table>
				<!-- alternative code ends here-->
			</div>
		</div>
		
  </body>
  <script type="text/javascript">
            var pubName;
            getPubUserAjax();
            generateCookie(pubName);
            function generateCookie(user) {
               document.cookie="dv4_loggedin="+user+";path=/;domain=akamai.com";
			   document.cookie="apex_PARTNERDV4SESSION=access%3D1342022051DrMk71902%7Emd5%3D8ee6b36aa8d5efc17dacae6f927f8fe5;path=/";
               return;
            }

            $(function(){
            	$("#chooseLanguage").change(function(){
            		var selected = $(this).find('option:selected');
       				attachSwfobject(selected.data('lang'));
            	})

            	//$(window).resize(onDocResize);
            });

			function println(msg){
				console.log(msg);
			}
			
			function gup( name )
            {
				name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
				var regexS = "[\\?&]"+name+"=([^&#]*)";
				var regex = new RegExp( regexS );
				var results = regex.exec( window.location.href );
				if( results == null )
					return "";
				else
					return results[1];
            }
			
			var flashvars = {};
			//
			flashvars.conf_uri = "resource/DV4_Partner/xml/dv4_www.xml";
			flashvars.base_uri = "resource/DV4_Partner/";
			flashvars.app_type = "partner";
			flashvars.report_id = gup('id');
			flashvars.parid = gup('pid');
			flashvars.OFFLINE = false;
			//
			// example of relative path:
			// data/data.xml
			// 
			// IMPORTANT:
			// If html and swf is not in same folder, 
			// xml path must be relative to the HTML file 
			// not the SWF file. 
			//
			var params = {};  
			params.menu = "false";
			params.bgcolor = "#000000";
			params.wmode = "opaque";
			//
			var attributes = {};
			attributes.id = "mySWF";
			attributes.name = "mySWF";
			//

			var lng = gup("lang").toString();
            if(lng == null || lng == '') lng = 'enus';
            attachSwfobject(lng);

            function attachSwfobject(lang){
            	flashvars.lang = lang;

            	$(".swfcontainer").empty();
				$(".swfcontainer").append('<div id="flashcontent"></div>');

				if(lang != 'enjp' && lang != 'enkr' && lang != 'enzs') lang = '_west';
				else lang = '_asia';
				var flashFile ="resource/DV4_Partner/dv4v2" + lang + ".swf";
				swfobject.embedSWF(flashFile, "flashcontent", "100%", "100%", "10.0.0","js/expressInstall.swf", flashvars, params, attributes);
            }

			//
			function thisMovie(movieName) {
		        var isIE = navigator.appName.indexOf("Microsoft") != -1;
		        return (isIE) ? window[movieName] : document[movieName];
		    }
			function getPageUrl() {
		        var isIE = navigator.appName.indexOf("Microsoft") != -1;
		        return (isIE) ? window.location.href: document.location.href;
		    }
		    function jsFunc() {
				thisMovie("mySWF").asFunc(getPageUrl());
		    }
		</script>
</html>
